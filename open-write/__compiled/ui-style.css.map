{
  "version": 3,
  "file": "ui-style.css",
  "sources": [
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte",
    "../../../main.svelte"
  ],
  "sourcesContent": [
    "<script>\nexport let OLSKAppToolbarGuideURL = '';\nexport let OLSKAppToolbarStorageStatus = '';\nexport let OLSKAppToolbarDispatchLauncher = null;\nexport let OLSKAppToolbarDispatchStorage;\nexport let OLSKAppToolbarDispatchFund = null;\n\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nconst mod = {\n\n\t// INTERFACE\n\n\tInterfaceWindowDidKeydown (event) {\n\t\tconst handlerFunctions = {\n\t\t\tSpace () {\n\t\t\t\tif (!event.altKey) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tOLSKAppToolbarDispatchLauncher()\n\n\t\t\t\treturn event.preventDefault();\n\t\t\t},\n\t\t};\n\n\t\thandlerFunctions[event.code] && handlerFunctions[event.code]();\n\t},\n\n};\n\nimport OLSKReloadButton from 'OLSKReloadButton';\nimport OLSKLanguageSwitcher from 'OLSKLanguageSwitcher';\nimport _OLSKSharedCloud from '../OLSKUIAssets/_OLSKSharedCloud.svg';\nimport _OLSKSharedLauncher from '../OLSKUIAssets/_OLSKSharedLauncher.svg';\n</script>\n<svelte:window on:keydown={ mod.InterfaceWindowDidKeydown } />\n\n<div class=\"OLSKAppToolbar OLSKToolbar OLSKToolbarJustify\">\n\n<div class=\"OLSKToolbarElementGroup\">\n\t<OLSKReloadButton />\n\t\n\t<OLSKLanguageSwitcher OLSKSharedActiveRouteConstant={ window.OLSKPublicConstants('OLSKSharedActiveRouteConstant') }\n\t\tOLSKSharedPageLanguagesAvailable={ window.OLSKPublicConstants('OLSKSharedPageLanguagesAvailable') }\n\t\tOLSKSharedPageCurrentLanguage={ window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage') }\n\t\t/>\n\n\t{#if OLSKAppToolbarGuideURL}\n\t\t<a class=\"OLSKAppToolbarGuideLink\" href={ OLSKAppToolbarGuideURL } target=\"_blank\">{ OLSKLocalized('OLSKAppToolbarGuideLinkText') }</a>\n\t{/if}\n\n\t{#if OLSKAppToolbarDispatchFund }\n\t\t<button class=\"OLSKAppToolbarFundButton OLSKCommonButton\" on:click={ OLSKAppToolbarDispatchFund }>{ OLSKLocalized('OLSKAppToolbarFundButtonText') }</button>\n\t{/if}\n</div>\n\n<div class=\"OLSKToolbarElementGroup\">\n\t<div class=\"OLSKAppToolbarStorageStatus\">{ OLSKAppToolbarStorageStatus }</div>\n\n\t<button class=\"OLSKAppToolbarStorageButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('OLSKAppToolbarStorageButtonText') } on:click={ OLSKAppToolbarDispatchStorage } class:OSWIconVisible={ false }>\n\t\t<div class=\"OLSKAppToolbarStorageButtonImage\">{@html _OLSKSharedCloud }</div>\n\t</button>\n\n\t{#if OLSKAppToolbarDispatchLauncher }\n\t\t<button class=\"OLSKAppToolbarLauncherButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('OLSKAppToolbarLauncherButtonText') } on:click={ OLSKAppToolbarDispatchLauncher } class:OSWIconVisible={ false }>\n\t\t\t<div class=\"OLSKAppToolbarLauncherButtonImage\">{@html _OLSKSharedLauncher }</div>\n\t\t</button>\n\t{/if}\n</div>\n\t\n</div>\n\n<style src=\"./ui-style.css\">.OLSKAppToolbar {\n\tborder-top: var(--OLSKAppBorderStyle);\n\t\n\t/* AppContainerFlexbox:Child */\n\tflex-shrink: 0;\n\n\t/* OLSKAppToolbarFlexbox:Parent */\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.OLSKAppToolbar a {\n\tcolor: inherit;\n}\n\n.OLSKAppToolbar div {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.OLSKAppToolbar :global(.OLSKToolbarElementGroup > *:not(:first-child)) {\n\tmargin-left: 10px;\n}\n\n.OLSKAppToolbar :global(.OLSKLanguageSwitcher span) {\n\t/* browser quirks */\n\tpadding-left: 4px;\n}\n\n.OLSKAppToolbarStorageButton.OSWIconVisible .OLSKAppToolbarStorageButtonImage {\n\tdisplay: none;\n}\n\n.OLSKAppToolbarStorageButton :global(.OSWOptionImage path) {\n\tfill: black;\n}\n</style>\n",
    "<script>\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n</script>\n\n<div class=\"OLSKDetailPlaceholder OLSKLayoutElementTextVisual\">{ OLSKLocalized('OLSKDetailPlaceholderText') }</div>\n\n<style>\n.OLSKDetailPlaceholder {\n\topacity: 0.5;\n\ttext-align: center;\n\n\t/* OLSKDetailPlaceholderFlexbox:Parent */\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n:global(.OLSKIsLoading) .OLSKDetailPlaceholder {\n\tvisibility: hidden;\n}\n</style>\n",
    "<script>\nexport let OLSKInputWrapperValue;\nexport let OLSKInputWrapperDispatchClear;\n\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nimport _OLSKInputClear from '../OLSKUIAssets/_OLSKInputClear.svg';\n</script>\n\n<div class=\"OLSKInputWrapper OLSKToolbarFlexible\">\n\n<slot></slot>\n\n{#if OLSKInputWrapperValue}\n\t<button class=\"OLSKInputWrapperClearButton OLSKLayoutElementTappable OLSKLayoutButtonNoStyle OLSKToolbarButton\" title={ OLSKLocalized('OLSKInputWrapperClearButtonText') } on:mousedown={ (event) => event.preventDefault() } on:click={ OLSKInputWrapperDispatchClear }>\n\t\t<div class=\"OLSKInputWrapperClearButtonImage\">{@html _OLSKInputClear }</div>\n\t</button>\n{/if}\n\n</div>\n\n<style>\n.OLSKInputWrapper {\n\t/* OLSKInputWrapperStation:Parent */\n\tposition: relative;\n\n\t/* OLSKInputWrapperFlexbox:Parent */\n\tdisplay: flex;\n\n\t/* ChromeRemoveInputOutline */\n\toutline: none;\n}\n\n.OLSKInputWrapper :global(input) {\n\tpadding: 6px;\n\tmargin: 0;\n\tborder: 1px solid #e6e6e6;\n\tborder-radius: 5px;\n\n\ttext-indent: 2px;\n\tline-height: 1.4;\n\n\t/* OLSKInputWrapperFlexbox:Child */\n\tflex-grow: 1;\n}\n\n.OLSKInputWrapperClearButton {\n\t--OLSKInputWrapperClearButtonSize: 24px;\n\n\twidth: var(--OLSKInputWrapperClearButtonSize);\n\theight: var(--OLSKInputWrapperClearButtonSize);\n\n\t/* OLSKInputWrapperStation:Child */\n\tposition: absolute;\n\tright: 4px;\n\ttop: 50%;\n\tmargin-top: calc(-1 * var(--OLSKInputWrapperClearButtonSize) / 2);\n}\n\n@media screen and (max-width: 760px) {\n\n.OLSKInputWrapperClearButton {\n\t--OLSKInputWrapperClearButtonSize: 30px;\n}\n\n.OLSKInputWrapper :global(input) {\n\theight: 30px;\n\n\tfont-size: 14px;\n}\n\n}\n\n</style>\n",
    "<script>\nexport let OLSKResultsListItems;\nexport let OLSKResultsListItemSelected;\nexport let OLSKResultsDispatchArrow;\nexport let OLSKResultsDispatchClick;\nexport let OLSKResultsEnableLooping = false;\nexport let OLSKResultsIgnoreKeyboard = false;\n\nimport OLSKResultsLogic from './ui-logic.js';\n\nconst mod = {\n\n\t// INTERFACE\n\n\tInterfaceWindowDidKeydown(event) {\n\t\tif (OLSKResultsIgnoreKeyboard) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (!OLSKResultsListItems.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handlerFunctions = {\n\t\t\tArrowUp () {\n\t\t\t\t(function() {\n\t\t\t\t\tif (!OLSKResultsEnableLooping && OLSKResultsListItems[0] === OLSKResultsListItemSelected) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tmod.ControlArrowIncrement(-1);\n\t\t\t\t})();\n\n\t\t\t\treturn event.preventDefault();\n\t\t\t},\n\t\t\tArrowDown () {\n\t\t\t\t(function() {\n\t\t\t\t\tif (!OLSKResultsEnableLooping && (OLSKResultsListItems.slice(-1).pop() === OLSKResultsListItemSelected)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tmod.ControlArrowIncrement(1);\n\t\t\t\t})();\n\t\t\t\t\n\t\t\t\treturn event.preventDefault();\n\t\t\t},\n\t\t};\n\n\t\thandlerFunctions[event.code] && handlerFunctions[event.code]();\n\t},\n\n\t// CONTROL\n\n\tControlArrowIncrement (inputData) {\n\t\tOLSKResultsDispatchArrow(OLSKResultsListItems[OLSKResultsLogic.OLSKResultsConstrainIndex(OLSKResultsListItems, OLSKResultsListItems.indexOf(OLSKResultsListItemSelected) + inputData)]);\n\t},\n\n};\n</script>\n<svelte:window on:keydown={ mod.InterfaceWindowDidKeydown } />\n\n<div class=\"OLSKResults\">\n\n{#if OLSKResultsListItems.length}\n\t<div class=\"OLSKResultsList\">\n\t\t{#each OLSKResultsListItems as e}\n\t\t\t<div class=\"OLSKResultsListItem\" class:OLSKResultsListItemSelected={ e === OLSKResultsListItemSelected } on:click={ () => OLSKResultsDispatchClick(e) }>\n\t\t\t\t<slot OLSKResultsListItem={ e }></slot>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n{:else}\n\t<div class=\"OLSKResultsEmpty\">\n\t\t<slot name=\"OLSKResultsEmpty\"></slot>\n\t</div>\n{/if}\n\n</div>\n\n<style>\n.OLSKResultsListItem {\n\tcursor: pointer;\n}\n</style>\n",
    "<script>\nexport let StorageClient;\n\nfunction SetupStorageWidget (inputData) {\n\t(new window.OLSKStorageWidget(StorageClient)).attach(inputData);\n};\n</script>\n\n<div class=\"OLSKStorageWidget\" use:SetupStorageWidget></div>\n\n<style global src=\"./__compiled/OLSKStorageWidget.css\">:global(.OSWRoot.svelte-168zsp3){display:flex;flex-direction:column;align-items:center}\n:global(.OSWStorageOptions.svelte-ls3lcz){padding:5px}:global(h1.svelte-ls3lcz){margin-top:0;font-size:11pt}:global(button.svelte-ls3lcz){margin:5px}:global(button.svelte-ls3lcz) :global(svg){width:32px;height:32px}</style>\n",
    "<script>\nexport let OLSKServiceWorkerRegistrationRoute;\nexport let DebugFakeUpdateAlertVisible = false;\nexport let DebugEnableLogging = true;\nexport let DebugAllowLocalhost = false;\n\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nconst mod = {\n\n\t// VALUE\n\n\t_ValueRegistration: undefined,\n\n\t_ValueNextWorker: undefined,\n\n\t_ValueUpdateAlertIsVisible: DebugFakeUpdateAlertVisible,\n\n\t// INTERFACE\n\n\tInterfaceReloadButtonDidClick() {\n\t\tmod.ControlSkipWaiting();\n\t},\n\n\t// CONTROL\n\n\tControlSkipWaiting () {\n\t\tmod._ValueNextWorker.postMessage({\n\t\t\taction: 'skipWaiting',\n\t\t});\n\t},\n\n\t// MESSAGE\n\n\tMessageUpdateFound (event) {\n\t\tDebugEnableLogging && console.log('updatefound', event);\n\n\t\tmod._ValueNextWorker = mod._ValueRegistration.installing;\n\n\t\tmod._ValueNextWorker.addEventListener('statechange', mod.MessageNextWorkerStateChange);\n\t},\n\n\tMessageNextWorkerStateChange (event) {\n\t\tDebugEnableLogging && console.log('statechange', mod._ValueNextWorker.state, event, navigator.serviceWorker.controller);\n\n\t\tif (mod._ValueNextWorker.state !== 'installed') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!navigator.serviceWorker.controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tmod._ValueUpdateAlertIsVisible = true;\n\t},\n\n\tMessageControllerChange (event) {\n\t\tDebugEnableLogging && console.log('controllerchange', event);\n\n\t\twindow.location.reload();\n\t},\n\n\t// SETUP\n\n\tasync SetupEverything() {\n\t\tif (!navigator.serviceWorker) {\n\t\t\treturn DebugEnableLogging && console.info('Service worker not available');\n\t\t}\n\n\t\tif (!OLSKServiceWorkerRegistrationRoute) {\n\t\t\treturn DebugEnableLogging && console.info('Missing registration route');\n\t\t}\n\n\t\tif (document.location.hostname === 'localhost' && !DebugAllowLocalhost) {\n\t\t\treturn DebugEnableLogging && console.info('OLSKServiceWorker: Skipping on localhost');\n\t\t};\n\n\t\tawait mod.SetupRegistration();\n\n\t\tmod.SetupControllerChange();\n\t},\n\n\tasync SetupRegistration() {\n\t\tmod._ValueRegistration = await navigator.serviceWorker.register(OLSKServiceWorkerRegistrationRoute);\n\t\t\n\t\tDebugEnableLogging && console.info('Service Worker Registered');\n\n\t\tmod._ValueRegistration.addEventListener('updatefound', mod.MessageUpdateFound);\n\t},\n\n\tSetupControllerChange () {\n\t\tnavigator.serviceWorker.addEventListener('controllerchange', mod.MessageControllerChange);\n\t},\n\n\t// LIFECYCLE\n\n\tLifecycleModuleDidMount() {\n\t\tmod.SetupEverything();\n\t},\n\n};\n\nmod.LifecycleModuleDidMount();\n</script>\n\n{#if mod._ValueUpdateAlertIsVisible }\n<div class=\"OLSKServiceWorkerUpdateAlert\" on:click={ () => mod._ValueUpdateAlertIsVisible = false }>\n\t<span class=\"OLSKServiceWorkerUpdateAlertLabel\">{ OLSKLocalized('OLSKServiceWorkerUpdateAlertLabelText') }</span>\n\t<button class=\"OLSKServiceWorkerUpdateAlertReloadButton\" on:click={ mod.InterfaceReloadButtonDidClick }>{ OLSKLocalized('OLSKServiceWorkerUpdateAlertReloadButtonText') }</button>\n</div>\n{/if}\n\n<style type=\"text/css\">\n.OLSKServiceWorkerUpdateAlert {\n\tpadding: 10px;\n\tborder: 1px solid #7f7f7f;\n\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\n\tbackground: #f3f3f3;\n\tfont-family: 'Helvetica Neue', 'Helvetica', sans-serif;\n}\n</style>\n",
    "<script>\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nimport OLSKThrottle from 'OLSKThrottle';\nimport KVC_Data from '../_shared/KVC_Data/main.js';\nimport KVCNoteStorage from '../_shared/KVCNote/storage.js';\nimport KVCNoteModel from '../_shared/KVCNote/model.js';\nimport KVCSettingStorage from '../_shared/KVCSetting/storage.js';\nimport KVCVersionStorage from '../_shared/KVCVersion/storage.js';\nimport { OLSK_TESTING_BEHAVIOUR } from 'OLSKTesting';\nimport OLSKRemoteStorage from 'OLSKRemoteStorage'\nimport OLSKServiceWorker from 'OLSKServiceWorker';\nimport KVCNoteAction from '../_shared/KVCNote/action.js';\nimport KVCVersionAction from '../_shared/KVCVersion/action.js';\nimport KVCSettingAction from '../_shared/KVCSetting/action.js';\nimport KVCWriteLogic from './ui-logic.js';\nimport RemoteStorage from 'remotestoragejs';\nimport KVCTemplate from '../_shared/KVCTemplate/main.js';\nimport showdown from 'showdown';\nimport OLSKString from 'OLSKString';\n\nconst mod = {\n\n\t// VALUE\n\n\t_ValueIsLoading: true,\n\n\t_RevealArchiveIsVisible: false,\n\t_ValueArchivedCount: 0,\n\tValueArchivedCount (inputData) {\n\t\tmod._ValueArchivedCount = inputData.filter(function (e) {\n\t\t\treturn e.KVCNoteIsArchived;\n\t\t}).length;\n\t},\n\n\t_ValueNotesAll: [],\n\tValueNotesAll (inputData, shouldSort = true) {\n\t\tmod.ValueNotesVisible(mod._ValueNotesAll = inputData, shouldSort);\n\t},\n\n\t_ValueNotesVisible: [],\n\tValueNotesVisible (inputData, shouldSort = true) {\n\t\tlet items = !mod._ValueFilterText ? inputData : inputData.filter(KVCWriteLogic.KVCWriteFilterFunction(mod._ValueFilterText));\n\n\t\tif (mod.DataRevealArchiveIsVisible()) {\n\t\t\titems = items.filter(function (e) {\n\t\t\t\treturn !e.KVCNoteIsArchived;\n\t\t\t});\n\t\t}\n\n\t\tmod._ValueNotesVisible = shouldSort ? items.sort(KVCWriteLogic.KVCWriteLogicListSort) : items;\n\t},\n\t\n\t_ValueNoteSelected: undefined,\n\tValueNoteSelected (inputData) {\n\t\tmod.KVCWriteDetailInstance.modPublic.KVCWriteDetailSetItem(mod._ValueNoteSelected = inputData);\n\n\t\tif (!inputData) {\n\t\t\tmod.OLSKMobileViewInactive = false;\t\n\t\t}\n\t},\n\t\n\t_ValueFilterText: '',\n\t\n\t_ValueStorageToolbarHidden: true,\n\n\t_ValueFooterStorageStatus: '',\n\n\t_ValueSaveNoteThrottleMap: {},\n\n\t_ValueSaveVersionThrottleMap: {},\n\t\n\t_ValueSavePublishThrottleMap: {},\n\n\tKVCWriteDetailInstance: undefined,\n\n\tOLSKMobileViewInactive: false,\n\n\t_ValueDidMigrate: false,\n\n\t_ValueStorageIsConnected: false,\n\n\t_ValueSettingsAll: [],\n\t\n\t// DATA\n\n\tDataSetting (inputData) {\n\t\treturn mod._ValueSettingsAll.filter(function (e) {\n\t\t\treturn e.KVCSettingKey === inputData;\n\t\t}).shift();\n\t},\n\t\n\tDataSettingValue (inputData) {\n\t\treturn (mod.DataSetting(inputData) || {}).KVCSettingValue;\n\t},\n\n\tDataNavigator () {\n\t\treturn navigator.serviceWorker ? navigator : {\n\t\t\tserviceWorker: {},\n\t\t};\n\t},\n\n\tDataWriteRecipes () {\n\t\tconst outputData = [{\n\t\t\tLCHRecipeSignature: 'KVCWriteLauncherItemJournal',\n\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteLauncherItemJournalText'),\n\t\t\tLCHRecipeCallback: function KVCWriteLauncherItemJournal () {\n\t\t\t\tmod.ControlNoteCreate(KVCWriteLogic.KVCWriteLauncherItemJournalTemplate(this.api.LCHDateLocalOffsetSubtracted(new Date(OLSK_TESTING_BEHAVIOUR() ? '2001-02-03T04:05:06Z' : Date.now())), OLSKLocalized));\n\t\t\t},\n\t\t}, {\n\t\t\tLCHRecipeSignature: 'KVCWriteLauncherItemBacklinks',\n\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteLauncherItemBacklinksText'),\n\t\t\tLCHRecipeCallback: async function KVCWriteLauncherItemBacklinks () {\n\t\t\t\tmod.ControlNoteCreate(KVCWriteLogic.KVCWriteLauncherItemBacklinksTemplate(this.api.LCHDateLocalOffsetSubtracted(new Date(OLSK_TESTING_BEHAVIOUR() ? '2001-02-03T04:05:06Z' : Date.now())), KVCWriteLogic.KVCWriteBacklinksMap(mod._ValueNotesAll), OLSKLocalized));\n\t\t\t},\n\t\t}];\n\n\t\tif (mod._ValueStorageIsConnected) {\n\t\t\tlet count = 0;\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteLauncherItemConfigureCustomDomain',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteLauncherItemConfigureCustomDomainText'),\n\t\t\t\tLCHRecipeCallback: function KVCWriteLauncherItemConfigureCustomDomain () {\n\t\t\t\t\tconst prompt1 = !OLSK_TESTING_BEHAVIOUR() || (OLSK_TESTING_BEHAVIOUR() && !count);\n\t\t\t\t\tconst prompt2 = !OLSK_TESTING_BEHAVIOUR() || (OLSK_TESTING_BEHAVIOUR() && count);\n\t\t\t\t\tconst confirm3 = !OLSK_TESTING_BEHAVIOUR() || (OLSK_TESTING_BEHAVIOUR() && count == 2);\n\n\t\t\t\t\tif (prompt1) {\n\t\t\t\t\t\tif (window.prompt(OLSKLocalized('KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText'), KVCNoteStorage.KVCNoteStoragePublicURL(mod._ValueStorageClient, KVCNoteStorage.KVCNoteStoragePublicRootPagePath())) === null) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (prompt2) {\n\t\t\t\t\t\tconst callback = async function () {\n\t\t\t\t\t\t\tconst response = OLSK_TESTING_BEHAVIOUR() && confirm3 ? '' : window.prompt(OLSKLocalized('KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText'));\n\n\t\t\t\t\t\t\tif (response === null) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!response && window.confirm(OLSKLocalized('KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText'))) {\n\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!response) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst item = KVCWriteLogic.KVCWriteCustomDomainBaseURLData(response);\n\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\tawait mod.ControlSettingStore('KVCSettingCustomDomainBaseURL', item);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (mod._ValueNoteSelected) {\n\t\t\t\t\t\t\t\t\tawait mod._ControlHotfixUpdateInPlace(mod._ValueNoteSelected);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\t\t\tcount += 1;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteLauncherItemRemoveCustomDomain',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteLauncherItemRemoveCustomDomainText'),\n\t\t\t\tLCHRecipeCallback: async function KVCWriteLauncherItemRemoveCustomDomain () {\n\t\t\t\t\tawait KVCSettingAction.KVCSettingsActionDelete(mod._ValueStorageClient, 'KVCSettingCustomDomainBaseURL');\n\n\t\t\t\t\tdelete mod._ValueSettingsAll[mod._ValueSettingsAll.indexOf(mod.DataSetting('KVCSettingCustomDomainBaseURL'))];\n\n\t\t\t\t\tif (mod._ValueNoteSelected) {\n\t\t\t\t\t\tmod._ControlHotfixUpdateInPlace(mod._ValueNoteSelected);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tLCHRecipeIsExcluded () {\n\t\t\t\t\treturn !mod.DataSetting('KVCSettingCustomDomainBaseURL');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\toutputData.push(...[\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeOLSKChangeDelegateCreateNote',\n\t\t\t\t\tLCHRecipeCallback: async function FakeOLSKChangeDelegateCreateNote () {\n\t\t\t\t\t\treturn mod.OLSKChangeDelegateCreateNote(await KVCNoteAction.KVCNoteActionCreate(mod._ValueStorageClient, mod.FakeNoteObjectValid('FakeOLSKChangeDelegateCreateNote')));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeOLSKChangeDelegateUpdateNote',\n\t\t\t\t\tLCHRecipeCallback: async function FakeOLSKChangeDelegateUpdateNote () {\n\t\t\t\t\t\treturn mod.OLSKChangeDelegateUpdateNote(await KVCNoteAction.KVCNoteActionUpdate(mod._ValueStorageClient, Object.assign(mod._ValueNotesAll.filter(function (e) {\n\t\t\t\t\t\t\treturn e.KVCNoteBody.match('FakeOLSKChangeDelegate');\n\t\t\t\t\t\t}).pop(), {\n\t\t\t\t\t\t\tKVCNoteBody: 'FakeOLSKChangeDelegateUpdateNote',\n\t\t\t\t\t\t})));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeOLSKChangeDelegateDeleteNote',\n\t\t\t\t\tLCHRecipeCallback: async function FakeOLSKChangeDelegateDeleteNote () {\n\t\t\t\t\t\tconst item = mod._ValueNotesAll.filter(function (e) {\n\t\t\t\t\t\t\treturn e.KVCNoteBody.match('FakeOLSKChangeDelegate');\n\t\t\t\t\t\t}).pop();\n\t\t\t\t\t\t\n\t\t\t\t\t\tawait KVCNoteAction.KVCNoteActionDelete(mod._ValueStorageClient, item);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn mod.OLSKChangeDelegateDeleteNote(item);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeOLSKChangeDelegateConflictNote',\n\t\t\t\t\tLCHRecipeCallback: async function FakeOLSKChangeDelegateConflictNote () {\n\t\t\t\t\t\tconst item = mod._ValueNotesAll.filter(function (e) {\n\t\t\t\t\t\t\treturn e.KVCNoteBody.match('FakeOLSKChangeDelegateConflictNote');\n\t\t\t\t\t\t}).pop();\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn mod.OLSKChangeDelegateConflictNote({\n\t\t\t\t\t\t\torigin: 'conflict',\n\t\t\t\t\t\t\toldValue: OLSKRemoteStorage.OLSKRemoteStoragePreJSONSchemaValidate(await KVCNoteAction.KVCNoteActionUpdate(mod._ValueStorageClient, Object.assign({}, item, {\n\t\t\t\t\t\t\t\tKVCNoteBody: item.KVCNoteBody + '-local',\n\t\t\t\t\t\t\t}))),\n\t\t\t\t\t\t\tnewValue: OLSKRemoteStorage.OLSKRemoteStoragePreJSONSchemaValidate(Object.assign({}, item, {\n\t\t\t\t\t\t\t\tKVCNoteBody: item.KVCNoteBody + '-remote',\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeEscapeWithoutSort',\n\t\t\t\t\tLCHRecipeCallback: function FakeEscapeWithoutSort () {\n\t\t\t\t\t\tmod.ControlNoteSelect(null);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeCreateNoteV1',\n\t\t\t\t\tLCHRecipeCallback: async function FakeCreateNoteV1 () {\n\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\tKVCNoteID: 'alfa',\n\t\t\t\t\t\t\tKVCNoteBody: '',\n\t\t\t\t\t\t\tKVCNoteCreationDate: new Date('2019-02-23T13:56:36Z'),\n\t\t\t\t\t\t\tKVCNoteModificationDate: new Date('2019-02-23T13:56:36Z'),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait OLSKRemoteStorage.OLSKRemoteStorageWriteObject(mod._ValueStorageClient.wikiavec.__DEBUG.__OLSKRemoteStoragePrivateClient(), KVCNoteStorage.KVCNoteStorageObjectPathV1(item), OLSKRemoteStorage.OLSKRemoteStoragePreJSONSchemaValidate(item));\n\t\t\t\t\t\tawait mod.SetupValueNotesAll();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeStorageNotConnected',\n\t\t\t\t\tLCHRecipeCallback: function FakeStorageNotConnected () {\n\t\t\t\t\t\tmod.StorageNotConnected();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeStorageSyncDone',\n\t\t\t\t\tLCHRecipeCallback: function FakeStorageSyncDone () {\n\t\t\t\t\t\tmod.StorageSyncDone();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeStorageIsConnected',\n\t\t\t\t\tLCHRecipeCallback: function FakeStorageIsConnected () {\n\t\t\t\t\t\tmod._ValueStorageIsConnected = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tLCHRecipeName: 'FakeConfigureCustomDomain',\n\t\t\t\t\tLCHRecipeCallback: async function FakeConfigureCustomDomain () {\n\t\t\t\t\t\tawait mod.ControlSettingStore('KVCSettingCustomDomainBaseURL', KVCWriteLogic.KVCWriteCustomDomainBaseURLData('FakeCustomDomainBaseURL'));\n\n\t\t\t\t\t\tif (mod._ValueNoteSelected) {\n\t\t\t\t\t\t\tawait mod._ControlHotfixUpdateInPlace(mod._ValueNoteSelected);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\n\t\toutputData.push(...OLSKRemoteStorage.OLSKRemoteStorageRecipes(window, mod._ValueStorageClient, OLSKLocalized, OLSK_TESTING_BEHAVIOUR()));\n\t\toutputData.push(...OLSKServiceWorker.OLSKServiceWorkerRecipes(window, mod.DataNavigator(), OLSKLocalized, OLSK_TESTING_BEHAVIOUR()));\n\n\t\tif (mod.KVCWriteDetailInstance) {\n\t\t\toutputData.push(...mod.KVCWriteDetailInstance.modPublic.KVCWriteDetailRecipes());\n\t\t}\n\n\t\tif (mod.DataRevealArchiveIsVisible()) {\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteLauncherItemRevealArchive',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteMasterRevealArchiveButtonText'),\n\t\t\t\tLCHRecipeCallback: function KVCWriteLauncherItemRevealArchive () {\n\t\t\t\t\tmod.KVCWriteMasterDispatchRevealArchive();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn outputData;\n\t},\n\n\tDataRevealArchiveIsVisible () {\n\t\treturn mod._ValueArchivedCount && mod._RevealArchiveIsVisible;\n\t},\n\n\tDataIsMobile () {\n\t\treturn window.innerWidth <= 760;\n\t},\n\n\tDataVersionsIsDisabled () {\n\t\treturn window.location.hostname !== window.OLSKPublicConstants('KVC_SHARED_REF_HOST');\n\t},\n\n\tDataDebugPersistenceIsEnabled () {\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window.location.hostname.includes('loc')) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn window.location.hostname === window.OLSKPublicConstants('KVC_SHARED_REF_HOST');\n\t},\n\n\tFakeNoteObjectValid(inputData) {\n\t\treturn {\n\t\t\tKVCNoteBody: inputData || '',\n\t\t};\n\t},\n\n\t// INTERFACE\t\n\n\tInterfaceWindowDidKeydown (event) {\n\t\tif (window.Launchlet.LCHSingletonExists()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handlerFunctions = {\n\t\t\tEscape () {\n\t\t\t\tif (document.activeElement.nodeName === 'TEXTAREA') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmod.ControlEscape();\n\t\t\t},\n\t\t\tTab () {\n\t\t\t\tdocument.activeElement !== document.querySelector('.OLSKMasterListFilterField') ? document.querySelector('.OLSKMasterListFilterField').focus() : mod.KVCWriteDetailInstance.modPublic.KVCWriteDetailEditorFocus();\n\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t};\n\n\t\thandlerFunctions[event.key] && handlerFunctions[event.key]();\n\t},\n\n\tInterfaceStorageExportButtonDidClick () {\n\t\tmod.ControlNotesExportTXT();\n\t},\n\n\t// CONTROL\n\n\tControlNoteSave(inputData) {\n\t\tif (mod.DataDebugPersistenceIsEnabled()) {\n\t\t\tconsole.info('ControlNoteSave', inputData.KVCNoteID, inputData.KVCNoteBody);\n\t\t}\n\n\t\tOLSKThrottle.OLSKThrottleMappedTimeout(mod._ValueSaveNoteThrottleMap, inputData.KVCNoteID, {\n\t\t\tOLSKThrottleDuration: 500,\n\t\t\tasync OLSKThrottleCallback () {\n\t\t\t\tif (mod.DataDebugPersistenceIsEnabled()) {\n\t\t\t\t\tconsole.info('OLSKThrottleCallback', inputData.KVCNoteID, inputData.KVCNoteBody);\n\t\t\t\t}\n\n\t\t\t\tawait KVCNoteAction.KVCNoteActionUpdate(mod._ValueStorageClient, inputData);\n\t\t\t},\n\t\t});\n\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\tOLSKThrottle.OLSKThrottleSkip(mod._ValueSaveNoteThrottleMap[inputData.KVCNoteID])\t\n\t\t}\n\n\t\tif (!mod.DataVersionsIsDisabled()) {\n\t\t\tOLSKThrottle.OLSKThrottleMappedTimeout(mod._ValueSaveVersionThrottleMap, inputData.KVCNoteID, {\n\t\t\t\tOLSKThrottleDuration: 3000,\n\t\t\t\tasync OLSKThrottleCallback () {\n\t\t\t\t\tif (!inputData.KVCNoteCreationDate) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait KVCVersionAction.KVCVersionActionCreate(mod._ValueStorageClient, {\n\t\t\t\t\t\tKVCVersionNoteID: inputData.KVCNoteID,\n\t\t\t\t\t\tKVCVersionBody: inputData.KVCNoteBody,\n\t\t\t\t\t\tKVCVersionDate: inputData.KVCNoteModificationDate,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tOLSKThrottle.OLSKThrottleSkip(mod._ValueSaveVersionThrottleMap[inputData.KVCNoteID])\t\n\t\t\t}\n\t\t}\n\n\t\tif (KVCNoteModel.KVCNoteModelIsPublic(inputData)) {\n\t\t\tOLSKThrottle.OLSKThrottleMappedTimeout(mod._ValueSavePublishThrottleMap, inputData.KVCNoteID, {\n\t\t\t\tOLSKThrottleDuration: 1500,\n\t\t\t\tasync OLSKThrottleCallback () {\n\t\t\t\t\tmod.ControlNotePublish(inputData);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tOLSKThrottle.OLSKThrottleSkip(mod._ValueSavePublishThrottleMap[inputData.KVCNoteID])\t\n\t\t\t}\n\t\t}\n\t},\n\n\tasync ControlNoteCreate(inputData) {\n\t\tconst item = await KVCNoteAction.KVCNoteActionCreate(mod._ValueStorageClient, {\n\t\t\tKVCNoteBody: typeof inputData === 'string' ? inputData : '',\n\t\t});\n\n\t\tmod.ValueNotesAll(mod._ValueNotesAll.concat(item));\n\n\t\tmod.ControlNoteSelect(item);\n\n\t\tif (mod.DataIsMobile()) {\n\t\t\tmod.KVCWriteDetailInstance.modPublic.KVCWriteDetailEditorFocus();\n\t\t}\n\t\t\n\t\tif (typeof inputData !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!inputData.match('\\n')) {\n\t\t\treturn;\n\t\t}\n\n\t\tmod.KVCWriteDetailInstance.modPublic.KVCWriteDetailSetCursor(inputData.split('\\n').length - 1, inputData.split('\\n').pop().length);\n\t},\n\t\n\t_ControlHotfixUpdateInPlace(inputData) {\n\t\tmod.ControlNoteSelect(inputData);\n\t\tmod.KVCWriteDetailInstance.modPublic._KVCWriteDetailTriggerUpdate();\n\t},\n\t\n\tControlNoteSelect(inputData) {\n\t\tmod.ValueNoteSelected(inputData);\n\n\t\tif (!inputData) {\n\t\t\treturn !mod.DataIsMobile() && document.querySelector('.OLSKMasterListFilterField').focus();\n\t\t}\n\n\t\tmod.OLSKMobileViewInactive = true;\n\n\t\tif (mod.DataIsMobile()) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmod.KVCWriteDetailInstance.modPublic.KVCWriteDetailEditorFocus();\n\t},\n\t\n\tControlNoteJump (inputData) {\n\t\twindow.Launchlet.LCHSingletonCreate({\n\t\t\tLCHOptionRecipes: inputData,\n\t\t\tLCHOptionMode: window.Launchlet.LCHModePreview,\n\t\t\tLCHOptionCompletionHandler () {\n\t\t\t\tif (mod.DataIsMobile()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tmod.KVCWriteDetailInstance.modPublic.KVCWriteDetailEditorFocus();\n\t\t\t},\n\t\t});\n\t},\n\n\tControlNoteArchive (inputData) {\n\t\tinputData.KVCNoteIsArchived = true;\n\n\t\tmod.ControlNoteSave(inputData);\n\n\t\tmod.ControlNoteSelect(inputData); // #purge-svelte-force-update\n\t},\n\t\n\tControlNoteUnarchive (inputData) {\n\t\tdelete inputData.KVCNoteIsArchived;\n\n\t\tmod.ControlNoteSave(inputData);\n\n\t\tmod.ControlNoteSelect(inputData); // #purge-svelte-force-update\n\t},\n\t\n\tasync ControlNotePublish (inputData) {\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\twindow.TestControlNotePublishCount.innerHTML = parseInt(window.TestControlNotePublishCount.innerHTML) + 1;\n\t\t}\n\n\t\tconst _references = [\n\t\t\tOLSKLocalized('KVCRootLinkText'),\n\t\t\tOLSKLocalized('KVCBacklinksHeadingText'),\n\t\t\t]; // #purge-translation-refs\n\n\t\tconst options = {\n\t\t\tKVCOptionIsRoot: mod.DataSettingValue('KVCSettingPublicRootPageID') === inputData.KVCNoteID,\n\t\t\tKVCOptionRootURL: mod.DataSettingValue('KVCSettingCustomDomainBaseURL'),\n\t\t\tKVCOptionBacklinks: KVCWriteLogic.KVCWriteBacklinksMap(mod._ValueNotesAll.filter(KVCNoteModel.KVCNoteModelIsPublic).concat(inputData))[KVCTemplate.KVCTemplatePlaintextTitle(inputData.KVCNoteBody)],\n\t\t};\n\t\t\n\t\tmod.ValueNoteSelected(await KVCNoteAction.KVCNoteActionPublish(mod._ValueStorageClient, inputData, mod.TestPublishContent = KVCTemplate.KVCView(showdown, {\n\t\t\tKVCViewSource: inputData.KVCNoteBody,\n\t\t\tKVCViewPermalinkMap: await KVCNoteAction.KVCNoteActionPermalinkMap(mod._ValueStorageClient, mod.DataSettingValue('KVCSettingPublicRootPageID')),\n\t\t\tKVCViewTemplate: KVCTemplate.KVCTemplateViewDefault(OLSKLocalized),\n\t\t\tKVCViewTemplateOptions: options,\n\t\t}), options));\n\t},\n\t\n\tasync ControlNoteRetract (inputData) {\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\twindow.TestControlNoteRetractCount.innerHTML = parseInt(window.TestControlNoteRetractCount.innerHTML) + 1;\n\t\t}\n\t\t\n\t\tmod.ValueNoteSelected(await KVCNoteAction.KVCNoteActionRetract(mod._ValueStorageClient, inputData, mod.DataSettingValue('KVCSettingPublicRootPageID') === inputData.KVCNoteID));\n\t},\n\t\n\tasync ControlNoteVersions (inputData) {\n\t\t(await KVCVersionAction.KVCVersionActionQuery(mod._ValueStorageClient, {\n\t\t\tKVCVersionNoteID: inputData.KVCNoteID,\n\t\t})).slice(0, 5).forEach(function (e) {\n\t\t\tconsole.log(e);\n\t\t\tconsole.log(e.KVCVersionBody);\n\t\t});\n\t},\n\t\n\tasync ControlNoteDiscard (inputData) {\n\t\tmod.ValueNotesAll(mod._ValueNotesAll.filter(function (e) {\n\t\t\treturn e !== inputData;\n\t\t}), false);\n\n\t\tmod.ControlNoteSelect(null);\n\n\t\tawait KVCNoteAction.KVCNoteActionDelete(mod._ValueStorageClient, inputData);\n\t},\n\n\tControlEscape() {\n\t\tmod.ControlFilterWithNoThrottle('');\n\n\t\tmod.ValueArchivedCount(mod._ValueNotesAll);\n\t\tmod._RevealArchiveIsVisible = true;\n\n\t\tmod.ValueNotesVisible(mod._ValueNotesAll);\n\t},\n\t\n\tControlFilterWithThrottle(inputData) {\n\t\tmod._ValueFilterText = inputData;\n\n\t\tOLSKThrottle.OLSKThrottleMappedTimeout(mod, '_ValueFilterThrottle', {\n\t\t\tOLSKThrottleDuration: 200,\n\t\t\tasync OLSKThrottleCallback () {\n\t\t\t\tmod._RevealArchiveIsVisible = false;\n\n\t\t\t\tmod.ControlFilterWithNoThrottle(mod._ValueFilterText);\n\t\t\t},\n\t\t});\n\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\tOLSKThrottle.OLSKThrottleSkip(mod._ValueFilterThrottle);\n\t\t}\n\t},\n\t\n\tControlFilterWithNoThrottle(inputData) {\n\t\tmod.ReactFilter(mod._ValueFilterText = inputData);\n\t},\n\n\tasync ControlNotesExportData () {\n\t\tconst zip = new JSZip();\n\n\t\tconst fileName = [\n\t\t\t'com.wikiavec.export',\n\t\t\t(new Date()).toJSON(),\n\t\t].join(' ');\n\n\t\tzip.file(`${ fileName }.json`, JSON.stringify({\n\t\t\tKVCNoteObjects: mod._ValueNotesAll,\n\t\t\tKVCSettingObjects: await KVCSettingAction.KVCSettingsActionQuery(mod._ValueStorageClient, {}),\n\t\t}));\n\t\t\n\t\tzip.generateAsync({type: 'blob'}).then(function (content) {\n\t\t\tsaveAs(content, `${ fileName }.zip`);\n\t\t});\t\n\t},\n\n\tasync ControlNotesImportData (inputData) {\n\t\tlet outputData;\n\t\ttry {\n\t\t\toutputData = JSON.parse(inputData);\n\t\t} catch (e)  {\n\t\t\tconsole.log(e);\n\t\t}\n\n\t\tif (typeof outputData !== 'object' || outputData === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(outputData.KVCNoteObjects)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(outputData.KVCSettingObjects)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait Promise.all(outputData.KVCSettingObjects.map(function (e) {\n\t\t\treturn KVCSettingStorage.KVCSettingStorageWrite(mod._ValueStorageClient, e);\n\t\t}));\n\n\t\tawait Promise.all(outputData.KVCNoteObjects.map(function (e) {\n\t\t\treturn KVCNoteStorage.KVCNoteStorageWrite(mod._ValueStorageClient, OLSKRemoteStorage.OLSKRemoteStoragePostJSONParse(e));\n\t\t}));\n\n\t\tmod.ValueNotesAll(await KVCNoteAction.KVCNoteActionQuery(mod._ValueStorageClient, {}));\n\t},\n\n\tControlNotesExportTXT () {\n\t\tconst zip = new JSZip();\n\n\t\tmod._ValueNotesAll.forEach(function (e) {\n\t\t\tzip.file(`${ e.KVCNoteID }.txt`, e.KVCNoteBody, {\n\t\t\t\tdate: e.KVCNoteModificationDate,\n\t\t\t});\n\t\t});\n\t\t\n\t\tzip.generateAsync({type: 'blob'}).then(function (content) {\n\t\t\tsaveAs(content, 'notes.zip');\n\t\t});\n\t},\n\t\n\tasync ControlSettingStore (param1, param2) {\n\t\tawait KVCSettingStorage.KVCSettingStorageWrite(mod._ValueStorageClient, Object.assign(mod.DataSetting(param1) || mod._ValueSettingsAll.push(await KVCSettingAction.KVCSettingsActionProperty(mod._ValueStorageClient, param1, param2)), {\n\t\t\tKVCSettingValue: param2,\n\t\t}));\n\t},\n\n\tControlMigrate() {\n\t\tKVCNoteStorage.KVCNoteStorageMigrateV1(mod._ValueStorageClient, mod.OLSKChangeDelegateCreateNote);\n\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\twindow.TestControlMigrateCount.innerHTML = parseInt(window.TestControlMigrateCount.innerHTML) + 1;\n\t\t}\n\n\t\tmod._ValueDidMigrate = true;\n\t},\n\n\t// MESSAGE\n\n\tOLSKAppToolbarDispatchStorage () {\n\t\tmod._ValueStorageToolbarHidden = !mod._ValueStorageToolbarHidden;\n\t},\n\n\tOLSKAppToolbarDispatchLauncher () {\n\t\tif (window.Launchlet.LCHSingletonExists()) {\n\t\t\treturn window.Launchlet.LCHSingletonDestroy();\n\t\t}\n\n\t\twindow.Launchlet.LCHSingletonCreate({\n\t\t\tLCHOptionRecipes: mod.DataWriteRecipes(),\n\t\t});\n\t},\n\n\tKVCWriteMasterDispatchCreate (inputData) {\n\t\tmod.ControlNoteCreate(inputData);\n\t},\n\n\tKVCWriteMasterDispatchClick (inputData) {\n\t\tmod.ControlNoteSelect(inputData);\n\t},\n\n\tKVCWriteMasterDispatchArrow (inputData) {\n\t\tmod.ValueNoteSelected(inputData);\n\t},\n\n\tKVCWriteMasterDispatchFilter (inputData) {\n\t\tif (!inputData) {\n\t\t\treturn mod.ControlEscape();\n\t\t}\n\n\t\tmod.ControlFilterWithThrottle(inputData);\n\t},\n\n\tKVCWriteMasterDispatchEscape () {\n\t\tmod.ControlEscape();\n\t},\n\n\tKVCWriteMasterDispatchRevealArchive () {\n\t\tmod._RevealArchiveIsVisible = false;\n\n\t\tmod.ValueNotesVisible(mod._ValueNotesAll);\n\t},\n\n\tKVCWriteMasterDelegateItemTitle (inputData) {\n\t\treturn KVCTemplate.KVCTemplatePlaintextTitle(inputData);\n\t},\n\n\tKVCWriteMasterDelegateItemSnippet (inputData) {\n\t\treturn OLSKString.OLSKStringSnippet(KVCTemplate.KVCTemplatePlaintextBody(inputData));\n\t},\n\n\tKVCWriteDetailPublicURLFor (inputData) {\n\t\tif (mod.DataSetting('KVCSettingCustomDomainBaseURL')) {\n\t\t\treturn KVCWriteLogic.KVCWriteCustomDomainBaseURLFunction(KVCNoteStorage.KVCNoteStoragePublicURL(mod._ValueStorageClient, KVCNoteStorage.KVCNoteStoragePublicRootPagePath()), KVCNoteStorage.KVCNoteStoragePublicRootPagePath())(KVCNoteStorage.KVCNoteStoragePublicURL(mod._ValueStorageClient, KVCNoteAction.KVCNoteActionPublicPath(inputData, mod.DataSettingValue('KVCSettingPublicRootPageID') === inputData.KVCNoteID)), mod.DataSetting('KVCSettingCustomDomainBaseURL').KVCSettingValue);\n\t\t}\n\t\t\n\t\tif (OLSK_TESTING_BEHAVIOUR() && mod._ValueStorageIsConnected) {\n\t\t\treturn '/FakePublicPath';\n\t\t}\n\n\t\treturn KVCNoteStorage.KVCNoteStoragePublicURL(mod._ValueStorageClient, KVCNoteStorage.KVCNoteStoragePublicObjectPath(inputData));\n\t},\n\n\tKVCWriteDetailDispatchBack () {\n\t\t// mod.ControlNoteSelect(null);\n\n\t\tmod.OLSKMobileViewInactive = false;\n\n\t\tif (!mod.DataIsMobile()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = document.querySelector('.OLSKResultsListItemSelected');\n\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\telement.scrollIntoView({\n\t\t\t\tblock: 'center',\n\t\t\t\tinline: 'center',\n\t\t\t});\n\t\t});\n\t},\n\n\tKVCWriteDetailDispatchJump (inputData) {\n\t\tmod.ControlNoteJump(inputData);\n\t},\n\n\tKVCWriteDetailDispatchArchive () {\n\t\tmod.ControlNoteArchive(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchUnarchive () {\n\t\tmod.ControlNoteUnarchive(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchConnect () {\n\t\tmod._ValueStorageToolbarHidden = false;\n\t},\n\n\tKVCWriteDetailDispatchPublish () {\n\t\tmod.ControlNotePublish(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchRetract () {\n\t\tmod.ControlNoteRetract(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchVersions () {\n\t\tmod.ControlNoteVersions(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchDiscard () {\n\t\tif (mod.DataIsMobile()) {\n\t\t\tmod.KVCWriteDetailDispatchBack();\n\t\t}\n\t\t\n\t\tmod.ControlNoteDiscard(mod._ValueNoteSelected);\n\t},\n\n\tKVCWriteDetailDispatchUpdate () {\n\t\tmod._ValueNoteSelected = mod._ValueNoteSelected; // #purge-svelte-force-update\n\t\t\n\t\tmod.ControlNoteSave(mod._ValueNoteSelected);\n\t},\n\n\tasync KVCWriteDetailDispatchSetAsRootPage (inputData) {\n\t\tawait mod.ControlSettingStore('KVCSettingPublicRootPageID', inputData);\n\n\t\tawait mod._ControlHotfixUpdateInPlace(mod._ValueNoteSelected);\n\n\t\tif (KVCNoteModel.KVCNoteModelIsPublic(mod._ValueNoteSelected)) {\n\t\t\tmod.ControlNotePublish(mod._ValueNoteSelected);\n\t\t}\n\t},\n\n\tKVCWriteDetailDispatchOpen (inputData) {\n\t\tmod._RevealArchiveIsVisible = false; // #missing-spec\n\n\t\tmod.ControlFilterWithNoThrottle(inputData);\n\t},\n\n\tKVCWriteDetailDispatchEscape () {\n\t\tmod.ControlEscape();\n\t},\n\n\tOLSKChangeDelegateCreateNote (inputData) {\n\t\t// console.log('OLSKChangeDelegateCreate', inputData);\n\n\t\tmod.ValueNotesAll([inputData].concat(mod._ValueNotesAll.filter(function (e) {\n\t\t\treturn e.KVCNoteID !== inputData.KVCNoteID; // @Hotfix Dropbox sending DelegateAdd\n\t\t})), !mod._ValueNoteSelected);\n\t},\n\n\tOLSKChangeDelegateUpdateNote (inputData) {\n\t\t// console.log('OLSKChangeDelegateUpdate', inputData);\n\n\t\tif (mod.DataDebugPersistenceIsEnabled()) {\n\t\t\tconsole.log('OLSKChangeDelegateUpdate', inputData.KVCNoteID, inputData.KVCNoteBody);\n\t\t}\n\n\t\tif (mod._ValueNoteSelected && mod._ValueNoteSelected.KVCNoteID === inputData.KVCNoteID) {\n\t\t\tmod._ControlHotfixUpdateInPlace(inputData);\n\t\t}\n\n\t\tmod.ValueNotesAll(mod._ValueNotesAll.map(function (e) {\n\t\t\treturn e.KVCNoteID === inputData.KVCNoteID ? inputData : e;\n\t\t}), !mod._ValueNoteSelected);\n\t},\n\n\tOLSKChangeDelegateDeleteNote (inputData) {\n\t\t// console.log('OLSKChangeDelegateDelete', inputData);\n\n\t\tif (mod._ValueNoteSelected && (mod._ValueNoteSelected.KVCNoteID === inputData.KVCNoteID)) {\n\t\t\tmod.ControlNoteSelect(null);\n\t\t}\n\n\t\tmod.ValueNotesAll(mod._ValueNotesAll.filter(function (e) {\n\t\t\treturn e.KVCNoteID !== inputData.KVCNoteID;\n\t\t}), false);\n\t},\n\n\tasync OLSKChangeDelegateConflictNote (inputData) {\n\t\treturn;\n\t\treturn setTimeout(async function () {\n\t\t\tmod.OLSKChangeDelegateUpdateNote(await KVCNoteAction.KVCNoteActionUpdate(mod._ValueStorageClient, OLSKRemoteStorage.OLSKRemoteStoragePostJSONParse(OLSKRemoteStorage.OLSKRemoteStorageChangeDelegateConflictSelectRecent(inputData))))\n\t\t});\n\t},\n\n\tStorageConnected () {\n\t\tmod._ValueStorageIsConnected = true;\n\t},\n\n\tStorageNotConnected () {\n\t\tif (OLSK_TESTING_BEHAVIOUR() && window.location.search.match('FakeStorageIsConnected')) {\n\t\t\treturn;\n\t\t}\n\n\t\tmod.ControlMigrate();\n\t},\n\n\tStorageSyncDone () {\n\t\tif (mod._ValueDidMigrate) {\n\t\t\treturn;\n\t\t}\n\n\t\tmod.ControlMigrate();\n\t},\n\n\t// REACT\n\n\tReactIsLoading (inputData) {\n\t\tif (inputData) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (mod.DataIsMobile()) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\tdocument.querySelector('.OLSKMasterListFilterField').focus();\n\t\t})\n\t},\n\t\n\tReactFilter(inputData) {\n\t\tmod.ValueNotesVisible(mod._ValueNotesAll);\n\n\t\tif (!inputData) {\n\t\t\treturn mod.ControlNoteSelect(null);\n\t\t}\n\n\t\tif (!mod._ValueNotesVisible.length) {\n\t\t\treturn mod.ControlNoteSelect(null);\n\t\t}\n\n\t\tmod.ValueNoteSelected(mod._ValueNotesVisible.filter(function (e) {\n\t\t\treturn KVCTemplate.KVCTemplatePlaintextTitle(e.KVCNoteBody).toLowerCase() === inputData.toLowerCase();\n\t\t}).concat(mod._ValueNotesVisible.filter(function (e) {\n\t\t\tif (e.KVCNoteIsArchived) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn KVCTemplate.KVCTemplatePlaintextTitle(e.KVCNoteBody).toLowerCase().includes(inputData.toLowerCase());\n\t\t})).shift());\n\t},\n\n\t// SETUP\n\n\tasync SetupEverything () {\n\t\tmod.SetupStorageClient();\n\n\t\tmod.SetupRemoteStorage();\n\n\t\tmod.SetupStorageStatus();\n\n\t\tawait mod.SetupStorageNotifications();\n\n\t\tawait mod.SetupValueNotesAll();\n\t\t\n\t\tawait mod.SetupValueSettingsAll();\n\n\t\tmod.ReactIsLoading(mod._ValueIsLoading = false);\n\t},\n\n\tSetupStorageClient() {\n\t\tconst storageModule = KVC_Data.KVC_DataModule([\n\t\t\tObject.assign(KVCNoteStorage.KVCNoteStorageBuild, {\n\t\t\t\tOLSKChangeDelegate: {\n\t\t\t\t\tOLSKChangeDelegateCreate: mod.OLSKChangeDelegateCreateNote,\n\t\t\t\t\tOLSKChangeDelegateUpdate: mod.OLSKChangeDelegateUpdateNote,\n\t\t\t\t\tOLSKChangeDelegateDelete: mod.OLSKChangeDelegateDeleteNote,\n\t\t\t\t\tOLSKChangeDelegateConflict: mod.OLSKChangeDelegateConflictNote,\n\t\t\t\t},\n\t\t\t}),\n\t\t\tKVCSettingStorage.KVCSettingStorageBuild,\n\t\t\tKVCVersionStorage.KVCVersionStorageBuild,\n\t\t\t], {\n\t\t\tOLSKOptionIncludeDebug: OLSK_TESTING_BEHAVIOUR(),\n\t\t});\n\t\t\n\t\tmod._ValueStorageClient = new RemoteStorage({\n\t\t\tmodules: [ storageModule ],\n\t\t\tOLSKPatchRemoteStorageAuthRedirectURI: OLSK_TESTING_BEHAVIOUR() ? undefined : window.location.origin + window.OLSKCanonicalFor('KVCWriteRoute'),\n\t\t});\n\n\t\tmod._ValueStorageClient.access.claim(storageModule.name, 'rw');\n\n\t\tmod._ValueStorageClient.caching.enable(`/${ storageModule.name }/`);\n\t},\n\n\tSetupRemoteStorage () {\n\t\treturn\n\t\tmod._ValueStorageClient.setApiKeys(window.OLSKPublicConstants('KVCDropboxAppKey') ? {\n\t\t\tdropbox: window.atob(window.OLSKPublicConstants('KVCDropboxAppKey')),\n\t\t\tgoogledrive: window.atob(window.OLSKPublicConstants('KVCGoogleClientKey')),\n\t\t} : {});\n\t},\n\n\tSetupStorageStatus () {\n\t\tOLSKRemoteStorage.OLSKRemoteStorageStatus(mod._ValueStorageClient, function (inputData) {\n\t\t\tmod._ValueFooterStorageStatus = inputData;\n\t\t}, OLSKLocalized)\n\t},\n\n\tasync SetupStorageNotifications () {\n\t\tmod._ValueStorageClient.on('connected', mod.StorageConnected);\n\n\t\tmod._ValueStorageClient.on('not-connected', mod.StorageNotConnected);\n\n\t\tmod._ValueStorageClient.on('sync-done', mod.StorageSyncDone);\n\n\t\tlet isOffline;\n\n\t\tmod._ValueStorageClient.on('network-offline', () => {\n\t\t\tif (!OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tconsole.debug('network-offline', arguments);\n\t\t\t}\n\n\t\t\tisOffline = true;\n\t\t});\n\n\t\tmod._ValueStorageClient.on('network-online', () => {\n\t\t\tif (!OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tconsole.debug('network-online', arguments);\n\t\t\t}\n\t\t\t\n\t\t\tisOffline = false;\n\t\t});\n\n\t\tmod._ValueStorageClient.on('error', (error) => {\n\t\t\tif (isOffline && inputData.message === 'Sync failed: Network request failed.') {\n\t\t\t\treturn;\n\t\t\t};\n\n\t\t\tif (!OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tconsole.debug('error', error);\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise(function (res, rej) {\n\t\t\treturn mod._ValueStorageClient.on('ready', res);\n\t\t})\n\t},\n\n\tasync SetupValueNotesAll() {\n\t\tconst items = (await KVCNoteAction.KVCNoteActionQuery(mod._ValueStorageClient, {})).filter(function (e) {\n\t\t\treturn typeof e === 'object'; // #patch-remotestorage-true\n\t\t});\n\n\t\tmod.ValueArchivedCount(items);\n\t\t\n\t\tmod._RevealArchiveIsVisible = mod._ValueArchivedCount > 0;\n\t\t\n\t\tmod.ValueNotesAll(items);\n\t},\n\n\tasync SetupValueSettingsAll() {\n\t\tmod._ValueSettingsAll = await KVCSettingAction.KVCSettingsActionQuery(mod._ValueStorageClient, {});\n\t},\n\n\t// LIFECYCLE\n\n\tLifecycleModuleWillMount() {\n\t\tmod.SetupEverything();\n\t},\n\n};\n\nimport { onMount } from 'svelte';\nonMount(mod.LifecycleModuleWillMount);\n\nimport KVCWriteMaster from '../sub-master/main.svelte';\nimport KVCWriteDetail from '../sub-detail/main.svelte';\nimport OLSKAppToolbar from 'OLSKAppToolbar';\nimport OLSKServiceWorkerView from '../_shared/__external/OLSKServiceWorker/main.svelte';\nimport OLSKStorageWidget from 'OLSKStorageWidget';\n</script>\n<svelte:window on:keydown={ mod.InterfaceWindowDidKeydown } />\n\n<div class=\"KVCWrite OLSKViewport\" class:OLSKIsLoading={ mod._ValueIsLoading }>\n\n<div class=\"OLSKViewportContent\">\n\t<KVCWriteMaster\n\t\tKVCWriteMasterListItems={ mod._ValueNotesVisible }\n\t\tKVCWriteMasterListItemSelected={ mod._ValueNoteSelected }\n\t\tKVCWriteMasterFilterText={ mod._ValueFilterText }\n\t\tKVCWriteMasterRevealArchiveIsVisible={ mod.DataRevealArchiveIsVisible() }\n\t\tKVCWriteMasterDispatchCreate={ mod.KVCWriteMasterDispatchCreate }\n\t\tKVCWriteMasterDispatchClick={ mod.KVCWriteMasterDispatchClick }\n\t\tKVCWriteMasterDispatchArrow={ mod.KVCWriteMasterDispatchArrow }\n\t\tKVCWriteMasterDispatchFilter={ mod.KVCWriteMasterDispatchFilter }\n\t\tKVCWriteMasterDispatchEscape={ mod.KVCWriteMasterDispatchEscape }\n\t\tKVCWriteMasterDispatchRevealArchive={ mod.KVCWriteMasterDispatchRevealArchive }\n\t\tKVCWriteMasterDelegateItemTitle={ mod.KVCWriteMasterDelegateItemTitle }\n\t\tKVCWriteMasterDelegateItemSnippet={ mod.KVCWriteMasterDelegateItemSnippet }\n\t\tOLSKMobileViewInactive={ mod.OLSKMobileViewInactive }\n\t\t/>\n\t\n\t<KVCWriteDetail\n\t\tKVCWriteDetailConnected={ mod._ValueStorageIsConnected }\n\t\tKVCWriteDetailItemIsRootPage={ mod._ValueNoteSelected && mod.DataSetting('KVCSettingPublicRootPageID') ? mod._ValueNoteSelected.KVCNoteID === mod.DataSettingValue('KVCSettingPublicRootPageID') : false }\n\t\tKVCWriteDetailPublicURLFor={ mod.KVCWriteDetailPublicURLFor }\n\t\tKVCWriteDetailDispatchBack={ mod.KVCWriteDetailDispatchBack }\n\t\tKVCWriteDetailDispatchJump={ mod.KVCWriteDetailDispatchJump }\n\t\tKVCWriteDetailDispatchArchive={ mod.KVCWriteDetailDispatchArchive }\n\t\tKVCWriteDetailDispatchUnarchive={ mod.KVCWriteDetailDispatchUnarchive }\n\t\tKVCWriteDetailDispatchConnect={ mod.KVCWriteDetailDispatchConnect }\n\t\tKVCWriteDetailDispatchPublish={ mod.KVCWriteDetailDispatchPublish }\n\t\tKVCWriteDetailDispatchRetract={ mod.KVCWriteDetailDispatchRetract }\n\t\tKVCWriteDetailDispatchVersions={ mod.KVCWriteDetailDispatchVersions }\n\t\tKVCWriteDetailDispatchDiscard={ mod.KVCWriteDetailDispatchDiscard }\n\t\tKVCWriteDetailDispatchUpdate={ mod.KVCWriteDetailDispatchUpdate }\n\t\tKVCWriteDetailDispatchSetAsRootPage={ mod.KVCWriteDetailDispatchSetAsRootPage }\n\t\tKVCWriteDetailDispatchOpen={ mod.KVCWriteDetailDispatchOpen }\n\t\tKVCWriteDetailDispatchEscape={ mod.KVCWriteDetailDispatchEscape }\n\t\tOLSKMobileViewInactive={ !mod.OLSKMobileViewInactive }\n\t\t_KVCWriteDetailVersionsIsDisabled={ mod.DataVersionsIsDisabled() }\n\t\tbind:this={ mod.KVCWriteDetailInstance }\n\t\t/>\n</div>\n\n{#if OLSK_TESTING_BEHAVIOUR()}\n\t<p>\n\t\t<strong>ControlNotePublishCount</strong>\n\t\t<span id=\"TestControlNotePublishCount\">0</span>\n\t</p>\n\t\n\t<p>\n\t\t<strong>ControlNoteRetractCount</strong>\n\t\t<span id=\"TestControlNoteRetractCount\">0</span>\n\t</p>\n\t\n\t<p>\n\t\t<strong>ControlMigrateCount</strong>\n\t\t<span id=\"TestControlMigrateCount\">0</span>\n\t</p>\n\t\n\t<div>\n\t\t<strong>PublishContent</strong>\n\t\t<div id=\"TestPublishContent\">{@html mod.TestPublishContent }</div>\n\t</div>\n{/if}\n\n<footer class=\"KVCWriteViewportFooter OLSKMobileViewFooter\">\n\n\t{#if !mod._ValueStorageToolbarHidden }\n\t\t<div class=\"KVCWriteStorageToolbar OLSKStorageToolbar OLSKToolbar OLSKToolbarJustify\">\n\t\t\t<div class=\"OLSKToolbarElementGroup\">\n\t\t\t\t<button class=\"KVCWriteStorageExportButton OLSKLayoutElementTappable OLSKLayoutButtonNoStyle\" on:click={ mod.InterfaceStorageExportButtonDidClick }>{ OLSKLocalized('KVCWriteStorageExportButtonText') }</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"OLSKToolbarElementGroup\">\n\t\t\t\t<OLSKStorageWidget StorageClient={ mod._ValueStorageClient } />\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<OLSKAppToolbar\n\t\tOLSKAppToolbarStorageStatus={ mod._ValueFooterStorageStatus }\n\t\tOLSKAppToolbarDispatchStorage={ mod.OLSKAppToolbarDispatchStorage }\n\t\tOLSKAppToolbarDispatchLauncher={ mod.OLSKAppToolbarDispatchLauncher }\n\t\t/>\n</footer>\n\n</div>\n\n{#if !OLSK_TESTING_BEHAVIOUR()}\n\t<OLSKServiceWorkerView OLSKServiceWorkerRegistrationRoute={ window.OLSKCanonicalFor('WKCServiceWorkerRoute') } />\n{/if}\n\n<style src=\"./ui-style.css\">.KVCWrite {\n\t--WKCBorderStyle: 1px solid #ddd;\n\t\n\tfont-family: 'Helvetica Neue', 'Helvetica', sans-serif;\n\tfont-size: 9pt;\n\n\tbackground: var(--KVCCommonBackground);\n\tcolor: var(--KVCCommonForeground);\n}\n\n.KVCWriteStorageToolbar {\n\tborder-top: var(--WKCBorderStyle);\n\t\n\tbackground: var(--KVCCommonBackground);\n\n\t/* AppContainerFlexbox:Child */\n\tflex-shrink: 0;\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteViewportFooter {\n\t/* browser quirks */\n\tz-index: 999;\n}\n\n}\n</style>\n",
    "<script>\nexport let KVCWriteDetailConnected = false;\nexport let KVCWriteDetailItemIsRootPage = false;\nexport let KVCWriteDetailPublicURLFor;\nexport let KVCWriteDetailDispatchBack;\nexport let KVCWriteDetailDispatchJump;\nexport let KVCWriteDetailDispatchArchive;\nexport let KVCWriteDetailDispatchUnarchive;\nexport let KVCWriteDetailDispatchConnect;\nexport let KVCWriteDetailDispatchPublish;\nexport let KVCWriteDetailDispatchRetract;\nexport let KVCWriteDetailDispatchVersions;\nexport let KVCWriteDetailDispatchDiscard;\nexport let KVCWriteDetailDispatchUpdate;\nexport let KVCWriteDetailDispatchSetAsRootPage;\nexport let KVCWriteDetailDispatchOpen;\nexport let KVCWriteDetailDispatchEscape;\nexport let OLSKMobileViewInactive = false;\nexport let _KVCWriteDetailVersionsIsDisabled = false;\nexport let _DebugLauncher = false;\n\nexport const modPublic = {\n\n\tKVCWriteDetailSetItem (inputData) {\n\t\tmod._ValueItem = inputData;\n\n\t\tif (!inputData) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tmod.ControlConfigureEditor(function (inputData) {\n\t\t\tif (!OLSK_TESTING_BEHAVIOUR()) {\n\t\t\t\tdocument.body.scrollIntoView(true);\n\t\t\t}\n\t\t});\n\t},\n\n\t_KVCWriteDetailTriggerUpdate () {\n\t\tmod.ControlConfigureEditor(function (inputData) {\n\t\t\tinputData.modPublic._KVCWriteInputTriggerUpdate();\n\t\t});\n\t},\n\n\tKVCWriteDetailEditorFocus () {\n\t\tmod.ControlConfigureEditor(function (inputData) {\n\t\t\tinputData.modPublic.KVCWriteInputFocus();\n\t\t});\n\t},\n\n\tKVCWriteDetailSetCursor (param1, param2) {\n\t\tmod.ControlConfigureEditor(function (inputData) {\n\t\t\tinputData.modPublic.KVCWriteInputSetCursor(param1, param2);\n\t\t});\n\t},\n\n\tKVCWriteDetailRecipes () {\n\t\treturn mod._ValueItem ? mod.DataWriteDetailRecipes() : [];\n\t},\n\n};\n\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nimport KVCNoteModel from '../_shared/KVCNote/model.js';\nimport { OLSK_TESTING_BEHAVIOUR } from 'OLSKTesting';\n\nconst mod = {\n\n\t// VALUE\n\n\t_ValueItem: undefined,\n\n\t_ValueHeaderTokens: [],\n\n\t_ValueEditorPostInitializeQueue: [],\n\n\tKVCWriteInputInstance: undefined,\n\n\t// DATA\n\n\tDataWriteDetailRecipes () {\n\t\tconst outputData = [];\n\n\t\tif (mod._ValueItem && !mod._ValueItem.KVCNoteIsArchived) {\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteDetailLauncherItemArchive',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteDetailToolbarArchiveButtonText'),\n\t\t\t\tLCHRecipeCallback: function KVCWriteDetailLauncherItemArchive () {\n\t\t\t\t\tKVCWriteDetailDispatchArchive()\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\n\t\tif (mod._ValueItem && mod._ValueItem.KVCNoteIsArchived) {\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteDetailLauncherItemUnarchive',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteDetailToolbarUnarchiveButtonText'),\n\t\t\t\tLCHRecipeCallback: function KVCWriteDetailLauncherItemUnarchive () {\n\t\t\t\t\tKVCWriteDetailDispatchUnarchive()\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\n\t\tif (KVCWriteDetailConnected) {\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeSignature: 'KVCWriteDetailLauncherItemSetAsRootPage',\n\t\t\t\tLCHRecipeName: OLSKLocalized('KVCWriteDetailLauncherItemSetAsRootPageText'),\n\t\t\t\tLCHRecipeCallback: function KVCWriteDetailLauncherItemSetAsRootPage () {\n\t\t\t\t\tKVCWriteDetailDispatchSetAsRootPage(mod._ValueItem.KVCNoteID);\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\n\t\tif (OLSK_TESTING_BEHAVIOUR()) {\n\t\t\toutputData.push({\n\t\t\t\tLCHRecipeName: 'KVCWriteDetailLauncherFakeItemProxy',\n\t\t\t\tLCHRecipeCallback: function KVCWriteDetailLauncherFakeItemProxy () {},\n\t\t\t});\n\t\t}\n\n\t\treturn outputData;\n\t},\n\n\t// INTERFACE\n\n\tInterfaceJumpButtonDidClick () {\n\t\tmod.ControlJump();\n\t},\n\n\tInterfaceWindowDidKeydown (event) {\n\t\tif (!mod._ValueHeaderTokens.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.ctrlKey && event.key === 'r') {\n\t\t\treturn mod.ControlJump();\n\t\t}\n\t},\n\n\t// CONTROL\n\n\tControlConfigureEditor (inputData) {\n\t\t// console.log(mod.KVCWriteInputInstance ? 'run' : 'queue', inputData);\n\t\tif (mod.KVCWriteInputInstance) {\n\t\t\treturn inputData(mod.KVCWriteInputInstance);\n\t\t};\n\n\t\tmod._ValueEditorPostInitializeQueue.push(inputData);\n\t},\n\n\tControlJump () {\n\t\tKVCWriteDetailDispatchJump(mod._ValueHeaderTokens.map(function (e) {\n\t\t\treturn {\n\t\t\t\tLCHRecipeName: e.string,\n\t\t\t\tLCHRecipeCallback () {\n\t\t\t\t\tmod.KVCWriteInputInstance.modPublic.KVCWriteInputScrollIntoView(e.line, e.start);\n\t\t\t\t\tmod.KVCWriteInputInstance.modPublic.KVCWriteInputSetSelection(e.line, e.start, e.line, e.end);\n\t\t\t\t},\n\t\t\t};\n\t\t}));\n\t},\n\n\t// MESSAGE\n\n\tKVCWriteInputDispatchHeaderTokens (inputData) {\n\t\tmod._ValueHeaderTokens = inputData;\n\t},\n\n\tKVCWriteInputDispatchUpdate () {\n\t\tKVCWriteDetailDispatchUpdate();\n\t},\n\n\tKVCWriteInputDispatchOpen (inputData) {\n\t\tKVCWriteDetailDispatchOpen(inputData);\n\t},\n\n\tKVCWriteInputDispatchReady () {\n\t\tmod._ValueEditorPostInitializeQueue.splice(0, mod._ValueEditorPostInitializeQueue.length).forEach(function(e) {\n\t\t\treturn e(mod.KVCWriteInputInstance);\n\t\t});\n\t},\n\n\tKVCWriteInputDispatchEscape () {\n\t\tKVCWriteDetailDispatchEscape();\n\t},\n\n};\n\nimport OLSKDetailPlaceholder from 'OLSKDetailPlaceholder';\nimport _OLSKSharedBack from '../_shared/__external/OLSKUIAssets/_OLSKSharedBack.svg';\nimport _KVCWriteJump from './ui-assets/_KVCWriteJump.svg';\nimport _KVCWriteArchive from './ui-assets/_KVCWriteArchive.svg';\nimport _KVCWriteUnarchive from './ui-assets/_KVCWriteUnarchive.svg';\nimport _KVCWritePublish from './ui-assets/_KVCWritePublish.svg';\nimport _KVCWriteRetract from './ui-assets/_KVCWriteRetract.svg';\nimport _KVCWriteVersions from './ui-assets/_KVCWriteVersions.svg';\nimport _OLSKSharedDiscard from '../_shared/__external/OLSKUIAssets/_OLSKSharedDiscard.svg';\nimport KVCWriteInput from '../sub-input/main.svelte';\n</script>\n<svelte:window on:keydown={ mod.InterfaceWindowDidKeydown }/>\n\n<div class=\"KVCWriteDetail OLSKViewportDetail\" class:OLSKMobileViewInactive={ OLSKMobileViewInactive } aria-hidden={ OLSKMobileViewInactive ? true : null }>\n\n{#if !mod._ValueItem}\n<OLSKDetailPlaceholder />\n{/if}\n\n{#if mod._ValueItem}\n<header class=\"KVCWriteDetailToolbar OLSKToolbar OLSKToolbarJustify OLSKMobileViewHeader\">\n\t<div class=\"OLSKToolbarElementGroup\">\n\t\t<button class=\"KVCWriteDetailToolbarBackButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton OLSKVisibilityMobile\" title={ OLSKLocalized('KVCWriteDetailToolbarBackButtonText') } on:click={ KVCWriteDetailDispatchBack }>\n\t\t\t<div class=\"KVCWriteDetailToolbarBackButtonImage\">{@html _OLSKSharedBack }</div>\n\t\t</button>\n\t</div>\n\n\t<div class=\"OLSKToolbarElementGroup\">\n\t\t<button class=\"KVCWriteDetailToolbarJumpButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarJumpButtonText') } accesskey=\"r\" tabindex=\"-1\" disabled={ !mod._ValueHeaderTokens.length } on:click={ mod.InterfaceJumpButtonDidClick }>\n\t\t\t<div class=\"KVCWriteDetailToolbarJumpButtonImage\">{@html _KVCWriteJump }</div>\n\t\t</button>\n\n\t\t{#if !mod._ValueItem.KVCNoteIsArchived }\n\t\t\t<button class=\"KVCWriteDetailToolbarArchiveButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarArchiveButtonText') } on:click={ KVCWriteDetailDispatchArchive }>\n\t\t\t\t<div class=\"KVCWriteDetailToolbarArchiveButtonImage\">{@html _KVCWriteArchive }</div>\n\t\t\t</button>\n\t\t{/if}\n\n\t\t{#if mod._ValueItem.KVCNoteIsArchived }\n\t\t\t<button class=\"KVCWriteDetailToolbarUnarchiveButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarUnarchiveButtonText') } on:click={ KVCWriteDetailDispatchUnarchive }>\n\t\t\t\t<div class=\"KVCWriteDetailToolbarUnarchiveButtonImage\">{@html _KVCWriteUnarchive }</div>\n\t\t\t</button>\n\t\t{/if}\n\n\t\t{#if !KVCWriteDetailConnected }\n\t\t\t<button class=\"KVCWriteDetailToolbarConnectButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarPublishButtonText') } on:click={ () => window.confirm(OLSKLocalized('OLSKRemoteStorageConnectConfirmText')) && KVCWriteDetailDispatchConnect() }>\n\t\t\t\t<div class=\"KVCWriteDetailToolbarConnectButtonImage\">{@html _KVCWritePublish }</div>\n\t\t\t</button>\n\t\t{/if}\n\n\t\t{#if KVCWriteDetailItemIsRootPage }\n\t\t\t<span class=\"KVCWriteDetailToolbarIsRootPage\">{ OLSKLocalized('KVCWriteDetailToolbarIsRootPageText') }</span>\n\t\t{/if}\n\n\t\t{#if KVCWriteDetailConnected }\n\t\t\t{#if !KVCNoteModel.KVCNoteModelIsPublic(mod._ValueItem) }\n\t\t\t\t<button class=\"KVCWriteDetailToolbarPublishButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarPublishButtonText') } on:click={ () => KVCWriteDetailDispatchPublish() }>\n\t\t\t\t\t<div class=\"KVCWriteDetailToolbarPublishButtonImage\">{@html _KVCWritePublish }</div>\n\t\t\t\t</button>\n\t\t\t{/if}\n\n\t\t\t{#if KVCNoteModel.KVCNoteModelIsPublic(mod._ValueItem) }\n\t\t\t\t<a class=\"KVCWriteDetailToolbarPublicLink\" href={ KVCWriteDetailPublicURLFor(mod._ValueItem) } target=\"_blank\">{ OLSKLocalized('KVCWriteDetailToolbarPublicLinkText') }</a>\n\t\t\t\t\t\n\t\t\t\t<button class=\"KVCWriteDetailToolbarRetractButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarRetractButtonText') } on:click={ () => KVCWriteDetailDispatchRetract() }>\n\t\t\t\t\t<div class=\"KVCWriteDetailToolbarRetractButtonImage\">{@html _KVCWriteRetract }</div>\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t{#if !_KVCWriteDetailVersionsIsDisabled}\n\t\t\t<button class=\"KVCWriteDetailToolbarVersionsButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarVersionsButtonText') } on:click={ () => KVCWriteDetailDispatchVersions() }>\n\t\t\t\t<div class=\"KVCWriteDetailToolbarVersionsButtonImage\">{@html _KVCWriteVersions }</div>\n\t\t\t</button>\n\t\t{/if}\n\n\t\t<button class=\"KVCWriteDetailToolbarDiscardButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteDetailToolbarDiscardButtonText') } on:click={ () => window.confirm(OLSKLocalized('KVCWriteDetailDiscardConfirmText')) && KVCWriteDetailDispatchDiscard() }>\n\t\t\t<div class=\"KVCWriteDetailToolbarDiscardButtonImage\">{@html _OLSKSharedDiscard }</div>\n\t\t</button>\n\t</div>\n</header>\n\n<KVCWriteInput\n\tKVCWriteInputItem={ mod._ValueItem }\n\tKVCWriteInputKey={ 'KVCNoteBody' }\n\tKVCWriteInputDispatchHeaderTokens={ mod.KVCWriteInputDispatchHeaderTokens }\n\tKVCWriteInputDispatchUpdate={ mod.KVCWriteInputDispatchUpdate }\n\tKVCWriteInputDispatchOpen={ mod.KVCWriteInputDispatchOpen }\n\tKVCWriteInputDispatchReady={ mod.KVCWriteInputDispatchReady }\n\tKVCWriteInputDispatchEscape={ mod.KVCWriteInputDispatchEscape }\n\tbind:this={ mod.KVCWriteInputInstance }\n\t/>\n\n{/if}\n\n</div>\n\n{#if _DebugLauncher && OLSK_TESTING_BEHAVIOUR() }\n\t<button class=\"OLSKAppToolbarLauncherButton\" on:click={ () => window.Launchlet.LCHSingletonCreate({ LCHOptionRecipes: mod.DataWriteDetailRecipes() }) }></button>\t\n{/if}\n\n<style src=\"./ui-style.css\">.KVCWriteDetail {\n\t/* KVCWriteDetailFlexbox:Parent */\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n@media screen and (min-width: 760px) {\n\n.KVCWriteDetail > :global(.OLSKDetailPlaceholder) {\n\t/* KVCWriteDetailFlexbox:Child */\n\tflex-grow: 1;\n}\n\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteDetail {\n\tmin-height: 100%;\n}\n\n}\n\n.KVCWriteDetailToolbar {\n\tborder-bottom: var(--WKCBorderStyle);\n\n\t/* KVCWriteDetailFlexbox:Child */\n\tflex-shrink: 0;\n}\n\n.KVCWriteDetailToolbar a {\n\tcolor: inherit;\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteDetailToolbar {\n\t/* browser quirks */\n\tz-index: 999;\n}\n\n}\n\n.KVCWriteDetail :global(.KVCWriteInput) {\n\t/* KVCWriteDetailFlexbox:Child */\n\tflex-grow: 1;\n}\n\n@media screen and (min-width: 760px) {\n\n.KVCWriteDetail :global(.KVCWriteInput) {\n\t/* KVCWriteInputStation:Parent */\n\tposition: relative;\n}\n\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteDetail :global(.KVCWriteInput) {\n\tmin-height: 100%;\n}\n\n}\n\n/* CodeMirror */\n\n.KVCWriteDetail :global(.CodeMirror) {\n\tfont-family: inherit;\n\tfont-size: 14px;\n}\n\n@media screen and (min-width: 760px) {\n\n.KVCWriteDetail :global(.CodeMirror) {\n\theight: 100%;\n\n\t/* KVCWriteInputStation:Child */\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n}\n\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteDetail :global(.CodeMirror) {\n\t/* CodeMirrorResizeToContent */\n\theight: auto;\n}\n\n}\n\n.KVCWriteDetail :global(.CodeMirror-scroll) {\n\tbackground: #f8f8f8;\n}\n\n@media screen and (max-width: 760px) {\n\n.KVCWriteDetail :global(.CodeMirror-scroll) {\n\tmin-height: calc(100vh - 52px - 52px);\n}\n\n}\n\n.KVCWriteDetail :global(.CodeMirror-lines) {\n\t/* override defaults */\n\tpadding: 10px;\n}\n\n.KVCWriteDetail :global(.CodeMirror pre) {\n\t/* override defaults */\n\tpadding: 0;\n}\n\n.KVCWriteDetail :global(.CodeMirror-line:nth-child(1)) {\n\tfont-weight: bold;\n}\n\n.KVCWriteDetail :global(.cm-link:hover) {\n  cursor: pointer;\n}\n</style>\n",
    "<script>\nexport let KVCWriteMasterFilterText;\nexport let KVCWriteMasterListItems;\nexport let KVCWriteMasterListItemSelected = null;\nexport let KVCWriteMasterRevealArchiveIsVisible;\nexport let KVCWriteMasterDispatchCreate;\nexport let KVCWriteMasterDispatchClick;\nexport let KVCWriteMasterDispatchArrow;\nexport let KVCWriteMasterDispatchFilter;\nexport let KVCWriteMasterDispatchEscape;\nexport let KVCWriteMasterDispatchRevealArchive;\nexport let KVCWriteMasterDelegateItemTitle;\nexport let KVCWriteMasterDelegateItemSnippet;\nexport let OLSKMobileViewInactive = false;\n\nimport OLSKInternational from 'OLSKInternational';\nconst OLSKLocalized = function(translationConstant) {\n\treturn OLSKInternational.OLSKInternationalLocalizedString(translationConstant, JSON.parse(`{\"OLSK_I18N_SEARCH_REPLACE\":\"OLSK_I18N_SEARCH_REPLACE\"}`)[window.OLSKPublicConstants('OLSKSharedPageCurrentLanguage')]);\n};\n\nimport { OLSK_TESTING_BEHAVIOUR } from 'OLSKTesting'\nimport KVCWriteMasterLogic from './ui-logic.js';\n\nconst mod = {\n\n\t// INTERFACE\n\n\tInterfaceCreateButtonDidClick () {\n\t\tKVCWriteMasterDispatchCreate();\n\t},\n\n\tInterfaceWindowDidKeydown (event) {\n\t\tif (document.activeElement !== document.querySelector('.OLSKMasterListFilterField')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.key === 'Enter') {\n\t\t\treturn mod.InterfaceWindowDidKeydownEnter();\n\t\t}\n\t},\n\n\tInterfaceWindowDidKeydownEnter () {\n\t\tif (!KVCWriteMasterFilterText.trim().length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (KVCWriteMasterListItemSelected && KVCWriteMasterDelegateItemTitle(KVCWriteMasterListItemSelected.KVCNoteBody) === KVCWriteMasterFilterText) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\treturn KVCWriteMasterDispatchCreate(`${ KVCWriteMasterFilterText }\\n\\n`);\n\t},\n\n};\n\nimport OLSKMasterList from 'OLSKMasterList';\nimport _OLSKSharedCreate from '../_shared/__external/OLSKUIAssets/_OLSKSharedCreate.svg';\nimport KVCWriteMasterListItem from './submodules/KVCWriteMasterListItem/main.svelte';\n</script>\n<svelte:window on:keydown={ mod.InterfaceWindowDidKeydown }/>\n\n<OLSKMasterList\n\tOLSKMasterListItems={ KVCWriteMasterListItems }\n\tOLSKMasterListItemSelected={ KVCWriteMasterListItemSelected }\n\tOLSKMasterListFilterText={ KVCWriteMasterFilterText }\n\tOLSKMasterListDispatchClick={ KVCWriteMasterDispatchClick }\n\tOLSKMasterListDispatchArrow={ KVCWriteMasterDispatchArrow }\n\tOLSKMasterListDispatchFilter={ KVCWriteMasterDispatchFilter }\n\tlet:OLSKResultsListItem={ item }\n\tOLSKMasterListItemAccessibilitySummaryFor={ (inputData) =>  KVCWriteMasterLogic.KVCWriteMasterTruncatedTitle(KVCWriteMasterDelegateItemTitle(inputData.KVCNoteBody), true) }\t\n\tOLSKMasterListClass={ 'KVCWriteMaster' }\n\tOLSKMobileViewInactive={ OLSKMobileViewInactive }\n\t>\n\t<div slot=\"OLSKMasterListToolbarTail\">\n\t\t<div class=\"OLSKToolbarElementGroup\">\n\t\t\t<button class=\"KVCWriteMasterCreateButton OLSKLayoutButtonNoStyle OLSKLayoutElementTappable OLSKToolbarButton\" title={ OLSKLocalized('KVCWriteMasterCreateButtonText') } on:click={ mod.InterfaceCreateButtonDidClick } accesskey=\"n\">\n\t\t\t\t<div class=\"KVCWriteMasterCreateButtonImage\">{@html _OLSKSharedCreate }</div>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<KVCWriteMasterListItem\n\t\tKVCWriteMasterListItemObject={ item }\n\t\tKVCWriteMasterListItemDispatchTitle={ (inputData) => KVCWriteMasterLogic.KVCWriteMasterTruncatedTitle(KVCWriteMasterDelegateItemTitle(inputData)) }\n\t\tKVCWriteMasterListItemDispatchSnippet={ (inputData) => KVCWriteMasterDelegateItemSnippet(inputData) }\n\t\t/>\n\n\t<div class=\"OLSKMasterListBodyTail\" slot=\"OLSKMasterListBodyTail\">{#if KVCWriteMasterRevealArchiveIsVisible }\n\t\t<button class=\"KVCWriteMasterRevealArchiveButton\" on:click={ KVCWriteMasterDispatchRevealArchive }>{ OLSKLocalized('KVCWriteMasterRevealArchiveButtonText') }</button>\n\t{/if}</div>\n</OLSKMasterList>\t\n\n<style src=\"./ui-style.css\">:global(.KVCWriteMaster) {\n\tborder-right: var(--WKCBorderStyle);\n}\n\n:global(.OLSKMasterListToolbar) {\n\tborder-bottom: var(--WKCBorderStyle);\n}\n\n:global(.OLSKMasterListToolbar .OLSKToolbarElementGroup) {\n\tmargin-left: 4px;\n}\n\n@media screen and (max-width: 760px) {\n\n:global(.OLSKMasterListToolbar .OLSKToolbarElementGroup) {\n\tmargin-left: 8px;\n}\n\n}\n\n:global(.KVCWriteMaster .OLSKMasterListBody .OLSKResultsListItemSelected .KVCWriteMasterListItem) {\n\tbackground: #e6e6e6;\n}\n\n@media screen and (min-width: 760px) {\n\n:global(.KVCWriteMaster.OLSKMasterListFocused .OLSKMasterListBody  .OLSKResultsListItemSelected .KVCWriteMasterListItem) {\n\tbackground: #1a81ff;\n\tcolor: white;\n}\n\n}\n\n:global(.KVCWriteMaster .OLSKMasterListBodyTail) {\n\tpadding: 10px;\n\t\n\t/* @OLSKMasterListBodyTailFlexbox:Parent */\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n</style>\n",
    "<script>\nexport let KVCWriteMasterListItemObject;\nexport let KVCWriteMasterListItemDispatchTitle;\nexport let KVCWriteMasterListItemDispatchSnippet;\n</script>\n\n<div class=\"KVCWriteMasterListItem\" class:KVCWriteMasterListItemArchived={ KVCWriteMasterListItemObject.KVCNoteIsArchived }>\n\n<strong class=\"KVCWriteMasterListItemTitle\" aria-hidden=\"true\">{ KVCWriteMasterListItemDispatchTitle(KVCWriteMasterListItemObject.KVCNoteBody) }</strong>\n<span class=\"KVCWriteMasterListItemSnippet\" aria-hidden=\"true\">{ KVCWriteMasterListItemDispatchSnippet(KVCWriteMasterListItemObject.KVCNoteBody) }</span>\n\n</div>\n\n<style>\n.KVCWriteMasterListItem {\n\tmin-height: 46px;\n\tpadding: 10px;\n\tborder-bottom: var(--WKCBorderStyle);\n\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\n\t/* prevent breaking from long urls */\n\toverflow-wrap: break-word;\n\tword-wrap: break-word;\n\tword-break: break-word;\n\thyphens: auto;\n}\n\n.KVCWriteMasterListItemArchived {\n\tborder-left: 10px solid #cccccc;\n\topacity: 0.8;\n}\n\n.KVCWriteMasterListItemTitle {\n\tdisplay: inline-block;\n}\n\n.KVCWriteMasterListItemSnippet {\n\tdisplay: block;\n\tmargin-top: 5px;\n}\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}