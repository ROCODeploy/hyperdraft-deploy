var Main=function(){"use strict";function t(){}function r(e,t){for(const r in t)e[r]=t[r];return e}function o(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(o)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,r,o){if(e){const n=u(e,t,r,o);return e[0](n)}}function u(e,t,o,n){return e[1]&&n?r(o.ctx.slice(),e[1](n(t))):o.ctx}function c(e,t,r,o){if(e[2]&&o){const n=e[2](o(r));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],r=Math.max(t.dirty.length,n.length);for(let o=0;o<r;o+=1)e[o]=t.dirty[o]|n[o];return e}return t.dirty|n}return t.dirty}function p(e,t,r,o,n,i){if(n){const a=u(t,r,o,i);e.p(a,n)}}function d(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function h(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function m(e){const t={};for(const r in e)t[r]=!0;return t}const f="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function S(e,t){e.appendChild(t)}function g(e,t,r){e.insertBefore(t,r||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function D(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function K(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function O(){return L(" ")}function y(){return L("")}function b(e,t,r,o){return e.addEventListener(t,r,o),()=>e.removeEventListener(t,r,o)}function w(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function v(e,t){t=""+t,e.data!==t&&(e.data=t)}function V(e,t){e.value=null==t?"":t}function T(e,t,r,o){null==r?e.style.removeProperty(t):e.style.setProperty(t,r,o?"important":"")}function E(e,t,r){e.classList[r?"add":"remove"](t)}let I;function k(e){I=e}function _(){if(!I)throw new Error("Function called outside component initialization");return I}function x(e){_().$$.on_mount.push(e)}function R(e){_().$$.after_update.push(e)}const P=[],A=[];let F=[];const N=[],W=Promise.resolve();let B=!1;function M(e){F.push(e)}const j=new Set;let Z=0;function U(){if(0!==Z)return;const e=I;do{try{for(;Z<P.length;){const e=P[Z];Z++,k(e),$(e.$$)}}catch(e){throw P.length=0,Z=0,e}for(k(null),P.length=0,Z=0;A.length;)A.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];j.has(t)||(j.add(t),t())}F.length=0}while(P.length);for(;N.length;)N.pop()();B=!1,j.clear(),k(e)}function $(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const H=new Set;let G;function z(){G={r:0,c:[],p:G}}function q(){G.r||i(G.c),G=G.p}function J(e,t){e&&e.i&&(H.delete(e),e.i(t))}function Y(e,t,r,o){if(e&&e.o){if(H.has(e))return;H.add(e),G.c.push(()=>{H.delete(e),o&&(r&&e.d(1),o())}),e.o(t)}else o&&o()}function Q(e){e&&e.c()}function X(e,t,r,n){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,r),n||M(()=>{const t=e.$$.on_mount.map(o).filter(a);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]}),l.forEach(M)}function ee(e,t){const r=e.$$;null!==r.fragment&&(!function(e){const t=[],r=[];F.forEach(o=>-1===e.indexOf(o)?t.push(o):r.push(o)),r.forEach(e=>e()),F=t}(r.after_update),i(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function te(e,t){-1===e.$$.dirty[0]&&(P.push(e),B||(B=!0,W.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,r,o,a,s,l,u,c=[-1]){const p=I;k(e);const d=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:c,skip_bound:!1,root:r.target||p.$$.root};u&&u(d.root);let h=!1;if(d.ctx=o?o(e,r.props||{},(t,r,...o)=>{const n=o.length?o[0]:r;return d.ctx&&s(d.ctx[t],d.ctx[t]=n)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](n),h&&te(e,t)),r}):[],d.update(),h=!0,i(d.before_update),d.fragment=!!a&&a(d.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);d.fragment&&d.fragment.l(e),e.forEach(C)}else d.fragment&&d.fragment.c();r.intro&&J(e.$$.fragment),X(e,r.target,r.anchor,r.customElement),U()}k(p)}class oe{$destroy(){ee(this,1),this.$destroy=t}$on(e,r){if(!a(r))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(r),()=>{const e=o.indexOf(r);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ie(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function se(e,t){return e(t={exports:{}},t.exports),t.exports}var le=se(function(t,r){!function(t){const r={OLSKInternationalDefaultIdentifier:()=>"i18n",OLSKInternationalIsTranslationFileBasename:e=>!("string"!=typeof e||e.split(".").length<2||!e.split(".").pop().match(/ya?ml/i)||e.split("-").shift()!==r.OLSKInternationalDefaultIdentifier()||!r._OLSKInternationalLanguageID(e)),OLSKInternationalLanguageID(e){if(!r.OLSKInternationalIsTranslationFileBasename(e))throw new Error("OLSKErrorInputNotValid");return r._OLSKInternationalLanguageID(e)},OLSKInternationalSimplifiedLanguageCode(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return e.split("-").shift()},_OLSKInternationalLanguageID:e=>e.replace(r.OLSKInternationalDefaultIdentifier()+"-","").split(".").shift(),OLSKInternationalLocalizedString(e,t){if("object"!=typeof t||null===t)throw new Error("OLSKErrorInputNotValid");var r=t[e];return r||(r="TRANSLATION_MISSING",console.log([r,e])),r},OLSKInternationalLocalizedStringCallback(e,t){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if(!Array.isArray(t))throw new Error("OLSKErrorInputNotValid");const o=Object.keys(e).reverse().concat(...t.map(function(e){return[r.OLSKInternationalSimplifiedLanguageCode(e),e]}).reverse());return function(t,n){if(!Array.isArray(n))throw new Error("OLSKErrorInputNotValid");let i,a=o.concat(...n.map(function(e){return[r.OLSKInternationalSimplifiedLanguageCode(e),e]}).reverse(),[]);for(;!i&&a.length;)i=(e[a.pop()]||{})[t];return i||console.log([i="TRANSLATION_MISSING",t].join(" ")),i}},_OLSKInternationalPaths(e,t){if("string"!=typeof e||!e.trim())throw new Error("OLSKErrorInputNotValid");const o=ie;return o().globSync(`**/*${r.OLSKInternationalDefaultIdentifier()}*.y*(a)ml`,{cwd:e,realpath:!0}).filter(function(e){return!t||!e.match(t)}).filter(function(e){return r.OLSKInternationalIsTranslationFileBasename(o().basename(e))})},_OLSKInternationalConstructedDictionary(e){if(!Array.isArray(e))throw new Error("OLSKErrorInputNotValid");const t=ie;return e.reduce(function(e,o){const n=r.OLSKInternationalLanguageID(t().basename(o));return e[n]=Object.assign(e[n]||{},t().load(t().readFileSync(o,"utf8"))),e},{})},OLSKInternationalDictionary(e){return this._OLSKInternationalConstructedDictionary(this._OLSKInternationalPaths(e))},_OLSKInternationalCompilationObject(e,t){const o=ie;return this._OLSKInternationalPaths(e,/node_modules|__external/).filter(function(e){return!t||r.OLSKInternationalLanguageID(o().basename(e))===t}).reduce(function(e,t){return Object.assign(e,{[t]:o().load(o().readFileSync(t,"utf8"))})},{})},_OLSKInternationalCompilationFilePath(e){if("string"!=typeof e||!e.trim())throw new Error("OLSKErrorInputNotValid");return ie().join(e,"__compiled",r.OLSKInternationalDefaultIdentifier()+"-compilation.yml")},_SafeDump:e=>ie().dump(e,{lineWidth:1/0}),OLSKInternationalWriteCompilationFile(e,t){const o=ie,n=r._SafeDump(this._OLSKInternationalCompilationObject(e,t)),i=o().dirname(r._OLSKInternationalCompilationFilePath(e));o().existsSync(i)||o().mkdirSync(i),o().writeFileSync(r._OLSKInternationalCompilationFilePath(e),n)},OLSKInternationalSpreadCompilationFile(e,t){if("string"!=typeof e||!e.trim())throw new Error("OLSKErrorInputNotValid");const o=ie,n=o().load(o().readFileSync(r._OLSKInternationalCompilationFilePath(e),"utf8"));Object.keys(n).map(function(e){return o().writeFileSync(e,r._SafeDump(n[e]))})},OLSKInternationalAddControllerLanguageCode(t,r){if("string"!=typeof t||!t.trim())throw new Error("OLSKErrorInputNotValid");if("string"!=typeof r||!r.trim())throw new Error("OLSKErrorInputNotValid");const o=ie;o().globSync("controller.js",{cwd:t,matchBase:!0,realpath:!0}).forEach(function(t){if(t.match(/.*(\.git|DS_Store|node_modules|vendor|__\w+)\/.*/i))return;const n=o();if("function"!=typeof n.OLSKControllerRoutes)return;if(!(i=n.OLSKControllerRoutes(),Array.isArray(i)?i:Object.entries(i).reduce(function(e,t){return e.concat(Object.assign(t[1],{OLSKRouteSignature:t[0]}))},[])).filter(function(e){return e.OLSKRouteLanguageCodes}).filter(function(e){return!e.OLSKRouteLanguageCodes.includes(r)}).length)return;var i;const a=o().readFileSync(t,"utf8").match(/OLSKRouteLanguageCodes: \[.*\]/g);if(!a)throw new Error(`invalid OLSKRouteLanguageCodes syntax in ${e}`);a.map(function(e){const n=e.match(/\[.*\]/);return o().writeFileSync(t,o().readFileSync(t,"utf8").replace(/OLSKRouteLanguageCodes: \[.*\]/,`OLSKRouteLanguageCodes: ['${JSON.parse(n[0].replace(/\'/g,'"')).concat(r).join("', '")}']`))})}),process.argv[2].endsWith("olsk-i18n-add")&&process.exit()}};Object.assign(t,r),Object.defineProperty(t,"__esModule",{value:!0})}(r),r.OLSKLocalized=function(e){return r.OLSKInternationalLocalizedString(e,{pt:{KVCWriteTemplateDataFieldText:"HTML",KVCWriteTemplateUpdateButtonText:"Salvar",KVCWriteDetailToolbarBackButtonText:"Voltar",KVCWriteDetailToolbarJumpButtonText:"Saltar",KVCWriteDetailToolbarArchiveButtonText:"Arquivar",KVCWriteDetailToolbarUnarchiveButtonText:"Desarquivar",KVCWriteDetailToolbarIsRootPageText:"(página inicial)",KVCWriteDetailToolbarPublishButtonText:"Publicar",KVCWriteDetailToolbarPublicLinkText:"Público",KVCWriteDetailToolbarRetractButtonText:"Retirar",KVCWriteDetailToolbarDiscardButtonText:"Descartar",KVCWriteDetailLauncherItemShowLocalVersionsText:"Mostrar versões locais",KVCWriteDetailLauncherItemCloneText:"Clonar",KVCWriteDetailLauncherItemExportText:"Exportar nota",KVCWriteDetailLauncherItemDebugText:"Debug nota",KVCWriteDetailLauncherItemOpenPublicLinkText:"Abrir link público",KVCWriteDetailLauncherItemSetAsRootPageText:"Definir como página inicial",KVCWriteFilterFieldText:"Filtrar ou criar",KVCWriteCreateButtonText:"Criar",KVCWriteEmptyNoteText:"Nota em branco",KVCWriteUntitledNoteText:"Nota sem título",KVCWriteRevealArchiveButtonText:"Revelar o arquivo",KVCWriteLauncherItemImportTXTText:"Importar TXT (beta)",KVCWriteLauncherItemImportNVText:"Importar Notational Velocity (beta)",KVCWriteLauncherItemExportZIPText:"Exportar ZIP (beta)",KVCWriteLauncherItemJournalText:"Diário",KVCWriteLauncherItemBacklinksText:"Backlinks",KVCWriteLauncherItemShowPublicNotesText:"Mostrar notas públicas",KVCWriteLauncherItemPublishAllText:"Publicar todas as notas anteriormente publicadas",KVCWriteLauncherItemRetractAllText:"Retirar todas as notas publicadas",KVCWriteLauncherItemConfigureCustomDomainText:"Configurar o nome de domínio personalizado",KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText:"Copie a seguinte URL do raiz e cole-a na configuração do seu host.",KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText:"Qual é seu nome de domínio?",KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText:"O nome de domínio não parece estar presente. Você gostaria de tentar novamente?",KVCWriteLauncherItemRemoveCustomDomainText:"Eliminar o nome de domínio personalizado",KVCWriteLauncherItemConfigureCustomTemplateText:"Configurar template personalizado",KVCWriteTemplateModalTitleText:"Template personalizado",KVCWriteLauncherItemRemoveCustomTemplateText:"Eliminar template personalizado",KVCWriteTitle:"Escrever",KVCWriteVersionsWord:"versions",KVCVitrineTitle:"Hyperdraft",KVCVitrineDescription:"Transformar suas notas de texto em um website.",OLSKLandingBlurbText:"Um aplicativo simples para escrever e publicar que fica sempre com você.",KVCVitrineGlossaryWritingHeadingText:"A escrita",KVCVitrineGlossaryWritingUsingLinkText:"Como uso o Hyperdraft para referência, escrita e publicação",KVCVitrineGlossaryWritingAnswerLinkText:"A escrita cria um espaço para 'a resposta chegar'",KVCVitrineGlossaryWritingListsLinkText:"As listas não são síntese",KVCVitrineGlossaryWritingDiscussionLinkText:"Discussão é efêmera.",KVCVitrineGlossaryWritingMagicLinkText:"Escrever sem magia",KVCVitrineGlossaryPublicHeadingText:"Aberto ao publico",KVCVitrineGlossaryPublicRefLinkText:"Minhas notas públicas",KVCVitrineGlossaryPublicRefBlurbText:"Um espaço para escrever, coletar, revisar e compartilhar.",KVCVitrineGlossaryPublicGardensLinkText:"Jardins feitos com Hyperdraft",KVCVitrineGlossaryPublicGardensBlurbText:"De amigos e estranhos.",KVCVitrineGlossaryPublicDigitalLinkText:"O que é um jardim digital?",KVCVitrineGlossaryPublicDigitalBlurbText:"Aprenda sobre uma nova forma de escrita e publicação não cronológica.",KVCVitrineGlossaryCompareHeadingText:"Comparar",KVCVitrineGlossaryCompareSimplenoteLinkText:"Hyperdraft e Simplenote",KVCFeatureListArray:[["Interligar suas idéias.","Fazer links entre notas com o sintaxe [[wiki]]."],["Fazer um website.","Publicar notas na Internet com o remoteStorage ou o Fission."]],KVCGuideTitle:"Guia de Hyperdraft",KVCGuideDescription:"Documentação do projeto",ROCORootLinkText:"Visitar rosano.ca",OLSKServiceWorkerUpdateAlertLabelText:"Atualização disponível",OLSKServiceWorkerUpdateAlertReloadButtonText:"Recarregar",OLSKServiceWorkerLauncherItemReloadText:"Recarregar",OLSKServiceWorkerLauncherItemDebugForceUpdateText:"Forçar atualização",OLSKRootLinkTextHome:"Voltar para a página inicial",OLSKLanguageSwitcherVersionFormat:"Versão no %@ / %@",OLSKLanguageSwitcherVersionName:{en:"inglês",fr:"francês",es:"espanhol",pt:"português",de:"alemão"},KVCRootLinkText:"Casa",KVCBacklinksHeadingText:"Links para esta página",SWARLinkText:"Parte do Pequeno Anel de Aplicação Web",ROCOGlossaryHeadingText:"Uma nova geração de aplicações",ROCOGlossaryDoorlessLinkText:"Filosofia 'doorless' (sem porta)",ROCOGlossaryDoorlessBlurbText:"Aplicativo como espaços públicos não-exclusivos.",ROCOGlossaryZeroDataLinkText:"Aprender mais sobre applicativos Zero Data",ROCOGlossaryZeroDataBlurbText:"Ser dono dos seus dados, todos eles.",ROCOGlossaryGoingWebLinkText:"Indo totalmente para a web",ROCOGlossaryGoingWebBlurbText:"Por que deixei de fazer aplicações iOS após doze anos.",ROCOGlossaryAppsLinkText:"Minhas outras aplicações",ROCOGlossaryAppsBlurbText:"Ferramentas para agência",OLSKWordingConfirmText:"Você tem certeza?",OLSKWordingOpenApp:"Abrir app",OLSKWordingFeatures:"Características",OLSKWordingOpenGuide:"Ler o guia",OLSKWordingDeeperHeading:"Ir mais fundo",OLSKWordingVideo:"Vídeo",OLSKWordingTestimonials:"Testemunhos",OLSKWordingFeedbackHeading:"Feedback",OLSKWordingFeedbackBlurb:'De dentro do aplicativo, toque no botão ℹ︎, depois selecione "Enviar feedback".',OLSKWordingTypeToSearch:"Digitar para pesquisar",OLSKWordingTypeToFilter:"Digitar para filtrar",OLSKWordingCancelText:"Cancelar",OLSKWordingSubmitText:"Enviar",OLSKWordingDownloadText:"Baixar",OLSKWordingEditText:"Editar",OLSKWordingDebugObjectText:"Depurar este objeto",OLSKWebViewWindowButtonText:"Abrir em nova janela",OLSKTransportLauncherItemImportJSONText:"Importar JSON (beta)",OLSKTransportLauncherItemImportJSONErrorNotFilledAlertText:"Entrada não preenchida",OLSKTransportLauncherItemImportJSONErrorNotValidAlertText:"Entrada não válida",OLSKTransportLauncherItemExportJSONText:"Exportar JSON (beta)",OLSKRemoteStorageConnectConfirmText:"Conecte sua nuvem para continuar. Você gostaria de fazer isso agora?",OLSKRemoteStorageLauncherItemOpenLoginLinkText:"Abrir link de acesso",OLSKRemoteStorageLauncherItemOpenLoginLinkPromptText:"Link de acesso",OLSKRemoteStorageLauncherItemCopyLoginLinkText:"Copiar link de acesso privado",OLSKRemoteStorageLauncherItemDebugFlushDataText:"Fazer sair os dados",OLSKRemoteStorageLauncherItemDebugFlushDataConfirmText:"Você tem certeza?",OLSKPlaceholderText:"Nenhum artículo selecionado",OLSKNarrowFilterFieldText:"Filtrar",OLSKInputWrapperClearButtonText:"Limpar texto",OLSKModalViewCloseButtonText:"OK",OLSKInstallAlertHeadingText:"Instalar em seu dispositivo",OLSKInstallAlertBlurbHTMLFormat:"Tap <em>Compartir</em> %$1@, depois <em>Adicionar à tela inicial</em> %$2@",OLSKInstallAlertDismissButtonText:"Fechar",OLSKEditText:"Editar isso",OLSKCloudRenewButtonText:"Renovar",OLSKCloudStatusSyncStartButtonText:"Sincronizar",OLSKCloudStatusSyncStopButtonText:"Parar",OLSKCloudStatusDisconnectButtonText:"Desconectar",OLSKCloudStatusDisconnectConfirmText:"Você tem certeza?",OLSKCloudFormConnectButtonText:"Conectar",OLSKCloudFormRegisterLinkText:"Obter uma nuvem",OLSKCatalogMasterPlaceholderText:"Toque + para criar um artículo.",OLSKCatalogStashPlaceholderTextFormat:"Artículos selecionados: %@",OLSKAproposHeadingText:"Sobre",OLSKAproposFeedbackButtonText:"Enviar feedback",OLSKAproposShareButtonText:"Dizer a um amigo",OLSKAppToolbarCloudStatusOnline:"Online",OLSKAppToolbarCloudStatusOffline:"Offline",OLSKAppToolbarCloudStatusError:"Erro",OLSKAppToolbarAproposButtonText:"Mais informação",OLSKAppToolbarLanguageButtonText:"Idioma",OLSKAppToolbarGuideLinkText:"Guia",OLSKAppToolbarFundButtonText:"Financiar",OLSKAppToolbarClubButtonText:"Adesão",OLSKAppToolbarLauncherButtonText:"Lançador",OLSKAppToolbarCloudButtonText:"Nuvem",OLSKReloadButtonText:"Reload",OLSKAppFeatureListArray:[["Acessível em qualquer lugar.","Funciona em dispositivos móveis, tablet e desktop'."],["Sem Wi-Fi, sem problemas.","Funciona offline sem acesso à Internet."],["Seus dados em todos os seus dispositivos.","Sincronização automática na nuven com o remoteStorage ou Fission."],["Fluxo de trabalho eficiente.","Atalhos do teclado para a maioria das coisas."],["Mova os dados livremente.","Importar e exportar dados JSON (beta)."],["Amigo dos cegos.","Etiquetas de texto em todos os elementos."],["Privado, não assustador.","Nenhuma análise de comportamento ou rastreadores inter-sitios."],["Ser dono dos seus dados.",'100% seus em um aplicativo <a href="https://0data.app">Zero Data</a>.']],OLSKAppFeatureOpenSourceNameText:"Código aberto.",OLSKAppFeatureOpenSourceBlurbFormat:'O código é <a href="%@">público</a> para ler e modificar.'},fr:{KVCWriteTemplateDataFieldText:"HTML",KVCWriteTemplateUpdateButtonText:"Sauvegarder",KVCWriteDetailToolbarBackButtonText:"Back",KVCWriteDetailToolbarJumpButtonText:"Sauter",KVCWriteDetailToolbarArchiveButtonText:"Archiver",KVCWriteDetailToolbarUnarchiveButtonText:"Désarchiver",KVCWriteDetailToolbarIsRootPageText:"(Page de racine)",KVCWriteDetailToolbarPublishButtonText:"Publier",KVCWriteDetailToolbarPublicLinkText:"Public",KVCWriteDetailToolbarRetractButtonText:"Rétracter",KVCWriteDetailToolbarDiscardButtonText:"Supprimer",KVCWriteDetailLauncherItemShowLocalVersionsText:"Montrer des versions locales",KVCWriteDetailLauncherItemCloneText:"Cloner",KVCWriteDetailLauncherItemExportText:"Exporter note",KVCWriteDetailLauncherItemDebugText:"Déboguer note",KVCWriteDetailLauncherItemOpenPublicLinkText:"Ouvrir le lien publique",KVCWriteDetailLauncherItemSetAsRootPageText:"Fixer comme page de racine",KVCWriteFilterFieldText:"Filtrer or créer",KVCWriteCreateButtonText:"Créer",KVCWriteEmptyNoteText:"Note blanche",KVCWriteUntitledNoteText:"Nota sans titre",KVCWriteRevealArchiveButtonText:"Montrer archive",KVCWriteLauncherItemImportTXTText:"Importer TXT (béta)",KVCWriteLauncherItemImportNVText:"Importer Notational Velocity (béta)",KVCWriteLauncherItemExportZIPText:"Exporter ZIP (béta)",KVCWriteLauncherItemJournalText:"Journal",KVCWriteLauncherItemBacklinksText:"Liens retours",KVCWriteLauncherItemShowPublicNotesText:"Montrere les notes publiques",KVCWriteLauncherItemPublishAllText:"Publiquer toutes les notes antérieurement publiquées",KVCWriteLauncherItemRetractAllText:"Retracter toutes les notes publiquées",KVCWriteLauncherItemConfigureCustomDomainText:"Configurer nom de domaine personalisé",KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText:"Veuillez copier le texte suivant et le coller dedans votre host configuration.",KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText:"Quel est votre nom de domaine personalisé ?",KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText:"Le nom de domaine ne semble pas d'être présent. Souhaitez-vous essayer de nouveau ?",KVCWriteLauncherItemRemoveCustomDomainText:"Enlever nom de domaine personalisé",KVCWriteLauncherItemConfigureCustomTemplateText:"Configurer gabarit personalisé",KVCWriteTemplateModalTitleText:"Gabarit personalisé",KVCWriteLauncherItemRemoveCustomTemplateText:"Eliminer gabarit personalisé",KVCWriteTitle:"Écrire",KVCWriteVersionsWord:"versions",KVCVitrineTitle:"Hyperdraft",KVCVitrineDescription:"Transformer vos notes de texte en un site Web.",OLSKLandingBlurbText:"Une application simple pour écrire et publier, toujours avec vous.",KVCVitrineGlossaryWritingHeadingText:"L'écriture",KVCVitrineGlossaryWritingUsingLinkText:"Comment j'utilise Hyperdraft pour la référence, l'écriture et la publication.",KVCVitrineGlossaryWritingAnswerLinkText:"L'écriture crée un espace pour « la réponse à arriver »",KVCVitrineGlossaryWritingListsLinkText:"La liste n'est pas un synthèse.",KVCVitrineGlossaryWritingDiscussionLinkText:"La discussion est éphémère.",KVCVitrineGlossaryWritingMagicLinkText:"Écrire sans magie",KVCVitrineGlossaryPublicHeadingText:"Ouvert au public",KVCVitrineGlossaryPublicRefLinkText:"Mes notes publiques",KVCVitrineGlossaryPublicRefBlurbText:"Un espace pour écrire, rassembler, réviser et partager.",KVCVitrineGlossaryPublicGardensLinkText:"Jardins réalisés avec Hyperdraft",KVCVitrineGlossaryPublicGardensBlurbText:"D'amis et d'inconnus.",KVCVitrineGlossaryPublicDigitalLinkText:"Qu'est-ce qu'un jardin numérique ?",KVCVitrineGlossaryPublicDigitalBlurbText:"Découvrez une nouvelle forme d'écriture et de publication non chronologique.",KVCVitrineGlossaryCompareHeadingText:"Comparer",KVCVitrineGlossaryCompareSimplenoteLinkText:"Hyperdraft et Simplenote",KVCFeatureListArray:[["Mettre vos idées en réseau.","Créer des liens entre vos notes par la syntaxe [[wiki]]."],["Faire un site web.","Publier des notes sur l'Internet avec remoteStorage ou Fission."]],KVCCompareSimplenoteTitle:"Hyperdraft et Simplenote",KVCCompareSimplenoteDescription:"Une alternative pour la création de sites web.",KVCCompareSimplenoteIntroText:"Simplenote existe depuis longtemps. L'esthétique accessible et conviviale de l'application permet à de nombreuses personnes de prendre des notes. Au fil du temps, elle a délaissé l'édition en texte brut au profit de listes de contrôle et de textes plus riches, et elle privilégie un format de lien propriétaire à la syntaxe à double crochet habituelle.",KVCCompareSimplenoteContrastText:"Hyperdraft est destiné aux personnes qui souhaitent utiliser leur outil de prise de notes pour créer des sites Web tout en gardant les mains sur le clavier. Il accélère le flux de travail grâce à des raccourcis et ajoute des fonctions de publication Web plus avancées. De plus, vous pouvez être propriétaire de 100 % de vos données en stockant vos notes dans un endroit que vous contrôlez.",KVCCompareSimplenoteTableHeadingFeatureText:"Fonctionnalité",KVCCompareSimplenoteFeatureList:{KVCCompareSimplenoteFeaturePlaintext:"éditeur de texte en clair",KVCCompareSimplenoteFeatureFirstLink:"la première ligne est le titre",KVCCompareSimplenoteFeatureMarkdown:"prise en charge de Markdown",KVCCompareSimplenoteFeatureSync:"synchronisation sur plusieurs appareils",KVCCompareSimplenoteFeatureOpenSource:"open-source",KVCCompareSimplenoteFeatureOffline:"fonctionne hors ligne",KVCCompareSimplenoteFeatureMobile:"fonctionne sur mobile",KVCCompareSimplenoteFeatureShortcuts:"raccourcis clavier",KVCCompareSimplenoteFeatureClick:"cliquer sur les liens pour aller entre les notes",KVCCompareSimplenoteFeaturePublish:"publiquer de notes sur l'Internet",KVCCompareSimplenoteFeatureCollaborate:"collaborer avec d'autres personnes",KVCCompareSimplenoteFeatureHomepage:"définir la page d'accueil",KVCCompareSimplenoteFeatureDomain:"ajouter d'un nom de domaine personnalisé",KVCCompareSimplenoteFeatureDoorless:"utiliser sans compte",KVCCompareSimplenoteFeatureNotational:"importer de Notational Velocity",KVCCompareSimplenoteFeatureSyntax:"syntaxe à double crochet",KVCCompareSimplenoteFeatureArchive:"archiver des notes",KVCCompareSimplenoteFeatureZeroData:"être propriétaire de vos données"},KVCCompareSimplenoteFeatureListCaption:{KVCCompareSimplenoteFeatureShortcuts:["raccourcis clavier de Sublime Text, commandes du lanceur, changer rapidement entre la liste et la note actuelle","raccourcis de base"],KVCCompareSimplenoteFeatureHomepage:["faire un siteweb à partir de vos notes"],KVCCompareSimplenoteFeatureDomain:["ajoutez votre propre style lors de la publication"],KVCCompareSimplenoteFeatureDoorless:["ouvrez-le et commencez à l'utiliser"],KVCCompareSimplenoteFeatureSyntax:["compatible avec Notational Velocity et d'autres applications","format propriétaire"],KVCCompareSimplenoteFeatureArchive:["cacher les notes que vous n'utilisez pas souvent pour ordonner les résultats de recherche"],KVCCompareSimplenoteFeatureZeroData:["vos données vous appartiennent à 100%"]},KVCCompareSimplenoteActionHeadingText:"Essayez d'écrire avec Hyperdraft",ROCORootLinkText:"Visiter rosano.ca",OLSKServiceWorkerUpdateAlertLabelText:"Mise à jour disponible",OLSKServiceWorkerUpdateAlertReloadButtonText:"Recharger",OLSKServiceWorkerLauncherItemReloadText:"Recharger",OLSKServiceWorkerLauncherItemDebugForceUpdateText:"Forcer mis à jour",OLSKRootLinkTextHome:"Retour à l'accueil",OLSKLanguageSwitcherVersionFormat:"Version en %@ / %@",OLSKLanguageSwitcherVersionName:{en:"anglais",fr:"français",es:"espagnol",pt:"portugais",de:"allemand"},KVCRootLinkText:"Accueil",KVCBacklinksHeadingText:"Liens vers cette page",SWARLinkText:"Ça fait partie du Doorless App Ring",ROCOGlossaryHeadingText:"Une nouvelle génération d'applications",ROCOGlossaryDoorlessLinkText:"La philosophie 'doorless' (sans porte)",ROCOGlossaryDoorlessBlurbText:"Des applications comme espaces publics non exclusifs.",ROCOGlossaryZeroDataLinkText:"Apprendre plus à propos des applis Zero Data",ROCOGlossaryZeroDataBlurbText:"Être propriétaire de vos données, tout.",ROCOGlossaryGoingWebLinkText:"Entièrement sur le web",ROCOGlossaryGoingWebBlurbText:"Pourquoi j'ai arrêté de faire des applications iOS après douze ans.",ROCOGlossaryAppsLinkText:"Mes autres applications",ROCOGlossaryAppsBlurbText:"Outils pour la capacité d'agir",OLSKWordingConfirmText:"Êtes-vous sûr.e ?",OLSKWordingOpenApp:"Ouvrir l'app",OLSKWordingFeatures:"Fonctionnalités",OLSKWordingOpenGuide:"Voir le guide",OLSKWordingDeeperHeading:"Aller plus profond",OLSKWordingVideo:"Vidéo",OLSKWordingTestimonials:"Des témoignages",OLSKWordingFeedbackHeading:"Feedback",OLSKWordingFeedbackBlurb:"Dans l'application, touchez le bouton ℹ︎, puis sélectionnez « Envoyer des commentaires ».",OLSKWordingTypeToSearch:"Taper pour chercher",OLSKWordingTypeToFilter:"Taper pour filtrer",OLSKWordingCancelText:"Annuler",OLSKWordingSubmitText:"Soumettre",OLSKWordingDownloadText:"Télécharger",OLSKWordingEditText:"Modifier",OLSKWordingDebugObjectText:"Déboguer cet objet",OLSKWebViewWindowButtonText:"Ouvrir dans une nouvelle fenêtre",OLSKTransportLauncherItemImportJSONText:"Importer JSON (béta)",OLSKTransportLauncherItemImportJSONErrorNotFilledAlertText:"Entrée non remplie",OLSKTransportLauncherItemImportJSONErrorNotValidAlertText:"Entrée non valide",OLSKTransportLauncherItemExportJSONText:"Exporter JSON (béta)",OLSKRemoteStorageConnectConfirmText:"Veuillez brancher votre stockage afin de continuer. Souhaitez-vous faire ça maintenant ?",OLSKRemoteStorageLauncherItemOpenLoginLinkText:"Ouvrir lien d'accès",OLSKRemoteStorageLauncherItemOpenLoginLinkPromptText:"Lien d'accès",OLSKRemoteStorageLauncherItemCopyLoginLinkText:"Copier lien d'accès privé",OLSKRemoteStorageLauncherItemDebugFlushDataText:"Flusher les données",OLSKRemoteStorageLauncherItemDebugFlushDataConfirmText:"Êtes-vous sûr.e ?",OLSKPlaceholderText:"Aucun article sélectionné",OLSKNarrowFilterFieldText:"Filtrer",OLSKInputWrapperClearButtonText:"Effacer le texte",OLSKModalViewCloseButtonText:"OK",OLSKInstallAlertHeadingText:"Installer dans votre appareil",OLSKInstallAlertBlurbHTMLFormat:"Touchez <em>Partager</em> %$1@, puis <em>Ajouter à l'Écran d'accueil</em> %$2@",OLSKInstallAlertDismissButtonText:"Écarter",OLSKEditText:"Editer ceci",OLSKCloudRenewButtonText:"Renouveler",OLSKCloudStatusSyncStartButtonText:"Synchroniser",OLSKCloudStatusSyncStopButtonText:"Stop",OLSKCloudStatusDisconnectButtonText:"Débrancher",OLSKCloudStatusDisconnectConfirmText:"Êtes-vous sûr.e ?",OLSKCloudFormConnectButtonText:"Brancher",OLSKCloudFormRegisterLinkText:"Obtenir stockage",OLSKCatalogMasterPlaceholderText:"Appuyez sur + pour créer un article.",OLSKCatalogStashPlaceholderTextFormat:"Articles sélectionnés : %@",OLSKAproposHeadingText:"À propos",OLSKAproposFeedbackButtonText:"Envoyer des commentaires",OLSKAproposShareButtonText:"Dire à un ami.e",OLSKAppToolbarCloudStatusOnline:"En ligne",OLSKAppToolbarCloudStatusOffline:"Hors connexion",OLSKAppToolbarCloudStatusError:"Erreur",OLSKAppToolbarAproposButtonText:"Plus d'info",OLSKAppToolbarLanguageButtonText:"Langage",OLSKAppToolbarGuideLinkText:"Guide",OLSKAppToolbarFundButtonText:"Financer",OLSKAppToolbarClubButtonText:"Adhésion",OLSKAppToolbarLauncherButtonText:"Lanceur",OLSKAppToolbarCloudButtonText:"Stockage",OLSKReloadButtonText:"Recharger",OLSKAppFeatureListArray:[["Accessible partout.","Fonctionne sur les appareils mobiles, les tablettes et les ordinateurs de bureau."],["Pas de Wi-Fi, pas de problème.","Fonctionne hors ligne sans accès à Internet."],["Vos données en tous vos appareils.","Synchronisation automatique sur le cloud avec remoteStorage ou Fission."],["Flux de travail efficace.","Raccourcis clavier pour la plupart des choses."],["Déplacer les données librement.","Importer et exporter des données JSON (béta)."],["Blind-friendly.","Étiquettes de texte sur tous les éléments."],["Privé, pas effrayant.","Pas d'analyse comportementale ni de traceurs intersites."],["Vos données vous appartiennent.",'100% à vous dans une application <a href="https://0data.app">Zero Data</a>.']],OLSKAppFeatureOpenSourceNameText:"Source ouvert.",OLSKAppFeatureOpenSourceBlurbFormat:'Le code is <a href="%@">public</a> pour lire et modifier.'},es:{KVCWriteTemplateDataFieldText:"HTML",KVCWriteTemplateUpdateButtonText:"Guardar",KVCWriteDetailToolbarBackButtonText:"Back",KVCWriteDetailToolbarJumpButtonText:"Saltar",KVCWriteDetailToolbarArchiveButtonText:"Archivar",KVCWriteDetailToolbarUnarchiveButtonText:"Desarchivar",KVCWriteDetailToolbarIsRootPageText:"(Página de raíz)",KVCWriteDetailToolbarPublishButtonText:"Publicar",KVCWriteDetailToolbarPublicLinkText:"Public",KVCWriteDetailToolbarRetractButtonText:"Retractarse",KVCWriteDetailToolbarDiscardButtonText:"Eliminar",KVCWriteDetailLauncherItemShowLocalVersionsText:"Mostrar versiones locales",KVCWriteDetailLauncherItemCloneText:"Clonar",KVCWriteDetailLauncherItemExportText:"Exportar note",KVCWriteDetailLauncherItemDebugText:"Debug nota",KVCWriteDetailLauncherItemOpenPublicLinkText:"Abrir enlace público",KVCWriteDetailLauncherItemSetAsRootPageText:"Fijar como página de raíz",KVCWriteFilterFieldText:"Filtrar o crear",KVCWriteCreateButtonText:"Crear",KVCWriteEmptyNoteText:"Nota en blanco",KVCWriteUntitledNoteText:"Nota sin título",KVCWriteRevealArchiveButtonText:"Mostrar archivo",KVCWriteLauncherItemImportTXTText:"Importar TXT (beta)",KVCWriteLauncherItemImportNVText:"Importar Notational Velocity (beta)",KVCWriteLauncherItemExportZIPText:"Exportar ZIP (beta)",KVCWriteLauncherItemJournalText:"Diario",KVCWriteLauncherItemBacklinksText:"Backlinks",KVCWriteLauncherItemShowPublicNotesText:"Mostrar notas públicas",KVCWriteLauncherItemPublishAllText:"Publicar todas las notas anteriormente publicadas",KVCWriteLauncherItemRetractAllText:"Retractarse todas las notas publicadas",KVCWriteLauncherItemConfigureCustomDomainText:"Configurar dominio de Internet de encargo",KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText:"Por favor, copia el texto siguiente y pegalo en tu host configuration.",KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText:"¿Qué es tu dominio de Internet de encargo?",KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText:"El dominio de Internet no parece estar presente. ¿Te gustaría intentar de nuevo?",KVCWriteLauncherItemRemoveCustomDomainText:"Quitar dominio de Internet de encargo",KVCWriteLauncherItemConfigureCustomTemplateText:"Configurar plantilla personalizada",KVCWriteTemplateModalTitleText:"Plantilla personalizada",KVCWriteLauncherItemRemoveCustomTemplateText:"Eliminar plantilla personalizada",KVCWriteTitle:"Escribir",KVCWriteVersionsWord:"versiones",KVCVitrineTitle:"Hyperdraft",KVCVitrineDescription:"Transformar tus notas de texto en un sitio web.",OLSKLandingBlurbText:"Una sencilla aplicación para escribir y publicar que está siempre contigo.",KVCVitrineGlossaryWritingHeadingText:"La escritura",KVCVitrineGlossaryWritingUsingLinkText:"Cómo utilizo Hyperdraft para referencia, escribir y publicar",KVCVitrineGlossaryWritingAnswerLinkText:"La escritura crea un espacio para 'la respuesta llegar'",KVCVitrineGlossaryWritingListsLinkText:"Las listas no son síntesis",KVCVitrineGlossaryWritingDiscussionLinkText:"La discusión es efímera",KVCVitrineGlossaryWritingMagicLinkText:"Escribir sin magia",KVCVitrineGlossaryPublicHeadingText:"Abierto al público",KVCVitrineGlossaryPublicRefLinkText:"Mis notas públicas",KVCVitrineGlossaryPublicRefBlurbText:"Un espacio para escribir, coleccionar, revisar y compartir.",KVCVitrineGlossaryPublicGardensLinkText:"Jardines hechos con Hyperdraft",KVCVitrineGlossaryPublicGardensBlurbText:"De amigos y extraños.",KVCVitrineGlossaryPublicDigitalLinkText:"¿Qué es un jardín digital?",KVCVitrineGlossaryPublicDigitalBlurbText:"Conozca una nueva forma de escritura y publicación no cronológica.",KVCVitrineGlossaryCompareHeadingText:"Comparar",KVCVitrineGlossaryCompareSimplenoteLinkText:"Hyperdraft y Simplenote",KVCFeatureListArray:[["Poner en red tus ideas.","Hacer enlazos entre tus notas con la sintaxis [[wiki]]."],["Hacer un sitio web.","Publicar notas en Internet con remoteStorage o Fission."]],ROCORootLinkText:"Visitar rosano.ca",OLSKServiceWorkerUpdateAlertLabelText:"Actualización disponible",OLSKServiceWorkerUpdateAlertReloadButtonText:"Recargar",OLSKServiceWorkerLauncherItemReloadText:"Recargar",OLSKServiceWorkerLauncherItemDebugForceUpdateText:"Forzar actualización",OLSKRootLinkTextHome:"Regresar a la pagina de inicio",OLSKLanguageSwitcherVersionFormat:"Versión en %@ / %@",OLSKLanguageSwitcherVersionName:{en:"Inglés",fr:"Francés",es:"Español",pt:"Portugués",de:"Alemán"},KVCRootLinkText:"Início",KVCBacklinksHeadingText:"Enlaces a esta página",SWARLinkText:"Hace parte del Doorless App Ring",ROCOGlossaryHeadingText:"Una nueva clase de aplicaciones",ROCOGlossaryDoorlessLinkText:"Filosofía 'doorless' (sin puerta)",ROCOGlossaryDoorlessBlurbText:"Las aplicaciones como espacios públicos no excluyentes.",ROCOGlossaryZeroDataLinkText:"Aprender más sobre applicaciónes Zero Data",ROCOGlossaryZeroDataBlurbText:"Ser dueno de tus datos, todos ellos.",ROCOGlossaryGoingWebLinkText:"Totalmente web",ROCOGlossaryGoingWebBlurbText:"Por qué dejé de hacer aplicaciones iOS después de doce años.",ROCOGlossaryAppsLinkText:"Mis otras aplicaciones",ROCOGlossaryAppsBlurbText:"Herramientas para la agencia",OLSKWordingConfirmText:"¿Est@as segur@?",OLSKWordingOpenApp:"Abrir app",OLSKWordingFeatures:"Características",OLSKWordingOpenGuide:"Ver la guía",OLSKWordingDeeperHeading:"Profundizar más",OLSKWordingVideo:"Video",OLSKWordingTestimonials:"Recomendaciones",OLSKWordingFeedbackHeading:"Feedback",OLSKWordingFeedbackBlurb:'Desde dentro de la aplicación, toca el botón ℹ︎, y después elegir "Enviar feedback".',OLSKWordingTypeToSearch:"Escribir para buscar",OLSKWordingTypeToFilter:"Escribir para filtrar",OLSKWordingCancelText:"Cancelar",OLSKWordingSubmitText:"Enviar",OLSKWordingDownloadText:"Descargar",OLSKWordingEditText:"Editar",OLSKWordingDebugObjectText:"Depurar este objeto",OLSKWebViewWindowButtonText:"Abrir en una nueva ventana",OLSKTransportLauncherItemImportJSONText:"Importar JSON (beta)",OLSKTransportLauncherItemImportJSONErrorNotFilledAlertText:"Entrada no cargada",OLSKTransportLauncherItemImportJSONErrorNotValidAlertText:"Entrada no valida",OLSKTransportLauncherItemExportJSONText:"Exportar JSON (beta)",OLSKRemoteStorageConnectConfirmText:"Conecta tu almacenamiento para continuar. ¿Te gustaría hacer esto ahora?",OLSKRemoteStorageLauncherItemOpenLoginLinkText:"Abrir enlace de acceso",OLSKRemoteStorageLauncherItemOpenLoginLinkPromptText:"Enlace de acceso",OLSKRemoteStorageLauncherItemCopyLoginLinkText:"Copiar enlace de acceso privado",OLSKRemoteStorageLauncherItemDebugFlushDataText:"Pulgar los datos",OLSKRemoteStorageLauncherItemDebugFlushDataConfirmText:"Estás segur@?",OLSKPlaceholderText:"Ningún artículo seleccionado",OLSKNarrowFilterFieldText:"Filtrar",OLSKInputWrapperClearButtonText:"Despejar el texto",OLSKModalViewCloseButtonText:"OK",OLSKInstallAlertHeadingText:"Instalar en tu dispositivo",OLSKInstallAlertBlurbHTMLFormat:"Toca <em>Compartir</em> %$1@, y después <em>Adicionar a la Tela de Inicio</em> %$2@",OLSKInstallAlertDismissButtonText:"Descartar",OLSKEditText:"Editar eso",OLSKCloudRenewButtonText:"Renovar",OLSKCloudStatusSyncStartButtonText:"Sincronizar",OLSKCloudStatusSyncStopButtonText:"Parar",OLSKCloudStatusDisconnectButtonText:"Desconectar",OLSKCloudStatusDisconnectConfirmText:"¿Estás segur@?",OLSKCloudFormConnectButtonText:"Conectar",OLSKCloudFormRegisterLinkText:"Conseguir almacenamiento",OLSKCatalogMasterPlaceholderText:"Pulse + para crear un artículo.",OLSKCatalogStashPlaceholderTextFormat:"Artículo seleccionados: %@",OLSKAproposHeadingText:"Sobre",OLSKAproposFeedbackButtonText:"Enviar feedback",OLSKAproposShareButtonText:"Decirlo a un amig@",OLSKAppToolbarCloudStatusOnline:"En líneo",OLSKAppToolbarCloudStatusOffline:"Sin conexión",OLSKAppToolbarCloudStatusError:"Error",OLSKAppToolbarAproposButtonText:"Más información",OLSKAppToolbarLanguageButtonText:"Lenguaje",OLSKAppToolbarGuideLinkText:"Guía",OLSKAppToolbarFundButtonText:"Financiar",OLSKAppToolbarClubButtonText:"Membresía",OLSKAppToolbarLauncherButtonText:"Lanzador",OLSKAppToolbarCloudButtonText:"Almacenamiento",OLSKReloadButtonText:"Recargar",OLSKAppFeatureListArray:[["Accesible en cualquier lugar.","Foncione en dispositivos mobiles, tabletas y computadoras."],["Sin Wi-Fi, sin problema.","Foncione offline sin acesso al internet."],["Tus dados en todos tus dispositivos.","Sincronizar al nube automáticamente con remoteStorage o Fission."],["Flujo de trabajo eficiente.","Atajos de teclado para la mayoría de las cosas."],["Mueve los datos libremente.","Importar y exportar datos JSON (beta)"],["Blind-friendly.","Etiquetas de texto en todos los elementos."],["Privado, no creepy.","No hay análisis de comportamiento ni rastreadores inter-sitios."],["Ser dueno de tus datos.",'100% tuyo en una aplicación <a href="https://0data.app">Zero Data</a>.']],OLSKAppFeatureOpenSourceNameText:"Código aberto.",OLSKAppFeatureOpenSourceBlurbFormat:'El código es <a href="%@">público</a> para leer e modificar.'},en:{KVCWriteTemplateDataFieldText:"HTML",KVCWriteTemplateUpdateButtonText:"Update",KVCWriteDetailToolbarBackButtonText:"Back",KVCWriteDetailToolbarJumpButtonText:"Jump",KVCWriteDetailToolbarArchiveButtonText:"Archive",KVCWriteDetailToolbarUnarchiveButtonText:"Unarchive",KVCWriteDetailToolbarIsRootPageText:"(homepage)",KVCWriteDetailToolbarPublishButtonText:"Publish",KVCWriteDetailToolbarPublicLinkText:"Public",KVCWriteDetailToolbarRetractButtonText:"Retract",KVCWriteDetailToolbarDiscardButtonText:"Discard",KVCWriteDetailLauncherItemShowLocalVersionsText:"Show local versions",KVCWriteDetailLauncherItemCloneText:"Clone",KVCWriteDetailLauncherItemExportText:"Export note",KVCWriteDetailLauncherItemDebugText:"Debug note",KVCWriteDetailLauncherItemOpenPublicLinkText:"Open public link",KVCWriteDetailLauncherItemSetAsRootPageText:"Set as homepage",KVCWriteFilterFieldText:"Filter or create",KVCWriteCreateButtonText:"Create",KVCWriteEmptyNoteText:"Blank note",KVCWriteUntitledNoteText:"Untitled note",KVCWriteRevealArchiveButtonText:"Reveal archive",KVCWriteLauncherItemImportTXTText:"Import TXT (beta)",KVCWriteLauncherItemImportNVText:"Import Notational Velocity (beta)",KVCWriteLauncherItemExportZIPText:"Export ZIP (beta)",KVCWriteLauncherItemJournalText:"Journal",KVCWriteLauncherItemBacklinksText:"Backlinks",KVCWriteLauncherItemShowPublicNotesText:"Show public notes",KVCWriteLauncherItemPublishAllText:"Publish all previously published notes",KVCWriteLauncherItemRetractAllText:"Retract all public notes",KVCWriteLauncherItemConfigureCustomDomainText:"Configure custom domain name",KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText:"Copy the following root URL and paste it in your host configuration.",KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText:"What is your custom domain name?",KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText:"The domain name does not seem to be present. Would you like to try again?",KVCWriteLauncherItemRemoveCustomDomainText:"Remove custom domain name",KVCWriteLauncherItemConfigureCustomTemplateText:"Configure custom template",KVCWriteTemplateModalTitleText:"Custom template",KVCWriteLauncherItemRemoveCustomTemplateText:"Remove custom template",KVCWriteTitle:"Write",KVCWriteVersionsWord:"versions",KVCVitrineTitle:"Hyperdraft",KVCVitrineDescription:"Turn your text notes into a website.",OLSKLandingBlurbText:"A simple app for writing and publishing that's always with you.",KVCVitrineGlossaryWritingHeadingText:"Writing",KVCVitrineGlossaryWritingUsingLinkText:"How I use Hyperdraft for reference, writing, and publishing",KVCVitrineGlossaryWritingAnswerLinkText:"Writing creates a space for 'the answer to go'",KVCVitrineGlossaryWritingListsLinkText:"Lists are not synthesis",KVCVitrineGlossaryWritingDiscussionLinkText:"Discussion is ephemeral",KVCVitrineGlossaryWritingMagicLinkText:"Writing without magic",KVCVitrineGlossaryPublicHeadingText:"Open to the public",KVCVitrineGlossaryPublicRefLinkText:"My public notes",KVCVitrineGlossaryPublicRefBlurbText:"A space to write, collect, revise, and share.",KVCVitrineGlossaryPublicGardensLinkText:"Gardens made with Hyperdraft",KVCVitrineGlossaryPublicGardensBlurbText:"From friends and strangers.",KVCVitrineGlossaryPublicDigitalLinkText:"What is a digital garden?",KVCVitrineGlossaryPublicDigitalBlurbText:"Learn about a new form of non-chronological writing and publishing.",KVCVitrineGlossaryCompareHeadingText:"Compare",KVCVitrineGlossaryCompareSimplenoteLinkText:"Hyperdraft and Simplenote",KVCFeatureListArray:[["Network your ideas.","Link between notes via [[wiki]] syntax."],["Make a website.","Publish notes to the Internet with remoteStorage or Fission."]],KVCGuideTitle:"Hyperdraft Guide",KVCGuideDescription:"Documentation for project",KVCCompareSimplenoteTitle:"Hyperdraft and Simplenote",KVCCompareSimplenoteDescription:"A scrappy alternative more focused on making websites.",KVCCompareSimplenoteIntroText:"Simplenote has been around for a long time. The app's accessible and inviting aesthetic enables many people to take notes. Over time it has shifted focus from plaintext editing to checklists and richer text, and favours a proprietary link format over the comon double-bracket syntax.",KVCCompareSimplenoteContrastText:"Hyperdraft is for people who want to use their note-taking tool to make websites while keeping their hands on the keyboard. It speeds up the workflow with shortcuts and adds more advanced web publishing features. Plus you can own 100% of your data by storing notes in a place you control.",KVCCompareSimplenoteTableHeadingFeatureText:"Feature",KVCCompareSimplenoteFeatureList:{KVCCompareSimplenoteFeaturePlaintext:"plaintext editor",KVCCompareSimplenoteFeatureFirstLink:"first line is the title",KVCCompareSimplenoteFeatureMarkdown:"markdown support",KVCCompareSimplenoteFeatureSync:"sync across multiple devices",KVCCompareSimplenoteFeatureOpenSource:"open-source",KVCCompareSimplenoteFeatureOffline:"works offline",KVCCompareSimplenoteFeatureMobile:"works on mobile",KVCCompareSimplenoteFeatureShortcuts:"keyboard shortcuts",KVCCompareSimplenoteFeatureClick:"click links to go between notes",KVCCompareSimplenoteFeaturePublish:"publish notes to the Internet",KVCCompareSimplenoteFeatureCollaborate:"collaborate with other people",KVCCompareSimplenoteFeatureHomepage:"set homepage",KVCCompareSimplenoteFeatureDomain:"connect a custom domain",KVCCompareSimplenoteFeatureDoorless:"use without account",KVCCompareSimplenoteFeatureNotational:"import from Notational Velocity",KVCCompareSimplenoteFeatureSyntax:"double-bracket syntax",KVCCompareSimplenoteFeatureArchive:"archive notes",KVCCompareSimplenoteFeatureZeroData:"own your data"},KVCCompareSimplenoteFeatureListCaption:{KVCCompareSimplenoteFeatureShortcuts:["Sublime Text keyboard shortcuts, launcher commands, tab between list and current notes","basic shortcuts"],KVCCompareSimplenoteFeatureHomepage:["build a website from your notes"],KVCCompareSimplenoteFeatureDomain:["add your own flair when publishing"],KVCCompareSimplenoteFeatureDoorless:["just open and start using it"],KVCCompareSimplenoteFeatureSyntax:["compatible with Notational Velocity and other apps","proprietary format"],KVCCompareSimplenoteFeatureArchive:["hide notes you don't use often to tidy search results"],KVCCompareSimplenoteFeatureZeroData:["your data is 100% yours"]},KVCCompareSimplenoteActionHeadingText:"Try writing with Hyperdraft",ROCORootLinkText:"Visit rosano.ca",OLSKServiceWorkerUpdateAlertLabelText:"Update available",OLSKServiceWorkerUpdateAlertReloadButtonText:"Reload",OLSKServiceWorkerLauncherItemReloadText:"Reload",OLSKServiceWorkerLauncherItemDebugForceUpdateText:"Force update",OLSKRootLinkTextHome:"Return to the homepage",OLSKLanguageSwitcherVersionFormat:"Version in %@ / %@",OLSKLanguageSwitcherVersionName:{en:"English",fr:"French",es:"Spanish",pt:"Portuguese",de:"German"},KVCRootLinkText:"Home",KVCBacklinksHeadingText:"Links to this page",SWARLinkText:"Part of the Doorless App Ring",ROCOGlossaryHeadingText:"A new breed of apps",ROCOGlossaryDoorlessLinkText:"Doorless philosophy",ROCOGlossaryDoorlessBlurbText:"Apps as non-exclusionary public spaces.",ROCOGlossaryZeroDataLinkText:"Learn more about Zero Data apps",ROCOGlossaryZeroDataBlurbText:"Own your data, 100%",ROCOGlossaryGoingWebLinkText:"Going fully web",ROCOGlossaryGoingWebBlurbText:"Why I stopped making iOS apps after twelve years.",ROCOGlossaryAppsLinkText:"My other apps",ROCOGlossaryAppsBlurbText:"Tools for agency",OLSKWordingConfirmText:"Are you sure?",OLSKWordingOpenApp:"Open app",OLSKWordingFeatures:"Features",OLSKWordingOpenGuide:"See the guide",OLSKWordingDeeperHeading:"Go deeper",OLSKWordingVideo:"Video",OLSKWordingTestimonials:"Testimonials",OLSKWordingFeedbackHeading:"Feedback",OLSKWordingFeedbackBlurb:'From within the app, tap the ℹ︎ button, then select "Send feedback".',OLSKWordingTypeToSearch:"Type to search",OLSKWordingTypeToFilter:"Type to filter",OLSKWordingCancelText:"Cancel",OLSKWordingSubmitText:"Submit",OLSKWordingDownloadText:"Download",OLSKWordingEditText:"Edit",OLSKWordingDebugObjectText:"Debug this object",OLSKWebViewWindowButtonText:"Open in new window",OLSKTransportLauncherItemImportJSONText:"Import JSON (beta)",OLSKTransportLauncherItemImportJSONErrorNotFilledAlertText:"Input not filled",OLSKTransportLauncherItemImportJSONErrorNotValidAlertText:"Input not valid",OLSKTransportLauncherItemExportJSONText:"Export JSON (beta)",OLSKRemoteStorageConnectConfirmText:"Connect your cloud to continue. Would you like to do this now?",OLSKRemoteStorageLauncherItemOpenLoginLinkText:"Open access link",OLSKRemoteStorageLauncherItemOpenLoginLinkPromptText:"Access link",OLSKRemoteStorageLauncherItemCopyLoginLinkText:"Copy private access link",OLSKRemoteStorageLauncherItemDebugFlushDataText:"Flush data",OLSKRemoteStorageLauncherItemDebugFlushDataConfirmText:"Are you sure?",OLSKPlaceholderText:"No item selected",OLSKNarrowFilterFieldText:"Filter",OLSKInputWrapperClearButtonText:"Clear text",OLSKModalViewCloseButtonText:"Done",OLSKInstallAlertHeadingText:"Install on your device",OLSKInstallAlertBlurbHTMLFormat:"Tap <em>Share</em> %$1@, then <em>Add to Home Screen</em> %$2@",OLSKInstallAlertDismissButtonText:"Dismiss",OLSKEditText:"Edit this",OLSKCloudRenewButtonText:"Renew",OLSKCloudStatusSyncStartButtonText:"Sync",OLSKCloudStatusSyncStopButtonText:"Stop",OLSKCloudStatusDisconnectButtonText:"Disconnect",OLSKCloudStatusDisconnectConfirmText:"Are you sure?",OLSKCloudFormConnectButtonText:"Connect",OLSKCloudFormRegisterLinkText:"Get a cloud",OLSKCatalogMasterPlaceholderText:"Tap + to create an item.",OLSKCatalogStashPlaceholderTextFormat:"Items selected: %@",OLSKAproposHeadingText:"About",OLSKAproposFeedbackButtonText:"Send feedback",OLSKAproposShareButtonText:"Tell a friend",OLSKAppToolbarCloudStatusOnline:"Online",OLSKAppToolbarCloudStatusOffline:"Offline",OLSKAppToolbarCloudStatusError:"Error",OLSKAppToolbarAproposButtonText:"More info",OLSKAppToolbarLanguageButtonText:"Language",OLSKAppToolbarGuideLinkText:"Guide",OLSKAppToolbarFundButtonText:"Fund",OLSKAppToolbarClubButtonText:"Membership",OLSKAppToolbarLauncherButtonText:"Launcher",OLSKAppToolbarCloudButtonText:"Cloud",OLSKReloadButtonText:"Reload",OLSKAppFeatureListArray:[["Accessible anywhere.","Works on mobile, tablet, and desktop devices."],["No Wi-Fi, no problem.","Works offline without internet access."],["Your data on all your devices.","Automatic cloud sync with remoteStorage or Fission."],["Efficient workflow.","Keyboard shortcuts for most things."],["Move data freely.","Import and export JSON data (beta)."],["Blind-friendly.","Text labels on all elements."],["Private, not creepy.","No behavioural analytics or cross-site trackers."],["Own your data.",'100% yours in a <a href="https://0data.app">Zero Data</a> app.']],OLSKAppFeatureOpenSourceNameText:"Open-source.",OLSKAppFeatureOpenSourceBlurbFormat:'The code is <a href="%@">public</a> to read and modify.'},de:{ROCORootLinkText:"Besuchen rosano.ca",OLSKRootLinkTextHome:"Zurück zur Homepage",OLSKLanguageSwitcherVersionFormat:"Versão no %@ / %@",OLSKLanguageSwitcherVersionName:{en:"Englisch",fr:"Französisch",es:"Spanisch",pt:"Portugiesisch",de:"Deutsch"}},compilation:{"/Users/rozano/Mega/kvc/kvc-web/os-app/open-compare-simplenote/i18n.fr.yml":{KVCCompareSimplenoteTitle:"Hyperdraft et Simplenote",KVCCompareSimplenoteDescription:"Une alternative pour la création de sites web.",KVCCompareSimplenoteIntroText:"Simplenote existe depuis longtemps. L'esthétique accessible et conviviale de l'application permet à de nombreuses personnes de prendre des notes. Au fil du temps, elle a délaissé l'édition en texte brut au profit de listes de contrôle et de textes plus riches, et elle privilégie un format de lien propriétaire à la syntaxe à double crochet habituelle.",KVCCompareSimplenoteContrastText:"Hyperdraft est destiné aux personnes qui souhaitent utiliser leur outil de prise de notes pour créer des sites Web tout en gardant les mains sur le clavier. Il accélère le flux de travail grâce à des raccourcis et ajoute des fonctions de publication Web plus avancées. De plus, vous pouvez être propriétaire de 100 % de vos données en stockant vos notes dans un endroit que vous contrôlez.",KVCCompareSimplenoteTableHeadingFeatureText:"Fonctionnalité",KVCCompareSimplenoteFeatureList:{KVCCompareSimplenoteFeaturePlaintext:"éditeur de texte en clair",KVCCompareSimplenoteFeatureFirstLink:"la première ligne est le titre",KVCCompareSimplenoteFeatureMarkdown:"prise en charge de Markdown",KVCCompareSimplenoteFeatureSync:"synchronisation sur plusieurs appareils",KVCCompareSimplenoteFeatureOpenSource:"open-source",KVCCompareSimplenoteFeatureOffline:"fonctionne hors ligne",KVCCompareSimplenoteFeatureMobile:"fonctionne sur mobile",KVCCompareSimplenoteFeatureShortcuts:"raccourcis clavier",KVCCompareSimplenoteFeatureClick:"cliquer sur les liens entre les notes",KVCCompareSimplenoteFeaturePublish:"publiquer de notes sur l'Internet",KVCCompareSimplenoteFeatureCollaborate:"collaborer avec d'autres personnes",KVCCompareSimplenoteFeatureHomepage:"définir la page d'accueil",KVCCompareSimplenoteFeatureDomain:"ajouter d'un nom de domaine personnalisé",KVCCompareSimplenoteFeatureDoorless:"utiliser sans compte",KVCCompareSimplenoteFeatureNotational:"importer de Notational Velocity",KVCCompareSimplenoteFeatureSyntax:"syntaxe à double crochet",KVCCompareSimplenoteFeatureArchive:"archiver des notes",KVCCompareSimplenoteFeatureZeroData:"être propriétaire de vos données"},KVCCompareSimplenoteFeatureListCaption:{KVCCompareSimplenoteFeatureShortcuts:["raccourcis clavier de sublime text, commandes du lanceur, changer rapidement entre la liste et la note actuelle","raccourcis de base"],KVCCompareSimplenoteFeatureHomepage:["faire un siteweb à partir de vos notes"],KVCCompareSimplenoteFeatureDomain:["ajoutez votre propre style lors de la publication"],KVCCompareSimplenoteFeatureDoorless:["ouvrez-le et commencez à l'utiliser"],KVCCompareSimplenoteFeatureSyntax:["compatible avec Notational Velocity et d'autres applications","format propriétaire"],KVCCompareSimplenoteFeatureArchive:["cacher les notes que vous n'utilisez pas souvent pour ordonner les résultats de recherche"],KVCCompareSimplenoteFeatureZeroData:["vos données vous appartiennent à 100%"]},KVCCompareSimplenoteActionHeadingText:"Essayez d'écrire avec Hyperdraft"}}}[window.OLSKPublicConstants("OLSKSharedPageCurrentLanguage")])}});ae(le);var ue=le.OLSKLocalized,ce=se(function(e,t){!function(e){const t={OLSKThrottleIsValid:e=>"object"==typeof e&&null!==e&&"function"==typeof e.OLSKThrottleCallback&&"number"==typeof e.OLSKThrottleDuration,OLSKThrottleTimeoutFor(e){if(!t.OLSKThrottleIsValid(e))throw new Error("OLSKErrorInputNotValid");return e._OLSKThrottleTimeoutID&&clearTimeout(e._OLSKThrottleTimeoutID),e._OLSKThrottleTimeoutID=setTimeout(function(){t._OLSKThrottleFire(e)},e.OLSKThrottleDuration),e._OLSKThrottleTimeoutID},OLSKThrottleSkip(e){if(!t.OLSKThrottleIsValid(e))throw new Error("OLSKErrorInputNotValid");return clearTimeout(e._OLSKThrottleTimeoutID),t._OLSKThrottleFire(e)},_OLSKThrottleFire:e=>(delete e._OLSKThrottleTimeoutID,e.OLSKThrottleCallback()),OLSKThrottleMappedTimeout(e,r,o){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof r)throw new Error("OLSKErrorInputNotValid");if(!t.OLSKThrottleIsValid(o))throw new Error("OLSKErrorInputNotValid");return e[r]||(e[r]=Object.assign(Object.assign({},o),{OLSKThrottleCallback(){t._OLSKThrottleFire(o),delete e[r]}})),o._OLSKThrottleTimeoutID=t.OLSKThrottleTimeoutFor(e[r])}};Object.assign(e,t),Object.assign(e,t),Object.defineProperty(e,"__esModule",{value:!0})}(t)}),pe=ae(ce);function de(e){var t=new Error(e);return t.source="ulid",t}var he="0123456789ABCDEFGHJKMNPQRSTVWXYZ",me=Math.pow(2,48)-1;function fe(e){var t=Math.floor(32*e());return 32===t&&(t=31),he.charAt(t)}var Se,ge=(Se||(Se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var r=t&&(t.crypto||t.msCrypto);if(r)return function(){var e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};try{var o=require("crypto");return function(){return o.randomBytes(1).readUInt8()/255}}catch(e){}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(e){}return function(){return Math.random()}}throw de("secure crypto unusable, insecure Math.random not allowed")}()),function(e){return isNaN(e)&&(e=Date.now()),function(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>me)throw de("cannot encode time greater than "+me);if(e<0)throw de("time must be positive");if(!1===Number.isInteger(e))throw de("time must be an integer");for(var r=void 0,o="";t>0;t--)o=he.charAt(r=e%32)+o,e=(e-r)/32;return o}(e,10)+function(e,t){for(var r="";e>0;e--)r=fe(t)+r;return r}(16,Se)}),Ce=se(function(e,t){const r={OLSKRemoteStorageChangeDelegateConflictSelectRecent(e){if("conflict"!==e.origin)throw new Error("OLSKErrorInputNotValid");return Object.entries(e.oldValue).filter(function(t){return!!t[0].match("ModificationDate")&&t[1]>e.newValue[t[0]]}).length?e.oldValue:e.newValue},OLSKRemoteStorageIsCollection(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return"string"==typeof e.OLSKRemoteStorageCollectionName&&(!!e.OLSKRemoteStorageCollectionName.trim()&&("object"==typeof e.OLSKRemoteStorageCollectionExports&&null!==e.OLSKRemoteStorageCollectionExports))},_OLSKRemoteStorageIsPath(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return!!e.trim()},OLSKRemoteStorageSafeCopy:e=>Object.keys(e).reduce(function(t,r){return"$"!==r[0]&&(t[r]=e[r]),t},{}),OLSKRemoteStoragePostJSONParse(e){if(!e)return e;if(Array.isArray(e))return e.map(r.OLSKRemoteStoragePostJSONParse);for(const t in e)"Date"===t.slice(-4)?e[t]=new Date(e[t]):Array.isArray(e[t])?e[t].map(r.OLSKRemoteStoragePostJSONParse):"object"==typeof e[t]&&r.OLSKRemoteStoragePostJSONParse(e[t]);return e},OLSKRemoteStorageQueryFunction(e,t,r,o){if("function"!=typeof e||!e.prototype)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof t||null===t||!t.name)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof r)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof o)throw new Error("OLSKErrorInputNotValid");return function(n){if("function"!=typeof n)throw new Error("OLSKErrorInputNotValid");const i=new e({cache:!1,modules:[t]});return i.access.claim(t.name,"rw"),i.stopSync(),new Promise(function(e,t){let a,s;i.on("error",function(e){if(!a)return a=!0,t(e)}),i.on("connected",async function(){try{s=await n(i)}catch(e){return a=!0,t(e)}return e(s),i.disconnect()}),i.connect(r,o)})}},OLSKRemoteStorageLauncherFakeItemProxy:()=>({LCHRecipeName:"OLSKRemoteStorageLauncherFakeItemProxy",LCHRecipeCallback(){}}),OLSKRemoteStorageLauncherItemFakeFlipConnected(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"OLSKRemoteStorageLauncherItemFakeFlipConnected",LCHRecipeCallback(){if(e.__ValueOLSKRemoteStorage)return e._ValueOLSKRemoteStorage=e.__ValueOLSKRemoteStorage,delete e.__ValueOLSKRemoteStorage,e.OLSKRemoteStorageLauncherItemFakeFlipConnectedDidFinish();e.__ValueOLSKRemoteStorage=e._ValueOLSKRemoteStorage,e._ValueOLSKRemoteStorage=(e.__ValueOLSKRemoteStorage.access.scopes||[]).reduce(function(t,r){return Object.assign(t,{[r.name]:e.__ValueOLSKRemoteStorage[r.name]})},Object.assign({},e.__ValueOLSKRemoteStorage)),e._ValueOLSKRemoteStorage.connected=!0,e._ValueOLSKRemoteStorage.remote=Object.assign(e._ValueOLSKRemoteStorage.remote,{userAddress:"OLSK_REMOTE_STORAGE_FAKE_REMOTE_ADDRESS",token:"OLSK_REMOTE_STORAGE_FAKE_REMOTE_TOKEN"}),e.OLSKRemoteStorageLauncherItemFakeFlipConnectedDidFinish(),"undefined"!=typeof window&&(window.FakeOLSKConnected=!0)}}},OLSKRemoteStorageLauncherItemOpenLoginLink(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if(!e.ParamStorage.remote)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKRemoteStorageLauncherItemOpenLoginLink",LCHRecipeName:e.OLSKLocalized("OLSKRemoteStorageLauncherItemOpenLoginLinkText"),LCHRecipeCallback(){const r=(t.DebugWindow||window).prompt(e.OLSKLocalized("OLSKRemoteStorageLauncherItemOpenLoginLinkPromptText"));r&&((t.DebugWindow||window).location.href=r,(t.DebugWindow||window).location.reload())},LCHRecipeIsExcluded:()=>!!e.ParamStorage.connected}},OLSKRemoteStorageLauncherItemCopyLoginLink(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if(!e.ParamStorage.remote)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKRemoteStorageLauncherItemCopyLoginLink",LCHRecipeName:e.OLSKLocalized("OLSKRemoteStorageLauncherItemCopyLoginLinkText"),LCHRecipeCallback(){return this.api.LCHCopyToClipboard(`${(t.DebugWindow||window).location.href}#remotestorage=${e.ParamStorage.remote.userAddress}&access_token=${e.ParamStorage.remote.token}`.replace(/#+/g,"#"))},LCHRecipeIsExcluded:()=>!e.ParamStorage.connected}},OLSKRemoteStorageLauncherItemDebugFlushData(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if(!e.ParamStorage.remote)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKRemoteStorageLauncherItemDebugFlushData",LCHRecipeName:e.OLSKLocalized("OLSKRemoteStorageLauncherItemDebugFlushDataText"),async LCHRecipeCallback(){if((t.DebugWindow||window).confirm(e.OLSKLocalized("OLSKRemoteStorageLauncherItemDebugFlushDataConfirmText")))return await Promise.all(Object.getOwnPropertyNames(e.ParamStorage).filter(function(t){return e.ParamStorage[t].__HOTFIX}).map(function(t){return e.ParamStorage[t].__HOTFIX.__OLSKRemoteStorageHotfixFlushData()})),new Promise(function(e,r){setTimeout(function(){e((t.DebugWindow||window).location.reload())},1e3)})},LCHRecipeIsExcluded:()=>!e.ParamStorage.connected}},OLSKRemoteStorageRecipes(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamMod||null===e.ParamMod)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamSpecUI)throw new Error("OLSKErrorInputNotValid");return[r.OLSKRemoteStorageLauncherFakeItemProxy(),r.OLSKRemoteStorageLauncherItemFakeFlipConnected(e.ParamMod),r.OLSKRemoteStorageLauncherItemOpenLoginLink(e),r.OLSKRemoteStorageLauncherItemCopyLoginLink(e),r.OLSKRemoteStorageLauncherItemDebugFlushData(e)].filter(function(t){return!!e.ParamSpecUI||!(t.LCHRecipeSignature||t.LCHRecipeName).match(/Fake/)})}};Object.assign(t,r)}),De=se(function(e,t){!function(e){const t={OLSKStringFormatted(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");var r=Object.values(arguments).slice(1);if(!r.length)return e;var o=e;return(e.match(/%@/g)||[]).forEach(function(e,t){o=o.replace(e,r[t])}),t._OLSKStringAllMatches(/%\$(\d*)@/g,e).forEach(function(e){o=o.replace(e[0],r[e[1]-1])}),o},_OLSKStringAllMatches(e,t){for(var r=[],o=e.exec(t);null!=o;)r.push(o),o=e.exec(t);return r},OLSKStringReplaceTokens(e,t){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("OLSKErrorInputNotValid");return Object.entries(t).reduce(function(e,t){return e.replace(new RegExp(t.shift(),"g"),t.pop())},e)},OLSKStringPatch(e,t,r){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof r)throw new Error("OLSKErrorInputNotValid");if(!e.includes(t)&&!e.includes(r))throw console.error(`source includes neither of "${t}" or "${r}"`),new Error("OLSKErrorInputNotValid");if(r.includes(t))throw new Error("OLSKErrorInputNotValid");return e.split(t).join(r)},OLSKStringMatch(e,t,r="includes"){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");if(void 0!==r&&"string"!=typeof r)throw new Error("OLSKErrorInputNotValid");return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")[r](e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))},OLSKStringSnippet(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return e.length<=100?e:e.slice(0,100).split(" ").slice(0,-1).join(" ").concat("…")},OLSKStringEncode(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return t.OLSKStringReplaceTokens(encodeURIComponent(e),{"\\(":"%28","\\)":"%29"})}};Object.assign(e,t),Object.defineProperty(e,"__esModule",{value:!0})}(t),t.OLSKFormatted=t.OLSKStringFormatted}),Ke=ae(De),Le=De.OLSKFormatted,Oe=se(function(e,t){!function(e){function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o.apply(this,arguments)}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e){var t=s(e,"string");return"symbol"==typeof t?t:String(t)}var u=0;function c(e){return"__private_"+u+++"_"+e}function p(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}function d(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function h(t){e.defaults=t}e.defaults=d();var m=/[&<>"']/,f=new RegExp(m.source,"g"),S=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,g=new RegExp(S.source,"g"),C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D=function(e){return C[e]};function K(e,t){if(t){if(m.test(e))return e.replace(f,D)}else if(S.test(e))return e.replace(g,D);return e}var L=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function O(e){return e.replace(L,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var y=/(^|[^\[])\^/g;function b(e,t){e="string"==typeof e?e:e.source,t=t||"";var r={replace:function(t,o){return o=(o=o.source||o).replace(y,"$1"),e=e.replace(t,o),r},getRegex:function(){return new RegExp(e,t)}};return r}var w=/[^\w:]/g,v=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V(e,t,r){if(e){var o;try{o=decodeURIComponent(O(r)).replace(w,"").toLowerCase()}catch(e){return null}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return null}t&&!v.test(r)&&(r=_(t,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(e){return null}return r}var T={},E=/^[^:]+:\/*[^/]*$/,I=/^([^:]+:)[\s\S]*$/,k=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _(e,t){T[" "+e]||(E.test(e)?T[" "+e]=e+"/":T[" "+e]=P(e,"/",!0));var r=-1===(e=T[" "+e]).indexOf(":");return"//"===t.substring(0,2)?r?t:e.replace(I,"$1")+t:"/"===t.charAt(0)?r?t:e.replace(k,"$1")+t:e+t}var x={exec:function(){}};function R(e,t){var r=e.replace(/\|/g,function(e,t,r){for(var o=!1,n=t;--n>=0&&"\\"===r[n];)o=!o;return o?"|":" |"}).split(/ \|/),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function P(e,t,r){var o=e.length;if(0===o)return"";for(var n=0;n<o;){var i=e.charAt(o-n-1);if(i!==t||r){if(i===t||!r)break;n++}else n++}return e.slice(0,o-n)}function A(e,t){if(-1===e.indexOf(t[1]))return-1;for(var r=e.length,o=0,n=0;n<r;n++)if("\\"===e[n])n++;else if(e[n]===t[0])o++;else if(e[n]===t[1]&&--o<0)return n;return-1}function F(e,t){e&&!e.silent&&(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||"language-"!==e.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function N(e,t,r,o){var n=t.href,i=t.title?K(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){o.state.inLink=!0;var s={type:"link",raw:r,href:n,title:i,text:a,tokens:o.inlineTokens(a)};return o.state.inLink=!1,s}return{type:"image",raw:r,href:n,title:i,text:K(a)}}function W(e,t){var r=e.match(/^(\s+)(?:```)/);if(null===r)return t;var o=r[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=o.length?e.slice(o.length):e}).join("\n")}var B=function(){function t(t){this.options=t||e.defaults}var r=t.prototype;return r.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},r.code=function(e){var t=this.rules.block.code.exec(e);if(t){var r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:P(r,"\n")}}},r.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var r=t[0],o=W(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:o}}},r.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var r=t[2].trim();if(/#$/.test(r)){var o=P(r,"#");this.options.pedantic?r=o.trim():o&&!/ $/.test(o)||(r=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}},r.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},r.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var r=t[0].replace(/^ *>[ \t]?/gm,""),o=this.lexer.state.top;this.lexer.state.top=!0;var n=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:t[0],tokens:n,text:r}}},r.list=function(e){var t=this.rules.block.list.exec(e);if(t){var r,o,n,i,a,s,l,u,c,p,d,h,m=t[1].trim(),f=m.length>1,S={type:"list",raw:"",ordered:f,start:f?+m.slice(0,-1):"",loose:!1,items:[]};m=f?"\\d{1,9}\\"+m.slice(-1):"\\"+m,this.options.pedantic&&(m=f?m:"[*+-]");for(var g=new RegExp("^( {0,3}"+m+")((?:[\t ][^\\n]*)?(?:\\n|$))");e&&(h=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(r=t[0],e=e.substring(r.length),u=t[2].split("\n",1)[0].replace(/^\t+/,function(e){return" ".repeat(3*e.length)}),c=e.split("\n",1)[0],this.options.pedantic?(i=2,d=u.trimLeft()):(i=(i=t[2].search(/[^ ]/))>4?1:i,d=u.slice(i),i+=t[1].length),s=!1,!u&&/^ *$/.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),h=!0),!h)for(var C=new RegExp("^ {0,"+Math.min(3,i-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))"),D=new RegExp("^ {0,"+Math.min(3,i-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),K=new RegExp("^ {0,"+Math.min(3,i-1)+"}(?:```|~~~)"),L=new RegExp("^ {0,"+Math.min(3,i-1)+"}#");e&&(c=p=e.split("\n",1)[0],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!K.test(c))&&!L.test(c)&&!C.test(c)&&!D.test(e);){if(c.search(/[^ ]/)>=i||!c.trim())d+="\n"+c.slice(i);else{if(s)break;if(u.search(/[^ ]/)>=4)break;if(K.test(u))break;if(L.test(u))break;if(D.test(u))break;d+="\n"+c}s||c.trim()||(s=!0),r+=p+"\n",e=e.substring(p.length+1),u=c.slice(i)}S.loose||(l?S.loose=!0:/\n *\n *$/.test(r)&&(l=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(d))&&(n="[ ] "!==o[0],d=d.replace(/^\[[ xX]\] +/,"")),S.items.push({type:"list_item",raw:r,task:!!o,checked:n,loose:!1,text:d}),S.raw+=r}S.items[S.items.length-1].raw=r.trimRight(),S.items[S.items.length-1].text=d.trimRight(),S.raw=S.raw.trimRight();var O=S.items.length;for(a=0;a<O;a++)if(this.lexer.state.top=!1,S.items[a].tokens=this.lexer.blockTokens(S.items[a].text,[]),!S.loose){var y=S.items[a].tokens.filter(function(e){return"space"===e.type}),b=y.length>0&&y.some(function(e){return/\n.*\n/.test(e.raw)});S.loose=b}if(S.loose)for(a=0;a<O;a++)S.items[a].loose=!0;return S}},r.html=function(e){var t=this.rules.block.html.exec(e);if(t){var r={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var o=this.options.sanitizer?this.options.sanitizer(t[0]):K(t[0]);r.type="paragraph",r.text=o,r.tokens=this.lexer.inline(o)}return r}},r.def=function(e){var t=this.rules.block.def.exec(e);if(t){var r=t[1].toLowerCase().replace(/\s+/g," "),o=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:o,title:n}}},r.table=function(e){var t=this.rules.block.table.exec(e);if(t){var r={type:"table",header:R(t[1]).map(function(e){return{text:e}}),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];var o,n,i,a,s=r.align.length;for(o=0;o<s;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(s=r.rows.length,o=0;o<s;o++)r.rows[o]=R(r.rows[o],r.header.length).map(function(e){return{text:e}});for(s=r.header.length,n=0;n<s;n++)r.header[n].tokens=this.lexer.inline(r.header[n].text);for(s=r.rows.length,n=0;n<s;n++)for(a=r.rows[n],i=0;i<a.length;i++)a[i].tokens=this.lexer.inline(a[i].text);return r}}},r.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},r.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var r="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}},r.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},r.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:K(t[1])}},r.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):K(t[0]):t[0]}},r.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;var o=P(r.slice(0,-1),"\\");if((r.length-o.length)%2==0)return}else{var n=A(t[2],"()");if(n>-1){var i=(0===t[0].indexOf("!")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,i).trim(),t[3]=""}}var a=t[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(r)?a.slice(1):a.slice(1,-1)),N(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0],this.lexer)}},r.reflink=function(e,t){var r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){var o=(r[2]||r[1]).replace(/\s+/g," ");if(!(o=t[o.toLowerCase()])){var n=r[0].charAt(0);return{type:"text",raw:n,text:n}}return N(r,o,r[0],this.lexer)}},r.emStrong=function(e,t,r){void 0===r&&(r="");var o=this.rules.inline.emStrong.lDelim.exec(e);if(o&&(!o[3]||!r.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/))&&(!o[1]&&!o[2]||!r||this.rules.inline.punctuation.exec(r))){var n,i,a=o[0].length-1,s=a,l=0,u="*"===o[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(o=u.exec(t));)if(n=o[1]||o[2]||o[3]||o[4]||o[5]||o[6])if(i=n.length,o[3]||o[4])s+=i;else if(!((o[5]||o[6])&&a%3)||(a+i)%3){if(!((s-=i)>0)){i=Math.min(i,i+s+l);var c=e.slice(0,a+o.index+i+1);if(Math.min(a,i)%2){var p=c.slice(1,-1);return{type:"em",raw:c,text:p,tokens:this.lexer.inlineTokens(p)}}var d=c.slice(2,-2);return{type:"strong",raw:c,text:d,tokens:this.lexer.inlineTokens(d)}}}else l+=i}},r.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var r=t[2].replace(/\n/g," "),o=/[^ ]/.test(r),n=/^ /.test(r)&&/ $/.test(r);return o&&n&&(r=r.substring(1,r.length-1)),r=K(r,!0),{type:"codespan",raw:t[0],text:r}}},r.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},r.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},r.autolink=function(e,t){var r,o,n=this.rules.inline.autolink.exec(e);if(n)return o="@"===n[2]?"mailto:"+(r=K(this.options.mangle?t(n[1]):n[1])):r=K(n[1]),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}},r.url=function(e,t){var r;if(r=this.rules.inline.url.exec(e)){var o,n;if("@"===r[2])n="mailto:"+(o=K(this.options.mangle?t(r[0]):r[0]));else{var i;do{i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(i!==r[0]);o=K(r[0]),n="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:o,href:n,tokens:[{type:"text",raw:o,text:o}]}}},r.inlineText=function(e,t){var r,o=this.rules.inline.text.exec(e);if(o)return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):K(o[0]):o[0]:K(this.options.smartypants?t(o[0]):o[0]),{type:"text",raw:o[0],text:r}},t}(),M={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:x,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};M.def=b(M.def).replace("label",M._label).replace("title",M._title).getRegex(),M.bullet=/(?:[*+-]|\d{1,9}[.)])/,M.listItemStart=b(/^( *)(bull) */).replace("bull",M.bullet).getRegex(),M.list=b(M.list).replace(/bull/g,M.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+M.def.source+")").getRegex(),M._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",M._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,M.html=b(M.html,"i").replace("comment",M._comment).replace("tag",M._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),M.lheading=b(M.lheading).replace(/bull/g,M.bullet).getRegex(),M.paragraph=b(M._paragraph).replace("hr",M.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex(),M.blockquote=b(M.blockquote).replace("paragraph",M.paragraph).getRegex(),M.normal=o({},M),M.gfm=o({},M.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),M.gfm.table=b(M.gfm.table).replace("hr",M.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex(),M.gfm.paragraph=b(M._paragraph).replace("hr",M.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",M.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex(),M.pedantic=o({},M.normal,{html:b("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",M._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:x,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:b(M.normal._paragraph).replace("hr",M.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",M.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var j={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:x,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:x,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};function Z(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function U(e){var t,r,o="",n=e.length;for(t=0;t<n;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),o+="&#"+r+";";return o}j._punctuation="\\p{P}$+<=>`^|~",j.punctuation=b(j.punctuation,"u").replace(/punctuation/g,j._punctuation).getRegex(),j.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,j.anyPunctuation=/\\[punct]/g,j._escapes=/\\([punct])/g,j._comment=b(M._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),j.emStrong.lDelim=b(j.emStrong.lDelim,"u").replace(/punct/g,j._punctuation).getRegex(),j.emStrong.rDelimAst=b(j.emStrong.rDelimAst,"gu").replace(/punct/g,j._punctuation).getRegex(),j.emStrong.rDelimUnd=b(j.emStrong.rDelimUnd,"gu").replace(/punct/g,j._punctuation).getRegex(),j.anyPunctuation=b(j.anyPunctuation,"gu").replace(/punct/g,j._punctuation).getRegex(),j._escapes=b(j._escapes,"gu").replace(/punct/g,j._punctuation).getRegex(),j._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,j._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,j.autolink=b(j.autolink).replace("scheme",j._scheme).replace("email",j._email).getRegex(),j._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,j.tag=b(j.tag).replace("comment",j._comment).replace("attribute",j._attribute).getRegex(),j._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,j._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,j._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,j.link=b(j.link).replace("label",j._label).replace("href",j._href).replace("title",j._title).getRegex(),j.reflink=b(j.reflink).replace("label",j._label).replace("ref",M._label).getRegex(),j.nolink=b(j.nolink).replace("ref",M._label).getRegex(),j.reflinkSearch=b(j.reflinkSearch,"g").replace("reflink",j.reflink).replace("nolink",j.nolink).getRegex(),j.normal=o({},j),j.pedantic=o({},j.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:b(/^!?\[(label)\]\((.*?)\)/).replace("label",j._label).getRegex(),reflink:b(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",j._label).getRegex()}),j.gfm=o({},j.normal,{escape:b(j.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),j.gfm.url=b(j.gfm.url,"i").replace("email",j.gfm._extended_email).getRegex(),j.breaks=o({},j.gfm,{br:b(j.br).replace("{2,}","*").getRegex(),text:b(j.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var $=function(){function t(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new B,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var r={block:M.normal,inline:j.normal};this.options.pedantic?(r.block=M.pedantic,r.inline=j.pedantic):this.options.gfm&&(r.block=M.gfm,this.options.breaks?r.inline=j.breaks:r.inline=j.gfm),this.tokenizer.rules=r}t.lex=function(e,r){return new t(r).lex(e)},t.lexInline=function(e,r){return new t(r).inlineTokens(e)};var o=t.prototype;return o.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},o.blockTokens=function(e,t){var r,o,n,i,a=this;void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,function(e,t,r){return t+"    ".repeat(r.length)});for(var s=function(){if(a.options.extensions&&a.options.extensions.block&&a.options.extensions.block.some(function(o){return!!(r=o.call({lexer:a},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)}))return"continue";if(r=a.tokenizer.space(e))return e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r),"continue";if(r=a.tokenizer.code(e))return e=e.substring(r.raw.length),!(o=t[t.length-1])||"paragraph"!==o.type&&"text"!==o.type?t.push(r):(o.raw+="\n"+r.raw,o.text+="\n"+r.text,a.inlineQueue[a.inlineQueue.length-1].src=o.text),"continue";if(r=a.tokenizer.fences(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.heading(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.hr(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.blockquote(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.list(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.html(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.def(e))return e=e.substring(r.raw.length),!(o=t[t.length-1])||"paragraph"!==o.type&&"text"!==o.type?a.tokens.links[r.tag]||(a.tokens.links[r.tag]={href:r.href,title:r.title}):(o.raw+="\n"+r.raw,o.text+="\n"+r.raw,a.inlineQueue[a.inlineQueue.length-1].src=o.text),"continue";if(r=a.tokenizer.table(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=a.tokenizer.lheading(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(n=e,a.options.extensions&&a.options.extensions.startBlock){var s,l=1/0,u=e.slice(1);a.options.extensions.startBlock.forEach(function(e){"number"==typeof(s=e.call({lexer:this},u))&&s>=0&&(l=Math.min(l,s))}),l<1/0&&l>=0&&(n=e.substring(0,l+1))}if(a.state.top&&(r=a.tokenizer.paragraph(n)))return o=t[t.length-1],i&&"paragraph"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,a.inlineQueue.pop(),a.inlineQueue[a.inlineQueue.length-1].src=o.text):t.push(r),i=n.length!==e.length,e=e.substring(r.raw.length),"continue";if(r=a.tokenizer.text(e))return e=e.substring(r.raw.length),(o=t[t.length-1])&&"text"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,a.inlineQueue.pop(),a.inlineQueue[a.inlineQueue.length-1].src=o.text):t.push(r),"continue";if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(a.options.silent)return console.error(c),"break";throw new Error(c)}};e;){var l=s();if("continue"!==l&&"break"===l)break}return this.state.top=!0,t},o.inline=function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t},o.inlineTokens=function(e,t){var r,o,n,i=this;void 0===t&&(t=[]);var a,s,l,u=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(u));)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(u));)u=u.slice(0,a.index)+"++"+u.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(var p=function(){if(s||(l=""),s=!1,i.options.extensions&&i.options.extensions.inline&&i.options.extensions.inline.some(function(o){return!!(r=o.call({lexer:i},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)}))return"continue";if(r=i.tokenizer.escape(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.tag(e))return e=e.substring(r.raw.length),(o=t[t.length-1])&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r),"continue";if(r=i.tokenizer.link(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.reflink(e,i.tokens.links))return e=e.substring(r.raw.length),(o=t[t.length-1])&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r),"continue";if(r=i.tokenizer.emStrong(e,u,l))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.codespan(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.br(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.del(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=i.tokenizer.autolink(e,U))return e=e.substring(r.raw.length),t.push(r),"continue";if(!i.state.inLink&&(r=i.tokenizer.url(e,U)))return e=e.substring(r.raw.length),t.push(r),"continue";if(n=e,i.options.extensions&&i.options.extensions.startInline){var a,c=1/0,p=e.slice(1);i.options.extensions.startInline.forEach(function(e){"number"==typeof(a=e.call({lexer:this},p))&&a>=0&&(c=Math.min(c,a))}),c<1/0&&c>=0&&(n=e.substring(0,c+1))}if(r=i.tokenizer.inlineText(n,Z))return e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(l=r.raw.slice(-1)),s=!0,(o=t[t.length-1])&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r),"continue";if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(i.options.silent)return console.error(d),"break";throw new Error(d)}};e;){var d=p();if("continue"!==d&&"break"===d)break}return t},r(t,null,[{key:"rules",get:function(){return{block:M,inline:j}}}]),t}(),H=function(){function t(t){this.options=t||e.defaults}var r=t.prototype;return r.code=function(e,t,r){var o=(t||"").match(/\S*/)[0];if(this.options.highlight){var n=this.options.highlight(e,o);null!=n&&n!==e&&(r=!0,e=n)}return e=e.replace(/\n$/,"")+"\n",o?'<pre><code class="'+this.options.langPrefix+K(o)+'">'+(r?e:K(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:K(e,!0))+"</code></pre>\n"},r.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.html=function(e,t){return e},r.heading=function(e,t,r,o){return this.options.headerIds?"<h"+t+' id="'+(this.options.headerPrefix+o.slug(r))+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.list=function(e,t,r){var o=t?"ol":"ul";return"<"+o+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+o+">\n"},r.listitem=function(e){return"<li>"+e+"</li>\n"},r.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.paragraph=function(e){return"<p>"+e+"</p>\n"},r.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.tablecell=function(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"},r.strong=function(e){return"<strong>"+e+"</strong>"},r.em=function(e){return"<em>"+e+"</em>"},r.codespan=function(e){return"<code>"+e+"</code>"},r.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.del=function(e){return"<del>"+e+"</del>"},r.link=function(e,t,r){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return r;var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+r+"</a>"},r.image=function(e,t,r){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return r;var o='<img src="'+e+'" alt="'+r+'"';return t&&(o+=' title="'+t+'"'),o+=this.options.xhtml?"/>":">"},r.text=function(e){return e},t}(),G=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,r){return""+r},t.image=function(e,t,r){return""+r},t.br=function(){return""},e}(),z=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var r=e,o=0;if(this.seen.hasOwnProperty(r)){o=this.seen[e];do{r=e+"-"+ ++o}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=o,this.seen[r]=0),r},t.slug=function(e,t){void 0===t&&(t={});var r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)},e}(),q=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new H,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new G,this.slugger=new z}t.parse=function(e,r){return new t(r).parse(e)},t.parseInline=function(e,r){return new t(r).parseInline(e)};var r=t.prototype;return r.parse=function(e,t){void 0===t&&(t=!0);var r,o,n,i,a,s,l,u,c,p,d,h,m,f,S,g,C,D,K,L="",y=e.length;for(r=0;r<y;r++)if(p=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type])||!1===(K=this.options.extensions.renderers[p.type].call({parser:this},p))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))switch(p.type){case"space":continue;case"hr":L+=this.renderer.hr();continue;case"heading":L+=this.renderer.heading(this.parseInline(p.tokens),p.depth,O(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":L+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(u="",l="",i=p.header.length,o=0;o<i;o++)l+=this.renderer.tablecell(this.parseInline(p.header[o].tokens),{header:!0,align:p.align[o]});for(u+=this.renderer.tablerow(l),c="",i=p.rows.length,o=0;o<i;o++){for(l="",a=(s=p.rows[o]).length,n=0;n<a;n++)l+=this.renderer.tablecell(this.parseInline(s[n].tokens),{header:!1,align:p.align[n]});c+=this.renderer.tablerow(l)}L+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(p.tokens),L+=this.renderer.blockquote(c);continue;case"list":for(d=p.ordered,h=p.start,m=p.loose,i=p.items.length,c="",o=0;o<i;o++)g=(S=p.items[o]).checked,C=S.task,f="",S.task&&(D=this.renderer.checkbox(g),m?S.tokens.length>0&&"paragraph"===S.tokens[0].type?(S.tokens[0].text=D+" "+S.tokens[0].text,S.tokens[0].tokens&&S.tokens[0].tokens.length>0&&"text"===S.tokens[0].tokens[0].type&&(S.tokens[0].tokens[0].text=D+" "+S.tokens[0].tokens[0].text)):S.tokens.unshift({type:"text",text:D}):f+=D),f+=this.parse(S.tokens,m),c+=this.renderer.listitem(f,C,g);L+=this.renderer.list(c,d,h);continue;case"html":L+=this.renderer.html(p.text,p.block);continue;case"paragraph":L+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(c=p.tokens?this.parseInline(p.tokens):p.text;r+1<y&&"text"===e[r+1].type;)c+="\n"+((p=e[++r]).tokens?this.parseInline(p.tokens):p.text);L+=t?this.renderer.paragraph(c):c;continue;default:var b='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(b);throw new Error(b)}else L+=K||"";return L},r.parseInline=function(e,t){t=t||this.renderer;var r,o,n,i="",a=e.length;for(r=0;r<a;r++)if(o=e[r],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type])||!1===(n=this.options.extensions.renderers[o.type].call({parser:this},o))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))switch(o.type){case"escape":case"text":i+=t.text(o.text);break;case"html":i+=t.html(o.text);break;case"link":i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":i+=t.image(o.href,o.title,o.text);break;case"strong":i+=t.strong(this.parseInline(o.tokens,t));break;case"em":i+=t.em(this.parseInline(o.tokens,t));break;case"codespan":i+=t.codespan(o.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(o.tokens,t));break;default:var s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else i+=n||"";return i},t}(),J=function(){function t(t){this.options=t||e.defaults}var r=t.prototype;return r.preprocess=function(e){return e},r.postprocess=function(e){return e},t}();J.passThroughHooks=new Set(["preprocess","postprocess"]);var Y=c("parseMarkdown"),Q=c("onError"),X=function(){function e(){Object.defineProperty(this,Q,{value:te}),Object.defineProperty(this,Y,{value:ee}),this.defaults=d(),this.options=this.setOptions,this.parse=p(this,Y)[Y]($.lex,q.parse),this.parseInline=p(this,Y)[Y]($.lexInline,q.parseInline),this.Parser=q,this.parser=q.parse,this.Renderer=H,this.TextRenderer=G,this.Lexer=$,this.lexer=$.lex,this.Tokenizer=B,this.Slugger=z,this.Hooks=J,this.use.apply(this,arguments)}var t=e.prototype;return t.walkTokens=function(e,t){for(var r,o=this,n=[],i=function(){var e=r.value;switch(n=n.concat(t.call(o,e)),e.type){case"table":for(var i,s=a(e.header);!(i=s()).done;){var l=i.value;n=n.concat(o.walkTokens(l.tokens,t))}for(var u,c=a(e.rows);!(u=c()).done;)for(var p,d=a(u.value);!(p=d()).done;){var h=p.value;n=n.concat(o.walkTokens(h.tokens,t))}break;case"list":n=n.concat(o.walkTokens(e.items,t));break;default:o.defaults.extensions&&o.defaults.extensions.childTokens&&o.defaults.extensions.childTokens[e.type]?o.defaults.extensions.childTokens[e.type].forEach(function(r){n=n.concat(o.walkTokens(e[r],t))}):e.tokens&&(n=n.concat(o.walkTokens(e.tokens,t)))}},s=a(e);!(r=s()).done;)i();return n},t.use=function(){for(var e=this,t=this.defaults.extensions||{renderers:{},childTokens:{}},r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.forEach(function(r){var n=o({},r);if(n.async=e.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var r=t.renderers[e.name];t.renderers[e.name]=r?function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];var i=e.renderer.apply(this,o);return!1===i&&(i=r.apply(this,o)),i}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");t[e.level]?t[e.level].unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),r.renderer){var i=e.defaults.renderer||new H(e.defaults),a=function(e){var t=i[e];i[e]=function(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];var s=r.renderer[e].apply(i,n);return!1===s&&(s=t.apply(i,n)),s}};for(var s in r.renderer)a(s);n.renderer=i}if(r.tokenizer){var l=e.defaults.tokenizer||new B(e.defaults),u=function(e){var t=l[e];l[e]=function(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];var a=r.tokenizer[e].apply(l,n);return!1===a&&(a=t.apply(l,n)),a}};for(var c in r.tokenizer)u(c);n.tokenizer=l}if(r.hooks){var p=e.defaults.hooks||new J,d=function(t){var o=p[t];J.passThroughHooks.has(t)?p[t]=function(n){if(e.defaults.async)return Promise.resolve(r.hooks[t].call(p,n)).then(function(e){return o.call(p,e)});var i=r.hooks[t].call(p,n);return o.call(p,i)}:p[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=r.hooks[t].apply(p,n);return!1===a&&(a=o.apply(p,n)),a}};for(var h in r.hooks)d(h);n.hooks=p}if(r.walkTokens){var m=e.defaults.walkTokens;n.walkTokens=function(e){var t=[];return t.push(r.walkTokens.call(this,e)),m&&(t=t.concat(m.call(this,e))),t}}e.defaults=o({},e.defaults,n)}),this},t.setOptions=function(e){return this.defaults=o({},this.defaults,e),this},e}();function ee(e,t){var r=this;return function(n,i,a){"function"==typeof i&&(a=i,i=null);var s=o({},i);i=o({},r.defaults,s);var l=p(r,Q)[Q](i.silent,i.async,a);if(null==n)return l(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(F(i,a),i.hooks&&(i.hooks.options=i),a){var u,c=i.highlight;try{i.hooks&&(n=i.hooks.preprocess(n)),u=e(n,i)}catch(e){return l(e)}var d=function(e){var o;if(!e)try{i.walkTokens&&r.walkTokens(u,i.walkTokens),o=t(u,i),i.hooks&&(o=i.hooks.postprocess(o))}catch(t){e=t}return i.highlight=c,e?l(e):a(null,o)};if(!c||c.length<3)return d();if(delete i.highlight,!u.length)return d();var h=0;return r.walkTokens(u,function(e){"code"===e.type&&(h++,setTimeout(function(){c(e.text,e.lang,function(t,r){if(t)return d(t);null!=r&&r!==e.text&&(e.text=r,e.escaped=!0),0===--h&&d()})},0))}),void(0===h&&d())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(function(t){return e(t,i)}).then(function(e){return i.walkTokens?Promise.all(r.walkTokens(e,i.walkTokens)).then(function(){return e}):e}).then(function(e){return t(e,i)}).then(function(e){return i.hooks?i.hooks.postprocess(e):e}).catch(l);try{i.hooks&&(n=i.hooks.preprocess(n));var m=e(n,i);i.walkTokens&&r.walkTokens(m,i.walkTokens);var f=t(m,i);return i.hooks&&(f=i.hooks.postprocess(f)),f}catch(e){return l(e)}}}function te(e,t,r){return function(o){if(o.message+="\nPlease report this to https://github.com/markedjs/marked.",e){var n="<p>An error occurred:</p><pre>"+K(o.message+"",!0)+"</pre>";return t?Promise.resolve(n):r?void r(null,n):n}if(t)return Promise.reject(o);if(!r)throw o;r(o)}}var re=new X(e.defaults);function oe(e,t,r){return re.parse(e,t,r)}oe.options=oe.setOptions=function(e){return re.setOptions(e),oe.defaults=re.defaults,h(oe.defaults),oe},oe.getDefaults=d,oe.defaults=e.defaults,oe.use=function(){return re.use.apply(re,arguments),oe.defaults=re.defaults,h(oe.defaults),oe},oe.walkTokens=function(e,t){return re.walkTokens(e,t)},oe.parseInline=re.parseInline,oe.Parser=q,oe.parser=q.parse,oe.Renderer=H,oe.TextRenderer=G,oe.Lexer=$,oe.lexer=$.lex,oe.Tokenizer=B,oe.Slugger=z,oe.Hooks=J,oe.parse=oe;var ne=oe.options,ie=oe.setOptions,ae=oe.use,se=oe.walkTokens,le=oe.parseInline,ue=oe,ce=q.parse,pe=$.lex;e.Hooks=J,e.Lexer=$,e.Marked=X,e.Parser=q,e.Renderer=H,e.Slugger=z,e.TextRenderer=G,e.Tokenizer=B,e.getDefaults=d,e.lexer=pe,e.marked=oe,e.options=ne,e.parse=ue,e.parseInline=le,e.parser=ce,e.setOptions=ie,e.use=ae,e.walkTokens=se}(t)}),ye=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const be=function(e){return`{${we[e]()}}`},we={KVCTemplatePlaintextTitle(e){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");return e.split("\n").shift()},KVCTemplatePlaintextBody(e){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");return e.split("\n").slice(1).join("\n").trim()},KVCTemplateTruncated(e,t){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");return e.length<=60?e:e.slice(0,60).split(" ").slice(0,-1).join(" ")+(t?"…":"")},KVCTemplateTextContent(e){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");return e.replace(/<[^>]*>?/gm,"").replace(/\n/g," ").trim()},KVCTemplateNormalizeURL:()=>"https://cdn.jsdelivr.net/npm/normalize.css/normalize.css".match("http")?"https://cdn.jsdelivr.net/npm/normalize.css/normalize.css":process.env.KVC_TEMPLATE_NORMALIZE_URL,KVCTemplateDecorURL:()=>"https://olsk.rosano.ca/OLSKDecor/master/ui-style.css".match("http")?"https://olsk.rosano.ca/OLSKDecor/master/ui-style.css":process.env.KVC_TEMPLATE_DECOR_URL,KVCTemplateViewDefault(e){if("function"!=typeof e)throw new Error("KVCErrorInputNotValid");return`<!DOCTYPE html>\n<html>\n<head>\n\n<title>{${we.KVCTemplateTokenPostTitle()}}</title>\n\n<meta name="description" content="{${we.KVCTemplateTokenPostBlurb()}}" />\n\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<meta name="viewport" content="width=device-width" />\n\n<link rel="canonical" href="{${we.KVCTemplateTokenRootURL()}}{${we.KVCTemplateTokenURL()}}">\n\n<link rel="stylesheet" type="text/css" href="${we.KVCTemplateNormalizeURL()}">\n<link rel="stylesheet" type="text/css" href="${we.KVCTemplateDecorURL()}">\n\n<meta property="article:published_time" content="{${we.KVCTemplateTokenPublishedTime()}}" />\n<meta property="article:modified_time" content="{${we.KVCTemplateTokenModifiedTime()}}" />\n</head>\n<body class="OLSKDecor OLSKDecorCapped OLSKDecorX">\n\n{block:${we.KVCTemplateTokenNotePage()}}\n<a class="KVCRootLink" href="{${we.KVCTemplateTokenRootURL()}}">${e("KVCRootLinkText")}</a>\n\n<hr role="presentation" />\n{/block:${we.KVCTemplateTokenNotePage()}}\n\n<div class="OLSKCommonCard OLSKCommonCrownCard">\n\t<section>\n\t\t<span class="KVCArticleTitle">{${we.KVCTemplateTokenPostTitle()}}</span>\n\t</section>\n</div>\n\n<article class="KVCArticleBody">\n\n{${we.KVCTemplateTokenPostBody()}}\n\n</article>\n\n{block:${we.KVCTemplateTokenBacklinks()}}\n<hr role="presentation" />\n\n<div class="KVCBacklinks">\n\n<h3 class="KVCBacklinksHeading">${e("KVCBacklinksHeadingText")}</h3>\n\n<p>\n\t<a class="KVCBacklinksLink" href="${be("KVCTemplateTokenURL")}">${be("KVCTemplateTokenName")}</a><br />\n\t<span class="KVCBacklinksSnippet">${be("KVCTemplateTokenDescription")}</span>\n</p>\n\n</div>\n{/block:${we.KVCTemplateTokenBacklinks()}}\n\n</body>\n</html>`},KVCTemplateTokenPostTitle:()=>"Title",KVCTemplateTokenPostBlurb:()=>"PostBlurb",KVCTemplateTokenPostBody:()=>"Body",KVCTemplateTokenRootURL:()=>"HomeURL",KVCTemplateTokenRootURLLegacy:()=>"BlogURL",KVCTemplateTokenRootPage:()=>"HomePage",KVCTemplateTokenNotePage:()=>"RefPage",KVCTemplateTokenNotePageLegacy:()=>"PermalinkPage",KVCTemplateTokenBacklinks:()=>"Backlinks",KVCTemplateTokenName:()=>"Name",KVCTemplateTokenURL:()=>"URL",KVCTemplateTokenDescription:()=>"Description",KVCTemplateTokenPublishedTime:()=>"PublishedTime",KVCTemplateTokenModifiedTime:()=>"ModifiedTime",KVCTemplateRemappedLinks(e,t){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("KVCErrorInputNotValid");return Object.entries(t).reduce(function(e,[t,r]){return(e.match(new RegExp(`\\[\\[${ye(t)}\\]\\]`,"gi"))||[]).reduce(function(e,t){return e.split(t).join(`${t.slice(1,-1)}(${r})`)},(e.match(new RegExp(`\\]\\(${ye(t)}\\)`,"gi"))||[]).reduce(function(e,t){return e.split(t).join(`](${r})`)},e))},e)},KVCTemplateHTML(e,t={}){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");const r=new Oe.Renderer;return r.link=function(e,r,o){const n=Oe.Renderer.prototype.link.apply(this,arguments);return t._KVCOptionPublicBaseURL&&!e.match(t._KVCOptionPublicBaseURL)?n.replace("<a",'<a target="_blank"'):n},Oe.setOptions({gfm:!0,headerIds:!1,breaks:!0,renderer:r})(e).trim()},KVCTemplateTokensMap(e,t,r={}){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("KVCErrorInputNotValid");return Object.fromEntries([[we.KVCTemplateTokenPostTitle(),we.KVCTemplatePlaintextTitle(e)],[we.KVCTemplateTokenPostBlurb(),Ke.OLSKStringSnippet(function(e){if(!r.document&&"undefined"==typeof document)return e;const t=(r.document||document).querySelector(".KVCTemplateTokensMap")||(r.document||document).createElement("div");return t.classList.add("KVCTemplateTokensMap"),t.innerHTML=e,t.textContent||t.innerText||e}(we.KVCTemplatePlaintextBody(e)))],[we.KVCTemplateTokenPostBody(),we.KVCTemplateHTML(we.KVCTemplatePlaintextBody(e),t)],[we.KVCTemplateTokenRootURL(),t.KVCOptionRootURL],[we.KVCTemplateTokenRootURLLegacy(),t.KVCOptionRootURL],[we.KVCTemplateTokenURL(),"/"+t._KVCOptionObject.KVCNotePublicID],[we.KVCTemplateTokenPublishedTime(),t._KVCOptionObject.KVCNotePublishDate.toJSON()],[we.KVCTemplateTokenModifiedTime(),t._KVCOptionObject.KVCNoteModificationDate.toJSON()]].map(function(e){return e[0]=`{${e[0]}}`,e}))},KVCTemplateVisibleBlocks(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");return Object.keys(e).reduce(function(t,r){return"KVCOptionRootURL"===r&&t.push(we.KVCTemplateTokenRootURL()),"KVCOptionIsRoot"===r&&t.push(...e[r]?[we.KVCTemplateTokenRootPage()]:[we.KVCTemplateTokenNotePage(),we.KVCTemplateTokenNotePageLegacy()]),t},[])},KVCTemplateBlockTokensMap(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");if("object"!=typeof e.KVCBlockPermalinkMap||null===e.KVCBlockPermalinkMap)throw new Error("KVCErrorInputNotValid");if("object"!=typeof e.KVCBlockTemplateOptions||null===e.KVCBlockTemplateOptions)throw new Error("KVCErrorInputNotValid");if("object"!=typeof e.KVCBlockTemplateOptions||null===e.KVCBlockTemplateOptions)throw new Error("KVCErrorInputNotValid");const t={};return e.KVCBlockTemplateOptions.KVCOptionBacklinks&&(t[be("KVCTemplateTokenBacklinks")]=e.KVCBlockTemplateOptions.KVCOptionBacklinks.map(function(t){const r={};r[be("KVCTemplateTokenName")]=we.KVCTemplatePlaintextTitle(t.KVCNoteBody),r[be("KVCTemplateTokenURL")]=e.KVCBlockPermalinkMap[we.KVCTemplatePlaintextTitle(t.KVCNoteBody)];const o=we.KVCTemplatePlaintextBody(t.KVCNoteBody);return r[be("KVCTemplateTokenDescription")]=Ke.OLSKStringSnippet(we.KVCTemplateTextContent(we.KVCTemplateHTML((o.match(/\[\[.*\]\]/g)||[]).reduce(function(e,t){return e.split(t).join(t.match(/\[\[(.*)\]\]/)[1])},o)))),r})),t},KVCTemplateCollapseBlocks(e,t,r){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");if(!Array.isArray(t))throw new Error("KVCErrorInputNotValid");const o=r?we.KVCTemplateBlockTokensMap(r):null;let n,i=e,a=-1;for(;a<i.length;){if(a===n)return a=1/0,i;n=a,function(){let e=i.match(/\{block:(\w+)\}/i);if(!e)return void(a=i.length);let r=i.match(new RegExp(`\\{\\/block:${e[1]}}`));r?(i=function(e,t,r,n){return e.slice(0,t.index)+(i=e.slice(t.index+t[0].length,r.index),n?"":o&&t[1]===we.KVCTemplateTokenBacklinks()?o[be("KVCTemplateTokenBacklinks")].map(function(e){return Ke.OLSKStringReplaceTokens(i,e)}):i)+e.slice(r.index+r[0].length);var i}(i,e,r,!t.includes(e[1])),a=e.index):a=e.index+e[0].length}()}return i},KVCView(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");if("string"!=typeof e.KVCViewSource)throw new Error("KVCErrorInputNotValid");if("object"!=typeof e.KVCViewPermalinkMap||null===e.KVCViewPermalinkMap)throw new Error("KVCErrorInputNotValid");if("string"!=typeof e.KVCViewTemplate)throw new Error("KVCErrorInputNotValid");if("object"!=typeof e.KVCViewTemplateOptions||null===e.KVCViewTemplateOptions)throw new Error("KVCErrorInputNotValid");return Ke.OLSKStringReplaceTokens(we.KVCTemplateCollapseBlocks(e.KVCViewTemplate,we.KVCTemplateVisibleBlocks(e.KVCViewTemplateOptions),{KVCBlockPermalinkMap:e.KVCViewPermalinkMap,KVCBlockTemplateOptions:e.KVCViewTemplateOptions}),we.KVCTemplateTokensMap(we.KVCTemplateRemappedLinks(e.KVCViewSource,e.KVCViewPermalinkMap),e.KVCViewTemplateOptions))}},ve=ge,Ve={KVCNoteErrors(e,t={}){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");const r={};return"string"!=typeof e.KVCNoteID?r.KVCNoteID=["KVCErrorNotString"]:e.KVCNoteID.trim()||(r.KVCNoteID=["KVCErrorNotFilled"]),"string"!=typeof e.KVCNoteBody&&(r.KVCNoteBody=["KVCErrorNotString"]),e.KVCNoteCreationDate instanceof Date&&!Number.isNaN(e.KVCNoteCreationDate.getTime())||(r.KVCNoteCreationDate=["KVCErrorNotDate"]),e.KVCNoteModificationDate instanceof Date&&!Number.isNaN(e.KVCNoteModificationDate.getTime())||(r.KVCNoteModificationDate=["KVCErrorNotDate"]),void 0!==e.KVCNoteIsArchived&&"boolean"!=typeof e.KVCNoteIsArchived&&(r.KVCNoteIsArchived=["KVCErrorNotBoolean"]),void 0!==e.KVCNoteIsPublic&&"boolean"!=typeof e.KVCNoteIsPublic&&(r.KVCNoteIsPublic=["KVCErrorNotBoolean"]),void 0!==e.KVCNotePublishDate&&(e.KVCNotePublishDate instanceof Date&&!Number.isNaN(e.KVCNotePublishDate.getTime())||(r.KVCNotePublishDate=["KVCErrorNotDate"])),void 0!==e.KVCNotePublicID&&("string"!=typeof e.KVCNotePublicID?r.KVCNotePublicID=["KVCErrorNotString"]:e.KVCNotePublicID.trim()||(r.KVCNotePublicID=["KVCErrorNotFilled"])),Object.entries(r).length?r:null},KVCNoteIsMarkedPublic(e){if(Ve.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");return!!e.KVCNoteIsPublic&&(!!e.KVCNotePublishDate&&!!e.KVCNotePublicID)},KVCNoteDirectory:()=>"kvc_notes",KVCNoteFolderPath:e=>[Ve.KVCNoteDirectory(),e.KVCNoteCreationDate.toJSON().split("T").shift(),e.KVCNoteID].join("/")+"/",KVCNoteObjectPath:e=>Ve.KVCNoteFolderPath(e)+"main",KVCNoteStub(e){const t=(e.match(new RegExp(`${Ve.KVCNoteDirectory()}/(?<date>[0-9]{4}-[0-9]{2}-[0-9]{2})/(?<item>[\\w.]+)/main`))||{}).groups||{};return{KVCNoteID:t.item,KVCNoteCreationDate:new Date(t.date||Date.now())}},KVCNotePublicRootPagePath:()=>"index.html",KVCNotePublicChildPagePath(e){if(Ve.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");if(!e.KVCNotePublicID)throw new Error("KVCErrorInputNotValid");return e.KVCNotePublicID},KVCNotePublicPath(e,t){if(Ve.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");if("boolean"!=typeof t)throw new Error("KVCErrorInputNotValid");return t?"/":Ve.KVCNotePublicChildPagePath(e)}};var Te=Object.assign(Ve,{ZDRSchemaKey:"KVCNote",ZDRSchemaDispatchValidate:Ve.KVCNoteErrors,ZDRSchemaPath:Ve.KVCNoteObjectPath,ZDRSchemaStub:Ve.KVCNoteStub,ZDRSchemaMethods:{KVCNoteCreate(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");const t=new Date;return this.App.KVCNote.ZDRModelWriteObject(Object.assign(e,Object.assign({KVCNoteID:ve(),KVCNoteCreationDate:t,KVCNoteModificationDate:t},e)))},KVCNoteUpdate(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");return this.App.KVCNote.ZDRModelWriteObject(Object.assign(e,{KVCNoteModificationDate:new Date}))},async KVCNoteList(){const e=this;return(await Promise.all((await e.App.ZDRStoragePathsRecursive(Ve.KVCNoteDirectory())).filter(function(e){return e===Ve.KVCNoteObjectPath(Ve.KVCNoteStub(e))}).map(async function(t){return Ce.OLSKRemoteStoragePostJSONParse(await e.App.ZDRStorageReadObject(t))}))).filter(function(e){return e})},KVCNoteMarkPublic(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");return e.KVCNotePublicID||(e.KVCNotePublicID=ve().toLowerCase()),e.KVCNotePublishDate||(e.KVCNotePublishDate=new Date),this.App.KVCNote.KVCNoteUpdate(Object.assign(e,{KVCNoteIsPublic:!0}))},async KVCNotePublicFilesUpload(e,t,r){if(!Ve.KVCNoteIsMarkedPublic(e))throw new Error("KVCErrorInputNotValid");if("string"!=typeof t)throw new Error("KVCErrorInputNotValid");if("boolean"!=typeof r)throw new Error("KVCErrorInputNotValid");return await this.Public.ZDRStorageWriteFile(Ve.KVCNotePublicChildPagePath(e),t,"text/html"),r&&await this.Public.ZDRStorageWriteFile(Ve.KVCNotePublicRootPagePath(e),t,"text/html"),e},KVCNoteMarkNotPublic(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");return this.App.KVCNote.KVCNoteUpdate(Object.assign(e,{KVCNoteIsPublic:!1}))},async KVCNotePublicFilesRetract(e,t){if(Ve.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");if("boolean"!=typeof t)throw new Error("KVCErrorInputNotValid");return await this.Public.ZDRStorageDeleteFile(Ve.KVCNotePublicChildPagePath(e)),t&&await this.Public.ZDRStorageDeleteFile(Ve.KVCNotePublicRootPagePath(e)),e},KVCNotePermalinkMap(e,t){if(!Array.isArray(e))throw new Error("KVCErrorInputNotValid");if("string"!=typeof t)throw new Error("KVCErrorInputNotValid");const r=this;return Object.fromEntries(e.filter(Ve.KVCNoteIsMarkedPublic).map(function(e){return[we.KVCTemplatePlaintextTitle(e.KVCNoteBody),r.Public.ZDRStoragePermalink(e.KVCNoteID===t?Ve.KVCNotePublicRootPagePath(e):Ve.KVCNotePublicChildPagePath(e))]}))},async KVCNoteDelete(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");if(Ve.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");return e.KVCNotePublicID&&await this.Public.ZDRStorageDeleteFile(Ve.KVCNotePublicChildPagePath(e)),await this.App.ZDRStorageDeleteFolderRecursive(Ve.KVCNoteFolderPath(e)),e}}});const Ee={KVCSettingErrors(e,t={}){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");const r={};return"string"!=typeof e.KVCSettingKey?r.KVCSettingKey=["KVCErrorNotString"]:e.KVCSettingKey.trim()||(r.KVCSettingKey=["KVCErrorNotFilled"]),"string"!=typeof e.KVCSettingValue&&(r.KVCSettingValue=["KVCErrorNotString"]),Object.entries(r).length?r:null},KVCSettingDirectory:()=>"kvc_settings",KVCSettingPath:e=>`${Ee.KVCSettingDirectory()}/${e.KVCSettingKey}`,KVCSettingStub:e=>({KVCSettingKey:e.split("/").pop()})};var Ie=Object.assign(Ee,{ZDRSchemaKey:"KVCSetting",ZDRSchemaDispatchValidate:Ee.KVCSettingErrors,ZDRSchemaPath:Ee.KVCSettingPath,ZDRSchemaStub:Ee.KVCSettingStub,ZDRSchemaMethods:{async KVCSettingList(){return Object.values(await this.App.KVCSetting.ZDRModelListObjects())}}}),ke={ZDRSchemaKey:"KVCTransport",ZDRSchemaDispatchValidate:function(){},ZDRSchemaPath:function(){},ZDRSchemaStub:function(){},ZDRSchemaMethods:{async KVCTransportImport(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");const t=this;return Object.fromEntries(await Promise.all(Object.entries(e).map(async function([e,r]){if(!Array.isArray(r))throw new Error("KVCErrorInputNotValid");return[e,await{KVCNote:function(){return Promise.all(r.map(function(e){return t.App.KVCNote.KVCNoteCreate(e).catch(function(){throw new Error("KVCErrorInputNotValid")})}))},KVCSetting:function(){return Promise.all(r.map(function(e){return t.App.KVCSetting.ZDRModelWriteObject(e).catch(function(){throw new Error("KVCErrorInputNotValid")})}))}}[e]()]})))},KVCTransportExport(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");return Object.entries(e).reduce(function(e,[t,r]){if(!Array.isArray(r))throw new Error("KVCErrorInputNotValid");return r.length?Object.assign(e,{[t]:r.map(Ce.OLSKRemoteStorageSafeCopy)}):e},{})}}},_e=se(function(e,t){const r=ie,o={OLSKSpecUIArguments(e){if(!Array.isArray(e))throw new Error("OLSKErrorInputNotValid");return e.map(function(e){return e.match(/^match=/)?e.replace(/^match=/,"-os-match="):e.match(/^skip=/)?e.replace(/^skip=/,"-os-skip="):e})},OLSKSpecUITestPaths(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if(!r().OLSKDiskIsRealFolderPath(e))throw new Error("OLSKErrorInputNotValid");return r().globSync("**/ui-test-*.js",{cwd:e,absolute:!0}).filter(function(e){return!e.match(r().OLSKDiskStandardIgnorePattern())})},OLSKSpecUITestPathsFilterFunction(e){if(!Array.isArray(e))throw new Error("OLSKErrorInputNotValid");const t=e.slice();let r=t.filter(function(e){return e.match(/^-?-?os-match=(.+)/i)}).shift();if(r){t.splice(t.indexOf(r),1),r=r.match(/^-?-?os-match=(.+)/i)[1];const e=r.match(/^\/(.+)\/(.+)?$/);e&&(r=new RegExp(e[1],e[2]))}let o=t.filter(function(e){return e.match(/^-?-?os-skip=(.+)/i)}).shift();if(o){t.splice(t.indexOf(o),1),o=o.match(/^-?-?os-skip=(.+)/i)[1];const e=o.match(/^\/(.+)\/(.+)?$/);e&&(o=new RegExp(e[1],e[2]))}return function(e){return!(!r||!e.match(r))||(!o||!e.match(o))&&(!(r&&!e.match(r))&&(o&&e.match(o),!0))}},OLSKSpecUISourcePaths(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if(!r().OLSKDiskIsRealFolderPath(e))throw new Error("OLSKErrorInputNotValid");return r().globSync("**/+(ui-behaviour.js|*.ejs|*.md|*.html|*.hbs)",{cwd:e,absolute:!0}).filter(function(e){return!!e.match("__compiled")||!e.match(r().OLSKDiskStandardIgnorePattern())})},OLSKSpecMochaPaths(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamPackageDirectory)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamWorkingDirectory)throw new Error("OLSKErrorInputNotValid");return[r().join(e.ParamPackageDirectory,"./node_modules/.bin/mocha"),r().join(e.ParamPackageDirectory,"../.bin/mocha"),r().join(e.ParamWorkingDirectory,"./node_modules/.bin/mocha")]},_OLSKSpecMochaReplaceES6Import(e){const t=[];return e=e.replace(/^import \* as (\w+) from ['"]([^'"]+)['"];?/gm,'var $1 = require("$2");').replace(/^import (\w+) from ['"]([^'"]+)['"];?/gm,'var _$1 = require("$2"); const $1 = _$1.default || _$1').replace(/^import {([^}]+)} from ['"](.+)['"];?/gm,'var {$1} = require("$2");').replace(/^export default /gm,"exports.default = ").replace(/^export (const|let|var|class|function) (\w+)/gm,(e,r,o)=>(t.push(o),`${r} ${o}`)).replace(/^export \{([^}]+)\}(?: from ['"]([^'"]+)['"];?)?/gm,(e,r,o)=>(r.split(",").filter(Boolean).forEach(e=>{t.push(e)}),o?`const { ${r} } = require("${o}");`:"")).replace(/^export function (\w+)/gm,"exports.$1 = function $1"),t.forEach(t=>{e+=`\nexports.${t} = ${t};`}),e},OLSKSpecMochaStandardConfiguration(e){if(!Array.isArray(e))throw new Error("OLSKErrorInputNotValid");return[].concat.apply([],["--file",r().join(__dirname,"mocha-start.js"),r().existsSync(r().join(process.cwd(),"mocha-start.js"))?["--file",r().join(process.cwd(),"mocha-start.js")]:[],e.includes("--reporter")?[]:["--reporter","min"],e.length?e:[]])}};Object.assign(t,o),t.OLSK_SPEC_UI=function(){return"undefined"!=typeof navigator&&("undefined"!=typeof window&&"loc.tests"===window.location.hostname||(!!navigator.userAgent.includes("HeadlessChrome")||"Zombie"===navigator.appName))}}),xe=_e.OLSK_SPEC_UI,Re=se(function(e,t){!function(e){const t={OLSKObjectSafeCopy:e=>Object.keys(e).reduce(function(t,r){return"$"!==r[0]&&(t[r]=e[r]),t},{}),OLSKObjectTrim(e){if("string"==typeof e)return e.trim();if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return Object.fromEntries(Object.entries(e).map(function(e){return e.map(function(e){return Array.isArray(e)?e.map(t.OLSKObjectTrim):e instanceof Date?e:"object"==typeof e?t.OLSKObjectTrim(e):"string"!=typeof e?e:e.trim()})}))},_OLSKObjectInferredType(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return e.replace(/\w+ErrorNot/,"").toLowerCase()},OLSKObjectJSONSchema(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{type:"object",properties:Object.entries(e).reduce(function(e,[r,o]){return e[r]={},e[r].type=t._OLSKObjectInferredType([...o].shift()).replace("filled","string"),"date"===e[r].type&&(e[r].type="string",e[r].format="date-time"),e},{}),required:Object.entries(e).filter(function([e,t]){return!t.includes("__RSOptional")}).map(function([e,t]){return e})}},OLSKObjectRemap(e,t,r=!1){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof r)throw new Error("OLSKErrorInputNotValid");return Object.entries(t).reduce(function(t,o){return r&&(o=o.reverse()),e[o[0]]?Object.assign(t,{[o[1]]:e[o[0]]}):t},{})},OLSKObjectPostJSONParse(e){if(!e)return e;if(Array.isArray(e))return e.map(t.OLSKObjectPostJSONParse);for(const r in e)"Date"===r.slice(-4)?e[r]=new Date(e[r]):Array.isArray(e[r])?e[r].map(t.OLSKObjectPostJSONParse):"object"==typeof e[r]&&t.OLSKObjectPostJSONParse(e[r]);return e}};Object.assign(e,t),Object.defineProperty(e,"__esModule",{value:!0})}(t)}),Pe=ae(Re),Ae=se(function(e,t){const r={OLSKServiceWorkerModule(e,t,r,o){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.addEventListener)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof t.keys)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof r)throw new Error("OLSKErrorInputNotValid");const n={_ValueSelf:e,_ValueCaches:t,_ValueFetch:r,_ValuePersistenceCacheURLs:[],_DataVersionCacheName:"OLSKServiceWorkerVersionCache-VERSION_ID_TOKEN",_DataPersistenceCacheName:"OLSKServiceWorkerPersistenceCache",_DataOriginPage:"ORIGIN_PAGE_PATH_TOKEN",ControlClearCache:async()=>Promise.all((await n._ValueCaches.keys()).filter(function(e){return e!==n._DataPersistenceCacheName}).map(function(e){return n._ValueCaches.delete(e)})),ControlAddPersistenceCacheURL(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");n._ValuePersistenceCacheURLs.includes(e)||n._ValuePersistenceCacheURLs.push(e)},OLSKServiceWorkerDidActivate(e){e.waitUntil(n.ControlClearCache())},async OLSKServiceWorkerDidFetch(e){if("GET"===e.request.method&&!e.request.url.match("sw.js")&&("cors"!==e.request.mode||n._ValuePersistenceCacheURLs.includes(e.request.url))&&("navigate"!==e.request.mode||e.request.url.includes(n._DataOriginPage))&&("navigate"===e.request.mode||e.request.referrer.includes(n._DataOriginPage)))return e.respondWith(async function(){const t=await n._ValueCaches.match(e.request);if(t)return t;const r=o?await fetch(e.request):await n._ValueFetch(e.request);return 200===r.status&&(await n._ValueCaches.open(n._ValuePersistenceCacheURLs.includes(e.request.url)?n._DataPersistenceCacheName:n._DataVersionCacheName)).put(e.request,r.clone()),r}())},async OLSKServiceWorkerDidReceiveMessage(e){const t=e.data.OLSKMessageSignature||e.data;if("string"==typeof t&&t.startsWith("OLSKServiceWorker_"))return e.source.postMessage({OLSKMessageSignature:t,OLSKMessageArguments:e.data.OLSKMessageArguments,OLSKMessageResponse:await n[t](...[].concat(e.data.OLSKMessageArguments||[]))})},OLSKServiceWorker_ClearVersionCache:()=>n.ControlClearCache(),OLSKServiceWorker_SkipWaiting:()=>n._ValueSelf.skipWaiting(),OLSKServiceWorker_AddPersistenceCacheURL:e=>n.ControlAddPersistenceCacheURL(e)};return n},OLSKServiceWorkerInitialization(e,t){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.addEventListener)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof t.OLSKServiceWorkerDidReceiveMessage)throw new Error("OLSKErrorInputNotValid");e.addEventListener("activate",t.OLSKServiceWorkerDidActivate),e.addEventListener("fetch",t.OLSKServiceWorkerDidFetch),e.addEventListener("message",t.OLSKServiceWorkerDidReceiveMessage)},OLSKServiceWorkerViewTemplate:()=>`(function() {\n\t\t\tconst mod = (function ${r.OLSKServiceWorkerModule.toString()})(self, caches, fetch, true);\n\n\t\t\t(function ${r.OLSKServiceWorkerInitialization.toString()})(self, mod);\n\t\t})();`,OLSKServiceWorkerView(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.VERSION_ID_TOKEN)throw new Error("OLSKErrorInputNotValid");if(!e.VERSION_ID_TOKEN)throw new Error("OLSKErrorInputNotValid");if(e.VERSION_ID_TOKEN.match(/\s/))throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ORIGIN_PAGE_PATH_TOKEN)throw new Error("OLSKErrorInputNotValid");if(!e.ORIGIN_PAGE_PATH_TOKEN)throw new Error("OLSKErrorInputNotValid");return r.OLSKServiceWorkerViewTemplate().split("VERSION_ID_TOKEN").join(e.VERSION_ID_TOKEN).split("ORIGIN_PAGE_PATH_TOKEN").join(e.ORIGIN_PAGE_PATH_TOKEN)},OLSKServiceWorkerLauncherFakeItemProxy:()=>({LCHRecipeName:"OLSKServiceWorkerLauncherFakeItemProxy",LCHRecipeCallback(){}}),OLSKServiceWorkerLauncherItemReload(e,t){if(!e.location)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof t)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKServiceWorkerLauncherItemReload",LCHRecipeName:t("OLSKServiceWorkerLauncherItemReloadText"),LCHRecipeCallback:()=>e.location.reload()}},OLSKServiceWorkerLauncherItemDebugForceUpdate(e,t,r){if(!e.location)throw new Error("OLSKErrorInputNotValid");if(!t.serviceWorker)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof r)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKServiceWorkerLauncherItemDebugForceUpdate",LCHRecipeName:r("OLSKServiceWorkerLauncherItemDebugForceUpdateText"),async LCHRecipeCallback(){const r=await t.serviceWorker.getRegistration();if(r.waiting)return r.waiting.postMessage("OLSKServiceWorker_SkipWaiting");t.serviceWorker.controller.postMessage("OLSKServiceWorker_ClearVersionCache"),e.location.reload()}}},OLSKServiceWorkerRecipes(e,t,o,n){if(!e.location)throw new Error("OLSKErrorInputNotValid");if(!t.serviceWorker)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof o)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof n)throw new Error("OLSKErrorInputNotValid");return[r.OLSKServiceWorkerLauncherFakeItemProxy(),r.OLSKServiceWorkerLauncherItemReload(e,o),r.OLSKServiceWorkerLauncherItemDebugForceUpdate(e,t,o)].filter(function(e){return!!n||!(e.LCHRecipeSignature||e.LCHRecipeName).match(/Fake/)})}};Object.assign(t,r)});const Fe=function(e,t){return e>t?-1:e<t?1:0};String.prototype.KVCEquals=function(e){return this.toString()===e};const Ne={KVCWriteAccessibilitySummary(e,t){if(Te.KVCNoteErrors(e))throw new Error("KVCErrorInputNotValid");return Ke.OLSKStringSnippet(we.KVCTemplatePlaintextTitle(e.KVCNoteBody))||(e.KVCNoteBody?t("KVCWriteUntitledNoteText"):t("KVCWriteEmptyNoteText"))},KVCWriteSortFunction:(e,t,r)=>e.KVCNoteIsArchived!==t.KVCNoteIsArchived?function(e,t){return e<t?-1:e>t?1:0}(!!e.KVCNoteIsArchived,!!t.KVCNoteIsArchived):function(r){return Fe(e[r],t[r])}(["KVCNoteModificationDate","KVCNoteCreationDate"].filter(function(r){return e[r]&&t[r]}).shift()),KVCWritePublicSymbol:()=>"ᗕ",KVCWriteIsMatch(e,t){if("string"!=typeof t)throw new Error("KVCErrorInputNotValid");const r=t.match(Ne.KVCWritePublicSymbol());return t=t.split(Ne.KVCWritePublicSymbol()).join("").trim(),!(r&&!e.KVCNoteIsPublic)&&Ke.OLSKStringMatch(t,e.KVCNoteBody)},KVCWriteExactSortFunction(e,t,r){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");return["KVCEquals","startsWith",void 0].map(function(o){return Fe(Ke.OLSKStringMatch(e,we.KVCTemplatePlaintextTitle(t.KVCNoteBody),o),Ke.OLSKStringMatch(e,we.KVCTemplatePlaintextTitle(r.KVCNoteBody),o))}).filter(function(e){return 0!==e}).shift()},KVCWriteHumanTimestampString(e){if(!(e instanceof Date)||Number.isNaN(e.getTime()))throw new Error("KVCErrorInputNotValid");return e.toJSON().slice(0,16)},KVCWriteLauncherItemJournalTemplate(e,t){if(!(e instanceof Date)||Number.isNaN(e.getTime()))throw new Error("KVCErrorInputNotValid");if("function"!=typeof t)throw new Error("KVCErrorInputNotValid");return t("KVCWriteLauncherItemJournalText").toLowerCase()+"-"+Ne.KVCWriteHumanTimestampString(e)+"\n\n- "},KVCWriteCustomDomainBaseURLData(e){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");e.match(/https?\:\/\//)||(e="https://"+e);try{const t=new URL("",e);return t.protocol+"//"+t.hostname+"/"}catch(e){return null}},KVCWriteCustomDomainBaseURLFunction(e,t,r,o){if("string"!=typeof e)throw new Error("KVCErrorInputNotValid");if("string"!=typeof t)throw new Error("KVCErrorInputNotValid");return function(r,o){if("string"!=typeof r)throw new Error("KVCErrorInputNotValid");if("string"!=typeof o)throw new Error("KVCErrorInputNotValid");return r.replace(e.replace(t,""),o)}},KVCWriteBacklinksMap(e){if(!Array.isArray(e))throw new Error("KVCErrorInputNotValid");return e.reduce(function(e,t,r,o){const n=we.KVCTemplatePlaintextTitle(t.KVCNoteBody);return e[n]=o.filter(function(e){return e.KVCNoteBody.includes(`[[${n}]]`)}),e},{})},KVCWriteCloned(e){if("object"!=typeof e||null===e)throw new Error("KVCErrorInputNotValid");const t=Object.assign({},e);return delete t.KVCNoteID,delete t.KVCNoteIsPublic,delete t.KVCNotePublicID,t},KVCWriteLauncherItemBacklinksTemplate(e,t,r){if(!(e instanceof Date)||Number.isNaN(e.getTime()))throw new Error("KVCErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("KVCErrorInputNotValid");if("function"!=typeof r)throw new Error("KVCErrorInputNotValid");return r("KVCWriteLauncherItemBacklinksText").toLowerCase()+"-"+Ne.KVCWriteHumanTimestampString(e)+"\n\n"+Object.keys(t).sort(function(e,r){return t[e].length<t[r].length?-1:0}).map(function(e){return`# [[${e}]]\n${t[e].slice().sort(function(e,t){return!e.KVCNoteIsArchived&&t.KVCNoteIsArchived?-1:e.KVCNoteIsArchived&&!t.KVCNoteIsArchived?1:0}).map(function(e){return`- [[${we.KVCTemplatePlaintextTitle(e.KVCNoteBody)}]]`}).join("\n")}`}).join("\n\n")},KVCWriteLauncherItemVersionsTemplate(e,t,r){if(!(e instanceof Date)||Number.isNaN(e.getTime()))throw new Error("KVCErrorInputNotValid");if("function"!=typeof t)throw new Error("KVCErrorInputNotValid");if(!Array.isArray(r))throw new Error("KVCErrorInputNotValid");return t("KVCWriteVersionsWord")+"-"+Ne.KVCWriteHumanTimestampString(e)+r.map(function(e){return"\n\n# "+e.KVCNoteModificationDate.toLocaleString()+"\n```\n"+e.KVCNoteBody+"\n```"}).join("")},KVCWriteFileNoteObject(e,t=!1){if(!e.lastModified)throw new Error("KVCErrorInputNotValid");if("string"!=typeof e._LCHReadTextFileObjectContent)throw new Error("KVCErrorInputNotValid");if("boolean"!=typeof t)throw new Error("KVCErrorInputNotValid");return{KVCNoteBody:(t?e.name.split(".").slice(0,-1).join(".")+"\n\n":"")+e._LCHReadTextFileObjectContent,KVCNoteCreationDate:new Date(e.lastModified),KVCNoteModificationDate:new Date(e.lastModified)}},KVCWriteLauncherItemPublishAll(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamConnected)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamWindow||null===e.ParamWindow)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"KVCWriteLauncherItemPublishAll",LCHRecipeName:e.OLSKLocalized("KVCWriteLauncherItemPublishAllText"),LCHRecipeCallback(){e.ParamWindow.confirm(e.OLSKLocalized("OLSKWordingConfirmText"))&&e.ParamMod._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(function(e){return e.KVCNotePublicID&&!e.KVCNoteIsPublic}).map(e.ParamMod.ControlNotePublish)},LCHRecipeIsExcluded:()=>!e.ParamConnected}},KVCWriteLauncherItemRetractAll(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamConnected)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamWindow||null===e.ParamWindow)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"KVCWriteLauncherItemRetractAll",LCHRecipeName:e.OLSKLocalized("KVCWriteLauncherItemRetractAllText"),LCHRecipeCallback(){e.ParamWindow.confirm(e.OLSKLocalized("OLSKWordingConfirmText"))&&e.ParamMod._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(function(e){return e.KVCNoteIsPublic}).map(e.ParamMod.ControlNoteRetract)},LCHRecipeIsExcluded:()=>!e.ParamConnected}},KVCWriteRecipes(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamMod||null===e.ParamMod)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamSpecUI)throw new Error("OLSKErrorInputNotValid");return[Ne.KVCWriteLauncherItemPublishAll(e),Ne.KVCWriteLauncherItemRetractAll(e)].filter(function(t){return!!e.ParamSpecUI||!(t.LCHRecipeSignature||t.LCHRecipeName).match(/Fake/)})}};var We=se(function(e,t){"undefined"==typeof fetch&&(ne.fetch=function(){})/*!  remotestorage.js 2.0.0-beta.6, https://remotestorage.io, MIT licensed */,e.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t,r){(function(e,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=t.generateCodeVerifier=t.toBase64=t.getTextFromArrayBuffer=t.shouldBeTreatedAsBinary=t.getJSONFromLocalStorage=t.localStorageAvailable=t.pathsFromRoot=t.deepClone=t.equal=t.bindAll=t.cleanPath=t.baseName=t.isDocument=t.isFolder=t.containingFolder=t.extend=t.getGlobalContext=t.globalContext=t.logError=void 0,t.logError=e=>{"string"==typeof e?console.error(e):console.error(e.message,e.stack)},t.globalContext="undefined"!=typeof window?window:"object"==typeof self?self:e,t.getGlobalContext=()=>"undefined"!=typeof window?window:"object"==typeof self?self:e,t.extend=(...e)=>{const t=e[0];return Array.prototype.slice.call(e,1).forEach(function(e){for(const r in e)t[r]=e[r]}),t},t.containingFolder=e=>{if(""===e)return"/";if(!e)throw"Path not given!";return e.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},t.isFolder=e=>"/"===e.slice(-1),t.isDocument=e=>!(0,t.isFolder)(e),t.baseName=e=>{const r=e.split("/");return(0,t.isFolder)(e)?r[r.length-2]+"/":r[r.length-1]},t.cleanPath=e=>e.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),t.bindAll=e=>{for(const t in this)"function"==typeof e[t]&&(e[t]=e[t].bind(e))},t.equal=(e,r,o=[])=>{let n;if(typeof e!=typeof r)return!1;if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return e===r;if("function"==typeof e)return e.toString()===r.toString();if(e instanceof ArrayBuffer&&r instanceof ArrayBuffer&&(e=new Uint8Array(e),r=new Uint8Array(r)),e instanceof Array){if(e.length!==r.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!(0,t.equal)(e[n],r[n],o))return!1}else{for(n in e)if(e.hasOwnProperty(n)&&!(n in r))return!1;for(n in r){if(!r.hasOwnProperty(n))continue;if(!(n in e))return!1;let i;if("object"==typeof r[n]){if(o.indexOf(r[n])>=0)continue;i=o.slice(),i.push(r[n])}if(!(0,t.equal)(e[n],r[n],i))return!1}}return!0},t.deepClone=e=>{if(void 0!==e){const t=JSON.parse(JSON.stringify(e));return function e(t,r){if("object"==typeof t&&!Array.isArray(t)&&null!==t)for(const o in t)if("object"==typeof t[o]&&null!==t[o])if("[object ArrayBuffer]"===t[o].toString()){r[o]=new ArrayBuffer(t[o].byteLength);const e=new Int8Array(t[o]);new Int8Array(r[o]).set(e)}else e(t[o],r[o])}(e,t),t}},t.pathsFromRoot=e=>{const t=[e],r=e.replace(/\/$/,"").split("/");for(;r.length>1;)r.pop(),t.push(r.join("/")+"/");return t},t.localStorageAvailable=()=>{const e=(0,t.getGlobalContext)();if(!("localStorage"in e))return!1;try{return e.localStorage.setItem("rs-check","1"),e.localStorage.removeItem("rs-check"),!0}catch(e){return!1}},t.getJSONFromLocalStorage=e=>{const r=(0,t.getGlobalContext)();try{return JSON.parse(r.localStorage.getItem(e))}catch(e){}},t.shouldBeTreatedAsBinary=(e,t)=>!!(t&&t.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(e)),t.getTextFromArrayBuffer=(e,o)=>new Promise(n=>{if("undefined"==typeof Blob){const t=r.from(e);n(t.toString(o))}else{let r;const i=t.globalContext;if(i.BlobBuilder=i.BlobBuilder||i.WebKitBlobBuilder,void 0!==i.BlobBuilder){const t=new i.BlobBuilder;t.append(e),r=t.getBlob()}else r=new Blob([e]);const a=new FileReader;"function"==typeof a.addEventListener?a.addEventListener("loadend",function(e){n(e.target.result)}):a.onloadend=function(e){n(e.target.result)},a.readAsText(r,o)}}),t.toBase64=e=>{const o=(0,t.getGlobalContext)();return"btoa"in o?o.btoa(e):r.from(e).toString("base64")},t.generateCodeVerifier=function(e=128){return o(this,void 0,void 0,function*(){const t=new Uint8Array(e);crypto.getRandomValues(t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=Array.from(t).map(e=>r[e%r.length]),n=o.join(""),i=Uint8Array.from(o.map(e=>e.charCodeAt(0))),a=(s=yield crypto.subtle.digest("SHA-256",i),btoa(String.fromCharCode.apply(null,new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));var s;return crypto.getRandomValues(t),{codeVerifier:n,codeChallenge:a,state:Array.from(t).map(e=>r[e%r.length]).join("")}})},t.applyMixins=function(e,t){t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})})}}).call(this,r(6),r(20).Buffer)},function(e,t,r){const o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(3));e.exports=function(...e){o.default.logging&&console.log(...e)}},function(e,t,r){const o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(1));e.exports=class{addEvents(e){e.forEach(e=>this._addEvent(e))}addEventListener(e,t){if("string"!=typeof e)throw new Error("Argument eventName should be a string");if("function"!=typeof t)throw new Error("Argument handler should be a function");(0,o.default)("[EventHandling] Adding event listener",e),this._validateEvent(e),this._handlers[e].push(t)}on(e,t){return this.addEventListener(e,t)}removeEventListener(e,t){this._validateEvent(e);const r=this._handlers[e].length;for(let o=0;o<r;o++)if(this._handlers[e][o]===t)return void this._handlers[e].splice(o,1)}_emit(e,...t){this._validateEvent(e),this._handlers[e].slice().forEach(e=>{e.apply(this,t)})}_validateEvent(e){if(!(e in this._handlers))throw new Error("Unknown event: "+e)}_delegateEvent(e,t){t.on(e,t=>{this._emit(e,t)})}_addEvent(e){void 0===this._handlers&&(this._handlers={}),this._handlers[e]=[]}}},function(e,t,r){const o={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:1e4,isBackground:!1,requestTimeout:3e4,syncInterval:1e4};e.exports=o},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(1)),a=r(0),s=n(r(5)),l=r(7);let u;function c(e){const t=e||p.getLocation().href,r={};for(const[e,o]of new URL(t).searchParams)r[e]=o;const o=t.indexOf("#");if(-1===o)return r;const n=t.substring(o+1);return n.includes("=")?n.split("&").reduce(function(e,t){const r=t.split("=");if("state"===r[0]&&r[1].match(/rsDiscovery/)){let t=decodeURIComponent(r[1]);const o=t.substr(t.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];e.rsDiscovery=JSON.parse(atob(o)),t=t.replace(new RegExp("&?rsDiscovery="+o),""),t.length>0&&(e.state=t)}else e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]);return e},r):r}class p{static authorize(e,t){if((0,i.default)("[Authorize] authURL = ",t.authURL,"scope = ",t.scope,"redirectUri = ",t.redirectUri,"clientId = ",t.clientId,"response_type =",t.response_type),!t.scope)throw new Error("Cannot authorize due to undefined or empty scope; did you forget to access.claim()?");if(!(0,a.localStorageAvailable)()&&"remotestorage"===e.backend){t.redirectUri+=t.redirectUri.indexOf("#")>0?"&":"#";const r={userAddress:e.remote.userAddress,href:e.remote.href,storageApi:e.remote.storageApi,properties:e.remote.properties};t.redirectUri+="rsDiscovery="+(0,a.toBase64)(JSON.stringify(r))}const r=function(e){const t=new URL(e.redirectUri);e.state||(e.state=t.hash?t.hash.substring(1):""),e.response_type||(e.response_type="token");const r=new URL(e.authURL);r.searchParams.set("redirect_uri",e.redirectUri.replace(/#.*$/,"")),r.searchParams.set("scope",e.scope),r.searchParams.set("client_id",e.clientId);for(const t of["state","response_type","code_challenge","code_challenge_method","token_access_type"]){const o=e[t];o&&r.searchParams.set(t,o)}return r.href}(t);a.globalContext.cordova?p.openWindow(r,t.redirectUri,"location=yes,clearsessioncache=yes,clearcache=yes").then(t=>{e.remote.configure({token:t.access_token})}):p.setLocation(r)}static refreshAccessToken(e,t,r){var n,a,u;return o(this,void 0,void 0,function*(){yield t.configure({token:null,tokenType:null});const e=new URLSearchParams({grant_type:"refresh_token",client_id:t.clientId,refresh_token:r}),o=yield(0,l.requestWithTimeout)("POST",t.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString(),responseType:"json"});if(200!==(null==o?void 0:o.status))throw yield t.configure({refreshToken:null}),new s.default("refresh token rejected:"+JSON.stringify(o.response));{(0,i.default)(`[Authorize] access token good for ${null===(n=null==o?void 0:o.response)||void 0===n?void 0:n.expires_in} seconds`);const e={token:null===(a=null==o?void 0:o.response)||void 0===a?void 0:a.access_token,tokenType:null===(u=null==o?void 0:o.response)||void 0===u?void 0:u.token_type};if(!e.token)throw new Error('no access_token in "successful" refresh: '+o.response);yield t.configure(e)}})}static setLocation(e){if("string"==typeof e)document.location.href=e;else{if("object"!=typeof e)throw"Invalid location "+e;document.location=e}}static _rs_supported(){return"undefined"!=typeof document}static _rs_cleanup(e){e.removeEventListener("features-loaded",u)}}p.IMPLIED_FAKE_TOKEN=!1,p.getLocation=function(){return document.location},p.openWindow=function(e,t,r){return new Promise((o,n)=>{const i=open(e,"_blank",r);function a(){n("Authorization was canceled")}i&&!i.closed?(i.addEventListener("loadstart",function(e){if(0!==e.url.indexOf(t))return;i.removeEventListener("exit",a),i.close();const r=c(e.url);r?o(r):n("Authorization error")}),i.addEventListener("exit",a)):n("Authorization popup was blocked")})},p._rs_init=function(e){const t=c();let r;t.access_token&&(r=p.getLocation(),r.hash=""),u=function(){let n=!1;if(t){if(t.error)throw"access_denied"===t.error?new s.default("Authorization failed: access denied",{code:"access_denied"}):new s.default("Authorization failed: "+t.error);t.rsDiscovery&&e.remote.configure(t.rsDiscovery),t.access_token&&(e.remote.configure({token:t.access_token}),n=!0),t.remotestorage&&(e.connect(t.remotestorage),n=!0),t.state&&(r=p.getLocation(),p.setLocation(r.href.split("#")[0]+"#"+t.state)),t.code&&(function(t){var n,a,s,u;o(this,void 0,void 0,function*(){const o=sessionStorage.getItem("remotestorage:codeVerifier");if(!o)return void(0,i.default)("[Authorize] Ignoring OAuth code parameter, because no PKCE code verifier found in sessionStorage");r=p.getLocation();let c=r.origin;"/"!==r.pathname&&(c+=r.pathname);const d=new URLSearchParams({code:t,grant_type:"authorization_code",client_id:e.remote.clientId,redirect_uri:c,code_verifier:o}),h=yield(0,l.requestWithTimeout)("POST",e.remote.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d.toString(),responseType:"json"});if(200===h.status){(0,i.default)(`[Authorize] access token good for ${null===(n=null==h?void 0:h.response)||void 0===n?void 0:n.expires_in} seconds`);const t={token:null===(a=null==h?void 0:h.response)||void 0===a?void 0:a.access_token,refreshToken:null===(s=null==h?void 0:h.response)||void 0===s?void 0:s.refresh_token,tokenType:null===(u=null==h?void 0:h.response)||void 0===u?void 0:u.token_type};t.token?e.remote.configure(t):e._emit("error",new Error('no access_token in "successful" response: '+h.response)),sessionStorage.removeItem("remotestorage:codeVerifier")}else e._emit("error",new Error(`${h.statusText}: ${h.response}`))})}(t.code),n=!0),n||e.remote.stopWaitingForToken()}else e.remote.stopWaitingForToken()},e.on("features-loaded",u)},e.exports=p},function(e,t,r){class o extends Error{constructor(e,t={}){super(),this.name="Unauthorized",this.message=void 0===e?"App authorization expired or revoked.":e,void 0!==t.code&&(this.code=t.code),this.stack=(new Error).stack}}e.exports=o},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(e){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.requestWithTimeout=t.isArrayBufferView=t.retryAfterMs=void 0;const i=n(r(1)),a=n(r(3));if(t.retryAfterMs=function(e){const t=1e3*parseInt(e.getResponseHeader("Retry-After"));return t>=1e3?t:Math.max(1500,Math.min(6e4,Math.round(a.default.syncInterval/(2.9+.2*Math.random()))))},"function"==typeof(e||window).ArrayBufferView)t.isArrayBufferView=function(t){return t&&t instanceof(e||window).ArrayBufferView};else{const e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];t.isArrayBufferView=function(t){for(let r=0;r<8;r++)if(t instanceof e[r])return!0;return!1}}t.requestWithTimeout=function(e,r,n){return o(this,void 0,void 0,function*(){return"function"==typeof fetch?function(e,t,r){return o(this,void 0,void 0,function*(){const o="function"==typeof AbortController?new AbortController:null;let n;const s=new Promise((e,t)=>{n=setTimeout(()=>{o&&o.abort(),t("timeout")},a.default.requestTimeout)});let l;const u={},c=fetch(t,{method:e,headers:r.headers,body:r.body,signal:o?o.signal:void 0}).then(e=>{switch((0,i.default)("[requests fetch]",e),e.headers.forEach((e,t)=>{u[t.toUpperCase()]=e}),l={readyState:4,status:e.status,statusText:e.statusText,response:void 0,getResponseHeader:e=>u[e.toUpperCase()]||null,responseType:r.responseType,responseURL:t},r.responseType){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json();case void 0:case"":case"text":return e.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(e=>(l.response=e,r.responseType&&"text"!==r.responseType||(l.responseText=e),l)).finally(()=>{clearTimeout(n)});return Promise.race([c,s])})}(e,r,n):"function"==typeof XMLHttpRequest?function(e,r,n){return o(this,void 0,void 0,function*(){return new Promise((o,s)=>{(0,i.default)("[requests XHR]",e,r);let l=!1;const u=setTimeout(()=>{l=!0,s("timeout")},a.default.requestTimeout),c=new XMLHttpRequest;if(c.open(e,r,!0),n.responseType&&(c.responseType=n.responseType),n.headers)for(const e in n.headers)c.setRequestHeader(e,n.headers[e]);c.onload=()=>{l||(clearTimeout(u),o(c))},c.onerror=e=>{l||(clearTimeout(u),s(e))};let p=n.body;"object"==typeof p&&!(0,t.isArrayBufferView)(p)&&p instanceof ArrayBuffer&&(p=new Uint8Array(p)),c.send(p)})})}(e,r,n):Promise.reject("[Requests] You need to add a polyfill for fetch or XMLHttpRequest")})}}).call(this,r(6))},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(24)),a=n(r(25)),s=n(r(26)),l=n(r(2)),u=n(r(3)),c=r(0);class p{constructor(e,t){if(this.schemas={configurable:!0,get(){return p.Types.inScope(this.moduleName)}},"/"!==t[t.length-1])throw"Not a folder: "+t;"/"===t&&(this.makePath=e=>("/"===e[0]?"":"/")+e),this.storage=e,this.base=t,this.moduleName=function(e){const t=e.split("/");return e.length>2?t[1]:"root"}(this.base),this.addEvents(["change"]),this.on=this.on.bind(this),e.onChange(this.base,this._fireChange.bind(this))}scope(e){return new p(this.storage,this.makePath(e))}getListing(e,t){return o(this,void 0,void 0,function*(){if("string"!=typeof e)e="";else if(e.length>0&&!(0,c.isFolder)(e))return Promise.reject("Not a folder: "+e);return this.storage.get(this.makePath(e),t).then(e=>404===e.statusCode?{}:e.body)})}getAll(e,t){return o(this,void 0,void 0,function*(){if("string"!=typeof e)e="";else if(e.length>0&&!(0,c.isFolder)(e))return Promise.reject("Not a folder: "+e);return this.storage.get(this.makePath(e),t).then(r=>{if(404===r.statusCode)return{};if("object"==typeof r.body){const o=Object.keys(r.body);if(0===o.length)return{};const n=o.map(o=>this.storage.get(this.makePath(e+o),t).then(e=>{if("string"==typeof e.body)try{e.body=JSON.parse(e.body)}catch(e){}"object"==typeof e.body&&(r.body[o]=e.body)}));return Promise.all(n).then(()=>r.body)}})})}getFile(e,t){return o(this,void 0,void 0,function*(){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(e),t).then(e=>({data:e.body,contentType:e.contentType,revision:e.revision}))})}storeFile(e,t,r){return o(this,void 0,void 0,function*(){return"string"!=typeof e?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):"string"!=typeof t?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):"string"!=typeof r&&"object"!=typeof r?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(t),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(t),r,e).then(e=>200===e.statusCode||201===e.statusCode?e.revision:Promise.reject("Request (PUT "+this.makePath(t)+") failed with status: "+e.statusCode)))})}getObject(e,t){return o(this,void 0,void 0,function*(){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(e),t).then(t=>{if("object"==typeof t.body)return t.body;if("string"==typeof t.body)try{return JSON.parse(t.body)}catch(t){throw new Error("Not valid JSON: "+this.makePath(e))}else if(void 0!==t.body&&200===t.statusCode)return Promise.reject("Not an object: "+this.makePath(e))})})}storeObject(e,t,r){return o(this,void 0,void 0,function*(){if("string"!=typeof e)return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if("string"!=typeof t)return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if("object"!=typeof r)return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(r,e);try{const e=this.validate(r);if(!e.valid)return Promise.reject(e)}catch(e){return Promise.reject(e)}return this.storage.put(this.makePath(t),JSON.stringify(r),"application/json; charset=UTF-8").then(e=>200===e.statusCode||201===e.statusCode?e.revision:Promise.reject("Request (PUT "+this.makePath(t)+") failed with status: "+e.statusCode))})}remove(e){return"string"!=typeof e?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(e),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(e)))}getItemURL(e){if("string"!=typeof e)throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(e=(0,c.cleanPath)(this.makePath(e)),this.storage.remote.href+e):void 0}cache(e,t="ALL"){if("string"!=typeof e)throw"Argument 'path' of baseClient.cache must be a string";if("string"!=typeof t)throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if("FLUSH"!==t&&"SEEN"!==t&&"ALL"!==t)throw'Argument \'strategy\' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]';return this.storage.caching.set(this.makePath(e),t),this}flush(e){return this.storage.local.flush(e)}declareType(e,t,r){let o;if(r&&"string"==typeof t)o=t;else if(r||"string"==typeof t){if(!r&&"string"==typeof t)throw new Error("declareType() requires a JSON Schema object to be passed, in order to validate object types/formats")}else r=t,o=this._defaultTypeURI(e);p.Types.declare(this.moduleName,e,o,r)}validate(e){const t=p.Types.getSchema(e["@context"]);if(t)return i.default.validateResult(e,t);throw new s.default(e["@context"])}_defaultTypeURI(e){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(e)}_attachType(e,t){e["@context"]=p.Types.resolveAlias(this.moduleName+"/"+t)||this._defaultTypeURI(t)}makePath(e){return this.base+(e||"")}_fireChange(e){u.default.changeEvents[e.origin]&&(["new","old","lastCommon"].forEach(function(t){if((!e[t+"ContentType"]||/^application\/(.*)json(.*)/.exec(e[t+"ContentType"]))&&"string"==typeof e[t+"Value"])try{e[t+"Value"]=JSON.parse(e[t+"Value"])}catch(e){}}),this._emit("change",e))}static _rs_init(){}}p.Types=a.default,(0,c.applyMixins)(p,[l.default]),e.exports=p},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteBase=void 0;const n=o(r(2)),i=r(0);class a extends n.default{constructor(e){super(),this.rs=e,this.connected=!1}stopWaitingForToken(){this.connected||this._emit("not-connected")}addQuotes(e){return"string"!=typeof e?e:"*"===e?"*":'"'+e+'"'}stripQuotes(e){return"string"!=typeof e?e:e.replace(/^["']|["']$/g,"")}isForbiddenRequestMethod(e,t){return("PUT"===e||"DELETE"===e)&&(0,i.isFolder)(t)}}t.RemoteBase=a},function(e,t,r){class o extends Error{constructor(e){super(),this.name="SyncError",this.message="Sync failed: ","string"==typeof e?this.message+=e:(this.message+=e.message,this.stack=e.stack,this.originalError=e)}}e.exports=o},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(2)),a=n(r(3)),s=n(r(1)),l=r(0);function u(e){if("object"==typeof e&&"string"==typeof e.path)if((0,l.isFolder)(e.path)){if(e.local&&e.local.itemsMap)return e.local;if(e.common&&e.common.itemsMap)return e.common}else{if(e.local){if(e.local.body&&e.local.contentType)return e.local;if(!1===e.local.body)return}if(e.common&&e.common.body&&e.common.contentType)return e.common;if(e.body&&e.contentType)return{body:e.body,contentType:e.contentType}}}function c(e,t){for(const r in e){if(e[r]&&e[r].remote)return!0;const o=u(e[r]);if(o&&o.timestamp&&(new Date).getTime()-o.timestamp<=t)return!1;if(!o)return!0}return!0}function p(e){const t={path:e,common:{}};return(0,l.isFolder)(e)&&(t.common.itemsMap={}),t}function d(e,t){return e.common||(e.common={itemsMap:{}}),e.common.itemsMap||(e.common.itemsMap={}),e.local||(e.local=(0,l.deepClone)(e.common)),e.local.itemsMap||(e.local.itemsMap=e.common.itemsMap),e.local.itemsMap[t]=!0,e}class h{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(e,t,r){return o(this,void 0,void 0,function*(){return"number"==typeof t?this.getNodes((0,l.pathsFromRoot)(e)).then(o=>{const n=u(o[e]);return c(o,t)?r(e):n?{statusCode:200,body:n.body||n.itemsMap,contentType:n.contentType}:{statusCode:404}}):this.getNodes([e]).then(t=>{const r=u(t[e]);if(r){if((0,l.isFolder)(e))for(const e in r.itemsMap)r.itemsMap.hasOwnProperty(e)&&!1===r.itemsMap[e]&&delete r.itemsMap[e];return{statusCode:200,body:r.body||r.itemsMap,contentType:r.contentType}}return{statusCode:404}})})}put(e,t,r){return o(this,void 0,void 0,function*(){const o=(0,l.pathsFromRoot)(e);return this._updateNodes(o,function(e,o){try{for(let n=0,i=e.length;n<i;n++){const i=e[n];let a,s=o[i];s||(o[i]=s=p(i)),0===n?(a=u(s),s.local={body:t,contentType:r,previousBody:a?a.body:void 0,previousContentType:a?a.contentType:void 0}):s=d(s,e[n-1].substring(i.length))}return o}catch(e){throw(0,s.default)("[Cachinglayer] Error during PUT",o,e),e}})})}delete(e){const t=(0,l.pathsFromRoot)(e);return this._updateNodes(t,function(e,t){for(let r=0,o=e.length;r<o;r++){const o=e[r],n=t[o];let i;if(n)if(0===r)i=u(n),n.local={body:!1,previousBody:i?i.body:void 0,previousContentType:i?i.contentType:void 0};else{n.local||(n.local=(0,l.deepClone)(n.common));const t=e[r-1].substring(o.length);if(delete n.local.itemsMap[t],Object.getOwnPropertyNames(n.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+o)}return t})}flush(e){return this._getAllDescendentPaths(e).then(e=>this.getNodes(e)).then(e=>{for(const t in e){const r=e[t];r&&r.common&&r.local&&this._emitChange({path:r.path,origin:"local",oldValue:!1===r.local.body?void 0:r.local.body,newValue:!1===r.common.body?void 0:r.common.body}),e[t]=void 0}return this.setNodes(e)})}_emitChange(e){a.default.changeEvents[e.origin]&&this._emit("change",e)}fireInitial(){a.default.changeEvents.local&&this.forAllNodes(e=>{if((0,l.isDocument)(e.path)){const t=u(e);t&&this._emitChange({path:e.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:t.body,newContentType:t.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(e){this.diffHandler=e}migrate(e){return"object"!=typeof e||e.common||(e.common={},"string"==typeof e.path?"/"===e.path.substr(-1)&&"object"==typeof e.body&&(e.common.itemsMap=e.body):(e.local||(e.local={}),e.local.body=e.body,e.local.contentType=e.contentType)),e}_updateNodes(e,t){return new Promise((r,o)=>{this._doUpdateNodes(e,t,{resolve:r,reject:o})})}_doUpdateNodes(e,t,r){this._updateNodesRunning?this._updateNodesQueued.push({paths:e,cb:t,promise:r}):(this._updateNodesRunning=!0,this.getNodes(e).then(o=>{const n=(0,l.deepClone)(o),i=[];o=t(e,o);for(const e in o){const t=o[e];(0,l.equal)(t,n[e])?delete o[e]:(0,l.isDocument)(e)&&((0,l.equal)(t.local.body,t.local.previousBody)&&t.local.contentType===t.local.previousContentType||i.push({path:e,origin:"window",oldValue:t.local.previousBody,newValue:!1===t.local.body?void 0:t.local.body,oldContentType:t.local.previousContentType,newContentType:t.local.contentType}),delete t.local.previousBody,delete t.local.previousContentType)}this.setNodes(o).then(()=>{this._emitChangeEvents(i),r.resolve({statusCode:200})})}).then(()=>Promise.resolve(),e=>{r.reject(e)}).then(()=>{this._updateNodesRunning=!1;const e=this._updateNodesQueued.shift();e&&this._doUpdateNodes(e.paths,e.cb,e.promise)}))}_emitChangeEvents(e){for(let t=0,r=e.length;t<r;t++)this._emitChange(e[t]),this.diffHandler&&this.diffHandler(e[t].path)}_getAllDescendentPaths(e){return(0,l.isFolder)(e)?this.getNodes([e]).then(t=>{const r=[e],o=u(t[e]),n=Object.keys(o.itemsMap).map(t=>this._getAllDescendentPaths(e+t).then(e=>{for(let t=0,o=e.length;t<o;t++)r.push(e[t])}));return Promise.all(n).then(()=>r)}):Promise.resolve([e])}_getInternals(){return{getLatest:u,makeNode:p,isOutdated:c}}}(0,l.applyMixins)(h,[i.default]),e.exports=h},function(e,t,r){e.exports=class{constructor(){this.reset()}static _rs_init(){}get scopes(){return Object.keys(this.scopeModeMap).map(e=>({name:e,mode:this.scopeModeMap[e]}))}get scopeParameter(){return this.scopes.map(e=>`${this._scopeNameForParameter(e)}:${e.mode}`).join(" ")}claim(e,t){if("string"!=typeof e||-1!==e.indexOf("/")||0===e.length)throw new Error("Scope should be a non-empty string without forward slashes");if(!t.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(e),this.scopeModeMap[e]=t}get(e){return this.scopeModeMap[e]}remove(e){const t={};for(const e in this.scopeModeMap)t[e]=this.scopeModeMap[e];this.reset(),delete t[e];for(const e in t)this.claim(e,t[e])}checkPermission(e,t){const r=this.get(e);return r&&("r"===t||"rw"===r)}checkPathPermission(e,t){if(this.checkPermission("*",t))return!0;const r=this._getModuleName(e);return!!this.checkPermission(r,t)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(e){if("/"!==e[0])throw new Error("Path should start with a slash");const t=e.replace(/^\/public/,"").match(/^\/([^/]*)\//);return t?t[1]:"*"}_adjustRootPaths(e){"*"in this.scopeModeMap||"*"===e?this.rootPaths=["/"]:e in this.scopeModeMap||(this.rootPaths.push("/"+e+"/"),this.rootPaths.push("/public/"+e+"/"))}_scopeNameForParameter(e){if("*"===e.name&&this.storageType){if("2012.04"===this.storageType)return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return e.name}setStorageType(e){this.storageType=e}}},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=r(0),i=o(r(1));e.exports=class{constructor(){this.pendingActivations=[],this.reset()}set(e,t){if("string"!=typeof e)throw new Error("path should be a string");if(!(0,n.isFolder)(e))throw new Error("path should be a folder");if(!t.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[e]=t,"ALL"===t&&(this.activateHandler?this.activateHandler(e):this.pendingActivations.push(e))}enable(e){this.set(e,"ALL")}disable(e){this.set(e,"FLUSH")}onActivate(e){(0,i.default)("[Caching] Setting activate handler",e,this.pendingActivations),this.activateHandler=e;for(let t=0;t<this.pendingActivations.length;t++)e(this.pendingActivations[t]);this.pendingActivations=[]}checkPath(e){return void 0!==this._rootPaths[e]?this._rootPaths[e]:"/"===e?"SEEN":this.checkPath((0,n.containingFolder)(e))}reset(){this._rootPaths={}}static _rs_init(){}}},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=o(r(8)),i=o(r(2)),a=r(0),s=r(7),l=r(9),u="https://www.googleapis.com",c="remotestorage:googledrive";let p;function d(e){return"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),decodeURIComponent(e)}function h(e){return e.replace(/[^\/]+\/?$/,"")}function m(e){const t=e.split("/");return"/"===e.substr(-1)?t[t.length-2]+"/":t[t.length-1]}function f(e){return(0,a.cleanPath)("/remotestorage/"+e)}class S{constructor(e){this._items={},this.maxAge=e,this._items={}}get(e){const t=this._items[e],r=(new Date).getTime();return t&&t.t>=r-this.maxAge?t.v:void 0}set(e,t){this._items[e]={v:t,t:(new Date).getTime()}}}class g extends l.RemoteBase{constructor(e,t){if(super(e),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this.addEvents(["connected","not-connected"]),this.clientId=t,this._fileIdCache=new S(300),p=(0,a.localStorageAvailable)(),p){const e=(0,a.getJSONFromLocalStorage)(c);e&&this.configure(e)}}configure(e){void 0!==e.userAddress&&(this.userAddress=e.userAddress),void 0!==e.token&&(this.token=e.token);const t=function(){p&&localStorage.setItem(c,JSON.stringify({userAddress:this.userAddress,token:this.token}))},r=function(){this.connected=!1,delete this.token,p&&localStorage.removeItem(c)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),t.apply(this)):this.info().then(e=>{this.userAddress=e.user.emailAddress,this._emit("connected"),t.apply(this)}).catch(()=>{r.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):r.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}get(e,t={}){return(0,a.isFolder)(e)?this._getFolder(f(e)):this._getFile(f(e),t)}put(e,t,r,o={}){const n=f(e);function i(e){if(e.status>=200&&e.status<300){const t=JSON.parse(e.responseText),r=this.stripQuotes(t.etag);return Promise.resolve({statusCode:200,contentType:t.mimeType,revision:r})}return 412===e.status?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+e.status+" ("+e.responseText+")")}return this._getFileId(n).then(e=>e?o&&"*"===o.ifNoneMatch?i({status:412}):this._updateFile(e,n,t,r,o).then(i):this._createFile(n,t,r).then(i))}delete(e,t={}){const r=f(e);return this._getFileId(r).then(e=>e?this._getMeta(e).then(r=>{let o;return"object"==typeof r&&"string"==typeof r.etag&&(o=this.stripQuotes(r.etag)),t&&t.ifMatch&&t.ifMatch!==o?{statusCode:412,revision:o}:this._request("DELETE",u+"/drive/v2/files/"+e,{}).then(e=>200===e.status||204===e.status?{statusCode:200}:Promise.reject("Delete failed: "+e.status+" ("+e.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){return this._request("GET","https://www.googleapis.com/drive/v2/about?fields=user",{}).then(function(e){try{const t=JSON.parse(e.responseText);return Promise.resolve(t)}catch(e){return Promise.reject(e)}})}_updateFile(e,t,r,o,n){const i={mimeType:o},a={"Content-Type":"application/json; charset=UTF-8"};return n&&n.ifMatch&&(a["If-Match"]=this.addQuotes(n.ifMatch)),this._request("PUT",u+"/upload/drive/v2/files/"+e+"?uploadType=resumable",{body:JSON.stringify(i),headers:a}).then(e=>412===e.status?e:this._request("PUT",e.getResponseHeader("Location"),{body:o.match(/^application\/json/)?JSON.stringify(r):r}))}_createFile(e,t,r){return this._getParentId(e).then(o=>{const n={title:d(m(e)),mimeType:r,parents:[{kind:"drive#fileLink",id:o}]};return this._request("POST",u+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(n),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>this._request("POST",e.getResponseHeader("Location"),{body:r.match(/^application\/json/)?JSON.stringify(t):t}))})}_getFile(e,t){return this._getFileId(e).then(e=>this._getMeta(e).then(e=>{let r;if("object"==typeof e&&"string"==typeof e.etag&&(r=this.stripQuotes(e.etag)),t&&t.ifNoneMatch&&r===t.ifNoneMatch)return Promise.resolve({statusCode:304});if(!e.downloadUrl){if(!e.exportLinks||!e.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:e.mimeType,revision:r});e.mimeType+=";export=text/html",e.downloadUrl=e.exportLinks["text/html"]}return this._request("GET",e.downloadUrl,{responseType:"arraybuffer"}).then(t=>(0,a.getTextFromArrayBuffer)(t.response,"UTF-8").then(function(o){let n=o;if(e.mimeType.match(/^application\/json/))try{n=JSON.parse(n)}catch(e){}else(0,a.shouldBeTreatedAsBinary)(o,e.mimeType)&&(n=t.response);return{statusCode:200,body:n,contentType:e.mimeType,revision:r}}))}))}_getFolder(e){return this._getFileId(e).then(t=>{let r,o,n;if(!t)return Promise.resolve({statusCode:404});const i="'"+t+"' in parents";return this._request("GET",u+"/drive/v2/files?q="+encodeURIComponent(i)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(t=>{var i;if(200!==t.status)return Promise.reject("request failed or something: "+t.status);try{r=JSON.parse(t.responseText)}catch(e){return Promise.reject("non-JSON response from GoogleDrive")}n={};for(const t of r.items)(null===(i=t.labels)||void 0===i?void 0:i.trashed)||(o=this.stripQuotes(t.etag),"application/vnd.google-apps.folder"===t.mimeType?(this._fileIdCache.set(e+(0,a.cleanPath)(t.title)+"/",t.id),n[t.title+"/"]={ETag:o}):(this._fileIdCache.set(e+(0,a.cleanPath)(t.title),t.id),n[t.title]={ETag:o,"Content-Type":t.mimeType,"Content-Length":t.fileSize}));return Promise.resolve({statusCode:200,body:n,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(e){const t=h(e);return this._getFileId(t).then(e=>e?Promise.resolve(e):this._createFolder(t))}_createFolder(e){return this._getParentId(e).then(t=>this._request("POST",u+"/drive/v2/files",{body:JSON.stringify({title:d(m(e)),mimeType:"application/vnd.google-apps.folder",parents:[{id:t}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>{const t=JSON.parse(e.responseText);return Promise.resolve(t.id)}))}_getFileId(e){let t;return"/"===e?Promise.resolve("root"):(t=this._fileIdCache.get(e))?Promise.resolve(t):this._getFolder(h(e)).then(()=>(t=this._fileIdCache.get(e),t?Promise.resolve(t):"/"===e.substr(-1)?this._createFolder(e).then(()=>this._getFileId(e)):Promise.resolve()))}_getMeta(e){return this._request("GET",u+"/drive/v2/files/"+e,{}).then(function(t){return 200===t.status?Promise.resolve(JSON.parse(t.responseText)):Promise.reject("request (getting metadata for "+e+") failed with status: "+t.status)})}_request(e,t,r){return this.isForbiddenRequestMethod(e,t)?Promise.reject(`Don't use ${e} on directories!`):(r.headers||(r.headers={}),r.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:e,isFolder:(0,a.isFolder)(t)}),(0,s.requestWithTimeout)(e,t,r).then(r=>r&&401===r.status?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:e,isFolder:(0,a.isFolder)(t),success:!0}),Promise.resolve(r)),r=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:e,isFolder:(0,a.isFolder)(t),success:!1}),Promise.reject(r))))}static _rs_init(e){const t=e.apiKeys.googledrive;var r;t&&(e.googledrive=new g(e,t.clientId),"googledrive"===e.backend&&(e._origRemote=e.remote,e.remote=e.googledrive,(r=e)._origBaseClientGetItemURL||(r._origBaseClientGetItemURL=n.default.prototype.getItemURL,n.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(e){var t;e.setBackend(void 0),e._origRemote&&(e.remote=e._origRemote,delete e._origRemote),(t=e)._origBaseClientGetItemURL&&(n.default.prototype.getItemURL=t._origBaseClientGetItemURL,delete t._origBaseClientGetItemURL)}}(0,a.applyMixins)(g,[i.default]),e.exports=g},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(2)),a=n(r(8)),s=n(r(27)),l=n(r(10)),u=n(r(5)),c=r(0),p=r(7),d=r(9),h=n(r(4));let m;const f="remotestorage:dropbox",S="https://api.dropboxapi.com/2/files/list_folder",g="https://api.dropboxapi.com/2/files/list_folder/continue";function C(e){return("/remotestorage/"+e).replace(/\/+$/,"").replace(/\/+/g,"/")}const D=/[\u007f-\uffff]/g;function K(e){return JSON.stringify(e).replace(D,function(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)})}function L(e,t){return new RegExp("^"+t.join("\\/")+"(\\/|$)").test(e.error_summary)}function O(e){return e instanceof ArrayBuffer||(0,p.isArrayBufferView)(e)}class y extends d.RemoteBase{constructor(e){if(super(e),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=e.apiKeys.dropbox.appKey,this.TOKEN_URL="https://api.dropboxapi.com/oauth2/token",this._revCache=new s.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},m=(0,c.localStorageAvailable)(),m){const e=(0,c.getJSONFromLocalStorage)(f);e&&this.configure(e),this._itemRefs=(0,c.getJSONFromLocalStorage)(f+":shares")||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){return o(this,void 0,void 0,function*(){try{if(this.rs.setBackend("dropbox"),this.token)v(this.rs);else{const{codeVerifier:e,codeChallenge:t,state:r}=yield(0,c.generateCodeVerifier)();sessionStorage.setItem("remotestorage:codeVerifier",e),sessionStorage.setItem("remotestorage:state",r),this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"account_info.read files.content.read files.content.write files.metadata.read files.metadata.write",clientId:this.clientId,response_type:"code",state:r,code_challenge:t,code_challenge_method:"S256",token_access_type:"offline"})}}catch(e){throw this.rs._emit("error",e),this.rs.setBackend(void 0),e}})}configure(e){return o(this,void 0,void 0,function*(){void 0!==e.userAddress&&(this.userAddress=e.userAddress),void 0!==e.token&&(this.token=e.token),void 0!==e.refreshToken&&(this.refreshToken=e.refreshToken),void 0!==e.tokenType&&(this.tokenType=e.tokenType);const t=()=>{m&&localStorage.setItem(f,JSON.stringify({userAddress:this.userAddress,token:this.token,refreshToken:this.refreshToken,tokenType:this.tokenType}))},r=()=>{this.connected=!1,m&&localStorage.removeItem(f),this.rs.setBackend(void 0)};if(this.refreshToken||this.token)if(this.connected=!0,this.userAddress)this._emit("connected"),t();else try{const e=yield this.info();this.userAddress=e.email,this._emit("connected"),t()}catch(e){this.connected=!1,this.rs._emit("error",new Error("Could not fetch user info.")),t.apply(this)}else r()})}_getFolder(e){const t=this._revCache,r=r=>{let n;if(200!==r.status&&409!==r.status)return Promise.reject("Unexpected response status: "+r.status);try{n=JSON.parse(r.responseText)}catch(e){return Promise.reject(e)}if(409===r.status)return L(n,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+n.error_summary));const i=n.entries.reduce((r,o)=>{try{const n="folder"===o[".tag"],i=o.path_display.split("/").slice(-1)[0]+(n?"/":"");if(n)r[i]={ETag:t.get(e+i)};else{const t=new Date(o.server_modified);r[i]={ETag:o.rev,"Content-Length":o.size,"Last-Modified":t.toUTCString()},this._revCache.set(e+i,o.rev)}}catch(t){console.error(`[Dropbox] folder “${e}” has entry ${JSON.stringify(o)}:`,t)}return r},{});return n.has_more?o(n.cursor).then(function(e){return Object.assign(i,e)}):Promise.resolve(i)},o=e=>{const t={body:{cursor:e}};return this._request("POST",g,t).then(r)};return this._request("POST",S,{body:{path:C(e)}}).then(r).then(function(r){return Promise.resolve({statusCode:200,body:r,contentType:"application/json; charset=UTF-8",revision:t.get(e)})})}get(e,t={}){if(!this.connected)return Promise.reject("not connected (path: "+e+")");const r=this._revCache.get(e);if(null===r)return Promise.resolve({statusCode:404});if(t&&t.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(e,t));if(r&&r===t.ifNoneMatch)return Promise.resolve({statusCode:304})}if("/"===e.slice(-1))return this._getFolder(e);const o={headers:{"Dropbox-API-Arg":K({path:C(e)})},responseType:"arraybuffer"};return t&&t.ifNoneMatch&&(o.headers["If-None-Match"]=t.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",o).then(t=>{const r=t.status;let o,n,i,a;return 200!==r&&409!==r?Promise.resolve({statusCode:r}):(o=t.getResponseHeader("Dropbox-API-Result"),(0,c.getTextFromArrayBuffer)(t.response,"UTF-8").then(s=>{n=s,409===r&&(o=n);try{o=JSON.parse(o)}catch(e){return Promise.reject(e)}if(409===r)return L(o,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+e+'"): '+o.error_summary));if(i=t.getResponseHeader("Content-Type"),a=o.rev,this._revCache.set(e,a),this._shareIfNeeded(e),(0,c.shouldBeTreatedAsBinary)(s,i))n=t.response;else try{n=JSON.parse(n),i="application/json; charset=UTF-8"}catch(e){}return{statusCode:r,body:n,contentType:i,revision:a}}))})}put(e,t,r,n={}){return o(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected (path: "+e+")");const o=this._revCache.get(e);if(n&&n.ifMatch&&o&&o!==n.ifMatch)return{statusCode:412,revision:o};if(n&&"*"===n.ifNoneMatch&&o&&"rev"!==o)return{statusCode:412,revision:o};if(!r.match(/charset=/)&&O(t)&&(r+="; charset=binary"),t.length>157286400)throw new Error("Cannot upload file larger than 150MB");const i=n&&(n.ifMatch||"*"===n.ifNoneMatch),a={body:t,contentType:r,path:e};if(i){const t=yield this._getMetadata(e);if(n&&"*"===n.ifNoneMatch&&t)return{statusCode:412,revision:t.rev};if(n&&n.ifMatch&&t&&t.rev!==n.ifMatch)return{statusCode:412,revision:t.rev}}const s=yield this._uploadSimple(a);return this._shareIfNeeded(e),s})}delete(e,t={}){return o(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected (path: "+e+")");const r=this._revCache.get(e);if((null==t?void 0:t.ifMatch)&&r&&t.ifMatch!==r)return{statusCode:412,revision:r};if(null==t?void 0:t.ifMatch){const r=yield this._getMetadata(e);if((null==t?void 0:t.ifMatch)&&r&&r.rev!==t.ifMatch)return{statusCode:412,revision:r.rev}}return this._deleteSimple(e)})}_shareIfNeeded(e){if(e.match(/^\/public\/.*[^/]$/)&&void 0===this._itemRefs[e])return this.share(e)}share(e){const t={body:{path:C(e)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",t).then(t=>{if(200!==t.status&&409!==t.status)return Promise.reject(new Error("Invalid response status:"+t.status));let r;try{r=JSON.parse(t.responseText)}catch(e){return Promise.reject(new Error("Invalid response body: "+t.responseText))}return 409===t.status?L(r,["shared_link_already_exists"])?this._getSharedLink(e):Promise.reject(new Error("API error: "+r.error_summary)):Promise.resolve(r.url)}).then(t=>(this._itemRefs[e]=t,m&&localStorage.setItem(f+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(t)),t=>(t.message='Sharing Dropbox file or folder ("'+e+'") failed: '+t.message,Promise.reject(t)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(e){let t;try{const r=JSON.parse(e.responseText);t=null==r?void 0:r.email}catch(t){return Promise.reject(new Error("Could not query current account info: Invalid API response: "+e.responseText))}return Promise.resolve({email:t})})}_request(e,t,r,n=1){return o(this,void 0,void 0,function*(){if(this.isForbiddenRequestMethod(e,t))throw`Don't use ${e} on directories!`;if(!this.token)throw new u.default("No access token");r.headers||(r.headers={}),r.headers.Authorization="Bearer "+this.token,"object"!=typeof r.body||O(r.body)||(r.body=JSON.stringify(r.body),r.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:e,isFolder:(0,c.isFolder)(t)});try{const o=yield(0,p.requestWithTimeout)(e,t,r);return this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:e,isFolder:(0,c.isFolder)(t),success:!0}),401===(null==o?void 0:o.status)&&this.refreshToken?n>=3?(console.error(`Abandoned after ${n} attempts: ${e} ${t}`),o):(this.rs._emit("wire-busy",{method:e,isFolder:(0,c.isFolder)(t)}),yield h.default.refreshAccessToken(this.rs,this,this.refreshToken),this.rs._emit("wire-done",{method:e,isFolder:(0,c.isFolder)(t),success:!0}),this._request(e,t,r,n+1)):[503,429].includes(null==o?void 0:o.status)?(this.online&&(this.online=!1,this.rs._emit("network-offline")),n>=3?(console.warn(`Abandoned after ${n} attempts: ${e} ${t}`),o):(yield new Promise(e=>setTimeout(e,(0,p.retryAfterMs)(o))),this._request(e,t,r,n+1))):o}catch(r){throw this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:e,isFolder:(0,c.isFolder)(t),success:!1}),r}})}fetchDelta(...e){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const t=e=>o(this,void 0,void 0,function*(){let r,o;"string"==typeof e?(r=g,o={cursor:e}):(r=S,o={path:"/remotestorage",recursive:!0,include_deleted:!0});try{const n=yield this._request("POST",r,{body:o});if(401===n.status)throw new u.default;if(200!==n.status&&409!==n.status)throw new Error("Invalid response status: "+n.status);let i;try{i=JSON.parse(n.responseText)}catch(e){throw new Error("Invalid response body: "+n.responseText)}if(409===n.status){if(!L(i,["path","not_found"]))throw new Error("API returned an error: "+i.error_summary);i={cursor:null,entries:[],has_more:!1}}if(e||this._revCache.deactivatePropagation(),i.entries.forEach(e=>{const t=e.path_display.slice(14);"deleted"===e[".tag"]?(this._revCache.delete(t),this._revCache.delete(t+"/")):"file"===e[".tag"]&&this._revCache.set(t,e.rev)}),this._fetchDeltaCursor=i.cursor,i.has_more)return t(i.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}catch(e){if("timeout"===e)return;throw e}});return this._fetchDeltaPromise=t(this._fetchDeltaCursor).catch(e=>("object"==typeof e&&"message"in e?e.message="Dropbox: fetchDelta: "+e.message:e="Dropbox: fetchDelta: "+e,this.rs._emit("error",e),this._fetchDeltaPromise=null,Promise.reject(e))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(e))),this._fetchDeltaPromise}_getMetadata(e){const t={path:C(e)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:t}).then(e=>{if(200!==e.status&&409!==e.status)return Promise.reject(new Error("Invalid response status:"+e.status));let t;try{t=JSON.parse(e.responseText)}catch(t){return Promise.reject(new Error("Invalid response body: "+e.responseText))}return 409===e.status?L(t,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+t.error_summary)):Promise.resolve(t)}).then(void 0,t=>(t.message='Could not load metadata for file or folder ("'+e+'"): '+t.message,Promise.reject(t)))}_uploadSimple(e){const t={path:C(e.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return e.ifMatch&&(t.mode={".tag":"update",update:e.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:e.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":K(t)}}).then(t=>{if(200!==t.status&&409!==t.status)return Promise.resolve({statusCode:t.status});let r;try{r=JSON.parse(t.responseText)}catch(e){return Promise.reject(new Error("Invalid API result: "+t.responseText))}return 409===t.status?L(r,["path","conflict"])?this._getMetadata(e.path).then(function(e){return Promise.resolve({statusCode:412,revision:e.rev})}):(this.rs._emit("error",new Error(r.error_summary)),Promise.resolve({statusCode:t.status})):(this._revCache.set(e.path,r.rev),Promise.resolve({statusCode:t.status,revision:r.rev}))})}_deleteSimple(e){const t={path:C(e)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:t}).then(e=>{if(200!==e.status&&409!==e.status)return Promise.resolve({statusCode:e.status});let t;try{t=JSON.parse(e.responseText)}catch(t){return Promise.reject(new Error("Invalid response body: "+e.responseText))}if(409===e.status){if(L(t,["path_lookup","not_found"]))return Promise.resolve({statusCode:404});this.rs._emit("error",new Error(t.error_summary))}return Promise.resolve({statusCode:e.status})}).then(t=>(200!==t.statusCode&&404!==t.statusCode||(this._revCache.delete(e),delete this._itemRefs[e]),Promise.resolve(t)),t=>(t.message='Could not delete Dropbox file or folder ("'+e+'"): '+t.message,Promise.reject(t)))}_getSharedLink(e){return o(this,void 0,void 0,function*(){const t={body:{path:C(e),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",t).then(e=>{if(200!==e.status&&409!==e.status)return Promise.reject(new Error("Invalid response status: "+e.status));let t;try{t=JSON.parse(e.responseText)}catch(t){return Promise.reject(new Error("Invalid response body: "+e.responseText))}return 409===e.status?Promise.reject(new Error("API error: "+(null==t?void 0:t.error_summary)||!1)):t.links.length?Promise.resolve(t.links[0].url):Promise.reject(new Error("No links returned"))},t=>(t.message='Could not get link to a shared file or folder ("'+e+'"): '+t.message,Promise.reject(t)))})}static _rs_init(e){m=(0,c.localStorageAvailable)(),e.apiKeys.dropbox&&(e.dropbox=new y(e)),"dropbox"===e.backend&&v(e)}static _rs_supported(){return!0}static _rs_cleanup(e){!function(e){(function(e){e._origRemote&&(e.remote=e._origRemote,delete e._origRemote)})(e),function(e){e._dropboxOrigSync&&(e.sync.sync=e._dropboxOrigSync,delete e._dropboxOrigSync)}(e),function(e){e._origBaseClientGetItemURL&&(a.default.prototype.getItemURL=e._origBaseClientGetItemURL,delete e._origBaseClientGetItemURL)}(e),w(e)}(e),m&&localStorage.removeItem(f),e.setBackend(void 0)}}function b(e,...t){e._dropboxOrigSync||(e._dropboxOrigSync=e.sync.sync.bind(e.sync),e.sync.sync=function(){return this.dropbox.fetchDelta(e,...t).then(e._dropboxOrigSync,function(t){e._emit("error",new l.default(t)),e._emit("sync-done")})}.bind(e))}function w(e){e._dropboxOrigSyncCycle&&(e.syncCycle=e._dropboxOrigSyncCycle,delete e._dropboxOrigSyncCycle)}function v(e){!function(e){e._origRemote||(e._origRemote=e.remote,e.remote=e.dropbox)}(e),e.sync?b(e):function(e,...t){e._dropboxOrigSyncCycle||(e._dropboxOrigSyncCycle=e.syncCycle,e.syncCycle=()=>{if(!e.sync)throw new Error("expected sync to be initialized by now");b(e),e._dropboxOrigSyncCycle(e,...t),w(e)})}(e),function(e){e._origBaseClientGetItemURL||(e._origBaseClientGetItemURL=a.default.prototype.getItemURL,a.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(e)}(0,c.applyMixins)(y,[i.default]),e.exports=y},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=o(r(28)),i=o(r(1)),a=r(0);let s,l,u={};const c=function(e){return new Promise((t,r)=>e in u?t(u[e]):new n.default({tls_only:!1,uri_fallback:!0,request_timeout:5e3}).lookup(e,function(o,n){if(o)return r(o);if("object"!=typeof n.idx.links.remotestorage||"number"!=typeof n.idx.links.remotestorage.length||n.idx.links.remotestorage.length<=0)return(0,i.default)("[Discover] WebFinger record for "+e+" does not have remotestorage defined in the links section ",JSON.stringify(n.json)),r("WebFinger record for "+e+" does not have remotestorage defined in the links section.");const a=n.idx.links.remotestorage[0],s=a.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||a.properties["auth-endpoint"],c=a.properties["http://remotestorage.io/spec/version"]||a.type;return u[e]={href:a.href,storageApi:c,authURL:s,properties:a.properties},l&&(localStorage["remotestorage:discover"]=JSON.stringify({cache:u})),t(u[e])}))};(c.DiscoveryError=function(e){this.name="DiscoveryError",this.message=e,this.stack=(new Error).stack}).prototype=Object.create(Error.prototype),c.DiscoveryError.prototype.constructor=c.DiscoveryError,c._rs_init=function(){if(l=(0,a.localStorageAvailable)(),l)try{const e=JSON.parse(localStorage["remotestorage:discover"]);u=e.cache}catch(e){}},c._rs_supported=function(){return s=Object.prototype.hasOwnProperty.call(a.globalContext,"XMLHttpRequest"),s},c._rs_cleanup=function(){l&&delete localStorage["remotestorage:discover"]},e.exports=c},function(e,t,r){const o=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(2)),n=r(0);class i{constructor(){this.addEvents(["background","foreground"]),this.mode="undefined"!=typeof window?"browser":"node","browser"===this.mode&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){"browser"===this.mode&&(void 0!==document.hidden?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):void 0!==document.mozHidden?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return"browser"===this.mode}isNode(){return"node"===this.mode}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}(0,n.applyMixins)(i,[o.default]),e.exports=i},function(e,t,r){e.exports=r(19)},function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const s=a(r(3)),l=a(r(1)),u=r(0),c=a(r(12)),p=a(r(4)),d=a(r(8)),h=a(r(13)),m=a(r(2)),f=a(r(14)),S=a(r(15)),g=a(r(16)),C=a(r(10)),D=a(r(5)),K=a(r(30)),L=i(r(0)),O=(0,u.getGlobalContext)();let y;function b(e){return 403!==e.statusCode&&401!==e.statusCode||this._emit("error",new D.default),Promise.resolve(e)}function w(e){return"number"==typeof e&&e>=2e3&&e<=36e5}class v{constructor(e){this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=K.default.loadFeatures,this.features=K.default.features,this.loadFeature=K.default.loadFeature,this.featureSupported=K.default.featureSupported,this.featureDone=K.default.featureDone,this.featuresDone=K.default.featuresDone,this.featuresLoaded=K.default.featuresLoaded,this.featureInitialized=K.default.featureInitialized,this.featureFailed=K.default.featureFailed,this.hasFeature=K.default.hasFeature,this._setCachingModule=K.default._setCachingModule,this._collectCleanupFunctions=K.default._collectCleanupFunctions,this._fireReady=K.default._fireReady,this.initFeature=K.default.initFeature,"object"==typeof e&&(0,u.extend)(s.default,e),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),y=(0,u.localStorageAvailable)(),y&&(this.apiKeys=(0,u.getJSONFromLocalStorage)("remotestorage:api-keys")||{},this.setBackend(localStorage.getItem("remotestorage:backend")||"remotestorage"));const t=this.on;this.on=function(e,r){if(this._allLoaded)switch(e){case"features-loaded":setTimeout(r,0);break;case"ready":this.remote&&setTimeout(r,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(r,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(r,0)}return t.call(this,e,r)},this._init(),this.fireInitial=function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}.bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){s.default.modules.forEach(this.addModule.bind(this))}authorize(e){if(this.access.setStorageType(this.remote.storageApi),void 0===e.scope&&(e.scope=this.access.scopeParameter),O.cordova)e.redirectUri=s.default.cordovaRedirectUri;else{const t=p.default.getLocation();let r=t.origin;"/"!==t.pathname&&(r+=t.pathname),e.redirectUri=r}void 0===e.clientId&&(e.clientId=e.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),p.default.authorize(this,e)}impliedauth(e,t){e=e||this.remote.storageApi,t=t||String(document.location),(0,l.default)("ImpliedAuth proceeding due to absent authURL; storageApi = "+e+" redirectUri = "+t),this.remote.configure({token:p.default.IMPLIED_FAKE_TOKEN}),document.location.href=t}connect(e,t){if(this.setBackend("remotestorage"),e.indexOf("@")<0&&!e.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))return void this._emit("error",new v.DiscoveryError("Not a valid user address or URL."));if(e.indexOf("@")<0&&!e.match(/^https?:\/\//)&&(e="https://"+e),O.cordova){if("string"!=typeof s.default.cordovaRedirectUri)return void this._emit("error",new v.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!O.cordova.InAppBrowser)return void this._emit("error",new v.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:e}),this._emit("connecting");const r=setTimeout(()=>{this._emit("error",new v.DiscoveryError("No storage information found for this user address."))},s.default.discoveryTimeout);(0,g.default)(e).then(o=>{if(clearTimeout(r),this._emit("authing"),o.userAddress=e,this.remote.configure(o),!this.remote.connected)if(o.authURL)if(void 0===t)this.authorize({authURL:o.authURL});else{if("string"!=typeof t)throw new Error("Supplied bearer token must be a string");(0,l.default)("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:t})}else this.impliedauth()},()=>{clearTimeout(r),this._emit("error",new v.DiscoveryError("No storage information found for this user address."))})}reconnect(){this.remote.configure({token:null}),"remotestorage"===this.backend?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const e=this._cleanups.length;let t=0;const r=()=>{t++,t>=e&&(this._init(),this._emit("disconnected"))};e>0?this._cleanups.forEach(e=>{const t=e(this);"object"==typeof t&&"function"==typeof t.then?t.then(r):r()}):r()}setBackend(e){this.backend=e,y&&(e?localStorage.setItem("remotestorage:backend",e):localStorage.removeItem("remotestorage:backend"))}onChange(e,t){this._pathHandlers.change[e]||(this._pathHandlers.change[e]=[]),this._pathHandlers.change[e].push(t)}enableLog(){s.default.logging=!0}disableLog(){s.default.logging=!1}log(...e){l.default.apply(v,e)}setApiKeys(e){const t=[V.GOOGLE,V.DROPBOX];if("object"!=typeof e||!Object.keys(e).every(e=>t.includes(e)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(e).forEach(t=>{const r=e[t];if(r){switch(t){case V.DROPBOX:this.apiKeys[V.DROPBOX]={appKey:r},void 0!==this.dropbox&&this.dropbox.clientId===r||S.default._rs_init(this);break;case V.GOOGLE:this.apiKeys[V.GOOGLE]={clientId:r},void 0!==this.googledrive&&this.googledrive.clientId===r||f.default._rs_init(this)}return!0}delete this.apiKeys[t]}),y&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(e){if("string"!=typeof e||!e.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");s.default.cordovaRedirectUri=e}_setGPD(e,t){function r(e){return function(...r){return e.apply(t,r).then(b.bind(this))}}this.get=r(e.get),this.put=r(e.put),this.delete=r(e.delete)}_pendingGPD(e){return(...t)=>{const r=Array.prototype.slice.call(t);return new Promise((t,o)=>{this._pending.push({method:e,args:r,promise:{resolve:t,reject:o}})})}}_processPending(){this._pending.forEach(e=>{try{this[e.method](...e.args).then(e.promise.resolve,e.promise.reject)}catch(t){e.promise.reject(t)}}),this._pending=[]}_bindChange(e){e.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(e,t){Object.keys(this._pathHandlers[e]).forEach(r=>{const o=r.length;t.path.substr(0,o)===r&&this._pathHandlers[e][r].forEach(e=>{const o={};for(const e in t)o[e]=t[e];o.relativePath=t.path.replace(new RegExp("^"+r),"");try{e(o)}catch(e){console.error("'change' handler failed: ",e,e.stack),this._emit("error",e)}})})}scope(e){if("string"!=typeof e)throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(e,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new d.default(this,e)}getSyncInterval(){return s.default.syncInterval}setSyncInterval(e){if(!w(e))throw e+" is not a valid sync interval";const t=s.default.syncInterval;s.default.syncInterval=e,this._emit("sync-interval-change",{oldValue:t,newValue:e})}getBackgroundSyncInterval(){return s.default.backgroundSyncInterval}setBackgroundSyncInterval(e){if(!w(e))throw e+" is not a valid sync interval";const t=s.default.backgroundSyncInterval;s.default.backgroundSyncInterval=e,this._emit("sync-interval-change",{oldValue:t,newValue:e})}getCurrentSyncInterval(){return s.default.isBackground?s.default.backgroundSyncInterval:s.default.syncInterval}getRequestTimeout(){return s.default.requestTimeout}setRequestTimeout(e){if("number"!=typeof e)throw e+" is not a valid request timeout";s.default.requestTimeout=e}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return s.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(e){const t=e.name,r=e.builder;if(Object.defineProperty(this,t,{configurable:!0,get:function(){const e=this._loadModule(t,r);return Object.defineProperty(this,t,{value:e}),e}}),-1!==t.indexOf("-")){const e=t.replace(/\-[a-z]/g,function(e){return e[1].toUpperCase()});Object.defineProperty(this,e,{get:function(){return this[t]}})}}_loadModule(e,t){if(t)return t(new d.default(this,"/"+e+"/"),new d.default(this,"/public/"+e+"/")).exports;throw"Unknown module: "+e}}var V;v.Authorize=p.default,v.SyncError=C.default,v.Unauthorized=D.default,v.DiscoveryError=g.default.DiscoveryError,v.util=L,Object.defineProperty(v.prototype,"access",{get:function(){const e=new c.default;return Object.defineProperty(this,"access",{value:e}),e},configurable:!0}),Object.defineProperty(v.prototype,"caching",{configurable:!0,get:function(){const e=new h.default;return Object.defineProperty(this,"caching",{value:e}),e}}),(0,u.applyMixins)(v,[m.default]),function(e){e.GOOGLE="googledrive",e.DROPBOX="dropbox"}(V||(V={})),e.exports=v},function(e,t,r){(function(e){
/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <http://feross.org>
     * @license  MIT
     */
var o=r(21),n=r(22),i=r(23);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,r)}function u(e,t,r,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,o){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,r):new Uint8Array(t,r,o),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t),e}(e,t,r,o):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|m(t,r),n=(e=s(e,o)).write(t,r);return n!==o&&(e=e.slice(0,n)),e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var o=0;o<r;o+=1)e[o]=255&t[o];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(e).length;default:if(o)return B(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,r){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return V(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return w(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function S(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function g(e,t,r,o,n){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,o)),l.isBuffer(t))return 0===t.length?-1:C(e,t,r,o,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):C(e,[t],r,o,n);throw new TypeError("val must be string, number or Buffer")}function C(e,t,r,o,n){var i,a=1,s=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var p=!0,d=0;d<l;d++)if(u(e,i+d)!==u(t,d)){p=!1;break}if(p)return i}return-1}function D(e,t,r,o){r=Number(r)||0;var n=e.length-r;o?(o=Number(o))>n&&(o=n):o=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");o>i/2&&(o=i/2);for(var a=0;a<o;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function K(e,t,r,o){return j(B(t,e.length-r),e,r,o)}function L(e,t,r,o){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,o)}function O(e,t,r,o){return L(e,t,r,o)}function y(e,t,r,o){return j(M(t),e,r,o)}function b(e,t,r,o){return j(function(e,t){for(var r,o,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)o=(r=e.charCodeAt(a))>>8,n=r%256,i.push(n),i.push(o);return i}(t,e.length-r),e,r,o)}function w(e,t,r){return 0===t&&r===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,r))}function v(e,t,r){r=Math.min(e.length,r);for(var o=[],n=t;n<r;){var i,a,s,l,u=e[n],c=null,p=u>239?4:u>223?3:u>191?2:1;if(n+p<=r)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[n+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[n+1],a=e[n+2],128==(192&i)&&128==(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[n+1],a=e[n+2],s=e[n+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,o.push(c>>>10&1023|55296),c=56320|1023&c),o.push(c),n+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",o=0;o<t;)r+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return r}(o)}function V(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n)o+=String.fromCharCode(127&e[n]);return o}function T(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n)o+=String.fromCharCode(e[n]);return o}function E(e,t,r){var o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);for(var n="",i=t;i<r;++i)n+=W(e[i]);return n}function I(e,t,r){for(var o=e.slice(t,r),n="",i=0;i<o.length;i+=2)n+=String.fromCharCode(o[i]+256*o[i+1]);return n}function k(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,r,o,n,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function x(e,t,r,o){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-r,2);n<i;++n)e[r+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function R(e,t,r,o){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-r,4);n<i;++n)e[r+n]=t>>>8*(o?n:3-n)&255}function P(e,t,r,o,n,i){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function A(e,t,r,o,i){return i||P(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function F(e,t,r,o,i){return i||P(e,0,r,8),n.write(e,t,r,o,52,8),r+8}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,o){return c(t),t<=0?s(e,t):void 0!==r?"string"==typeof o?s(e,t).fill(r,o):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,o=t.length,n=0,i=Math.min(r,o);n<i;++n)if(e[n]!==t[n]){r=e[n],o=t[n];break}return r<o?-1:o<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var o=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,n),n+=a.length}return o},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?v(this,0,e):f.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,o,n){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),t<0||r>e.length||o<0||n>this.length)throw new RangeError("out of range index");if(o>=n&&t>=r)return 0;if(o>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(n>>>=0)-(o>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(o,n),c=e.slice(t,r),p=0;p<s;++p)if(u[p]!==c[p]){i=u[p],a=c[p];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},l.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return D(this,e,t,r);case"utf8":case"utf-8":return K(this,e,t,r);case"ascii":return L(this,e,t,r);case"latin1":case"binary":return O(this,e,t,r);case"base64":return y(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){var r,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;r=new l(n,void 0);for(var i=0;i<n;++i)r[i]=this[i+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return o},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var o=this[e+--t],n=1;t>0&&(n*=256);)o+=this[e+--t]*n;return o},l.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var o=t,n=1,i=this[e+--o];o>0&&(n*=256);)i+=this[e+--o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,o){e=+e,t|=0,r|=0,o||_(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,i=0;for(this[t]=255&e;++i<r&&(n*=256);)this[t+i]=e/n&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,o){e=+e,t|=0,r|=0,o||_(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,i=1;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=e/i&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,o){if(e=+e,t|=0,!o){var n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,o){if(e=+e,t|=0,!o){var n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return A(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return A(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,o){if(r||(r=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);var n,i=o-r;if(this===e&&r<t&&t<o)for(n=i-1;n>=0;--n)e[n+t]=this[n+r];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},l.prototype.fill=function(e,t,r,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=l.isBuffer(e)?e:B(new l(e,o).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var o=e.length,n=null,i=[],a=0;a<o;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===o){(t-=3)>-1&&i.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function M(e){return o.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,o){for(var n=0;n<o&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(6))},function(e,t,r){t.byteLength=function(e){var t=u(e),r=t[0],o=t[1];return 3*(r+o)/4-o},t.toByteArray=function(e){var t,r,o=u(e),a=o[0],s=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,p=s>0?a-4:a;for(r=0;r<p;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],a=0,s=r-n;a<s;a+=16383)i.push(c(e,a,a+16383>s?s:a+16383));return 1===n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)o[s]=a[s],n[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var n,i,a=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(o[(i=n)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,o,n){var i,a,s=8*n-o-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?n-1:0,d=r?-1:1,h=e[t+p];for(p+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+e[t+p],p+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=o;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,o),i-=u}return(h?-1:1)*a*Math.pow(2,i-o)},t.write=function(e,t,r,o,n,i){var a,s,l,u=8*i-n-1,c=(1<<u)-1,p=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,m=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,n),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;e[r+h]=255&s,h+=m,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;e[r+h]=255&a,h+=m,a/=256,u-=8);e[r+h-m]|=128*f}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var o,n,i;n=[],void 0===(i="function"==typeof(o=function(){var e,t,r,o;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),o=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(n){if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Object.keys called on non-object");var i=[];for(var a in n)e.call(n,a)&&i.push(a);if(t)for(var s=0;s<o;s++)e.call(n,r[s])&&i.push(r[s]);return i})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var o=0;if(arguments.length>1&&((o=Number(arguments[1]))!=o?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=r)return-1;for(var n=o>=0?o:Math.max(r-Math.abs(o),0);n<r;n++)if(n in t&&t[n]===e)return n;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var n={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};function a(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function s(e){var t="";n[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var r="",o="",s=!0,l=!1,u=!1;"+"===t?s=!1:"."===t?(o=".",r="."):"/"===t?(o="/",r="/"):"#"===t?(o="#",s=!1):";"===t?(o=";",r=";",l=!0,u=!0):"?"===t?(o="?",r="&",l=!0):"&"===t&&(o="&",r="&",l=!0);for(var c=[],p=e.split(","),d=[],h={},m=0;m<p.length;m++){var f=p[m],S=null;if(-1!==f.indexOf(":")){var g=f.split(":");f=g[0],S=parseInt(g[1],10)}for(var C={};i[f.charAt(f.length-1)];)C[f.charAt(f.length-1)]=!0,f=f.substring(0,f.length-1);var D={truncate:S,name:f,suffices:C};d.push(D),h[f]=D,c.push(f)}var K=function(e){for(var t="",n=0,i=0;i<d.length;i++){var c=d[i],p=e(c.name);if(null==p||Array.isArray(p)&&0===p.length||"object"==typeof p&&0===Object.keys(p).length)n++;else if(t+=i===n?o:r||",",Array.isArray(p)){l&&(t+=c.name+"=");for(var h=0;h<p.length;h++)h>0&&(t+=c.suffices["*"]&&r||",",c.suffices["*"]&&l&&(t+=c.name+"=")),t+=s?encodeURIComponent(p[h]).replace(/!/g,"%21"):a(p[h])}else if("object"==typeof p){l&&!c.suffices["*"]&&(t+=c.name+"=");var m=!0;for(var f in p)m||(t+=c.suffices["*"]&&r||","),m=!1,t+=s?encodeURIComponent(f).replace(/!/g,"%21"):a(f),t+=c.suffices["*"]?"=":",",t+=s?encodeURIComponent(p[f]).replace(/!/g,"%21"):a(p[f])}else l&&(t+=c.name,u&&""===p||(t+="=")),null!=c.truncate&&(p=p.substring(0,c.truncate)),t+=s?encodeURIComponent(p).replace(/!/g,"%21"):a(p)}return t};return K.varNames=c,{prefix:o,substitution:K}}function l(e){if(!(this instanceof l))return new l(e);for(var t=e.split("{"),r=[t.shift()],o=[],n=[],i=[];t.length>0;){var a=t.shift(),u=a.split("}")[0],c=a.substring(u.length+1),p=s(u);n.push(p.substitution),o.push(p.prefix),r.push(c),i=i.concat(p.substitution.varNames)}this.fill=function(e){for(var t=r[0],o=0;o<n.length;o++)t+=(0,n[o])(e),t+=r[o+1];return t},this.varNames=i,this.template=e}l.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var u=function(e,t,r,o,n){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,o&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),n&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||g("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};function c(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!c(e[r],t[r]))return!1}else{var o;for(o in e)if(void 0===t[o]&&void 0!==e[o])return!1;for(o in t)if(void 0===e[o]&&void 0!==t[o])return!1;for(o in e)if(!c(e[o],t[o]))return!1}return!0}return!1}u.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},u.prototype.createError=function(e,t,r,o,n,i,a){var s=new O(e,t,r,o,n);return s.message=this.errorReporter(s,i,a),s},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,t,r){for(var o=e;o<this.errors.length;o++)this.errors[o]=this.errors[o].prefixWith(t,r);return this},u.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var o=this.createError(C.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),n=this.handleError(o);if(n)return n}return null},u.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},u.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(C.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},u.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var o=e,n="";if(-1!==e.indexOf("#")&&(n=e.substring(e.indexOf("#")+1),o=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[o]){r=this.schemas[o];var i=decodeURIComponent(n);if(""===i)return this.resolveRefs(r,t);if("/"!==i.charAt(0))return;for(var a=i.split("/").slice(1),s=0;s<a.length;s++){var l=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[l]){r=void 0;break}r=r[l]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[o]&&(this.missing.push(o),this.missing[o]=o,this.missingMap[o]=o)},u.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"==typeof e)for(var o in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==o)if("object"==typeof e[o])this.searchSchemas(e[o],t);else if("$ref"===o){var n=f(e[o]);n&&void 0===this.schemas[n]&&void 0===this.missingMap[n]&&(this.missingMap[n]=n)}},u.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}e===f(e)+"#"&&(e=f(e)),this.schemas[e]=t,delete this.missingMap[e],S(t,e),this.searchSchemas(t,e)},u.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},u.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},u.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,t,r,o,n){var i;if(!(t=this.resolveRefs(t)))return null;if(t instanceof O)return this.errors.push(t),t;var a,s=this.errors.length,l=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var c=e[this.validatedSchemasKey].indexOf(t);if(-1!==c)return this.errors=this.errors.concat(e[this.validationErrorsKey][c]),null}if(Object.isFrozen(e)&&-1!==(a=this.scannedFrozen.indexOf(e))){var p=this.scannedFrozenSchemas[a].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][p]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),l=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][l]=t,this.scannedFrozenValidationErrors[a][l]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=t,e[this.validationErrorsKey][u]=[]}}var d=this.errors.length,h=this.validateBasic(e,t,n)||this.validateNumeric(e,t,n)||this.validateString(e,t,n)||this.validateArray(e,t,n)||this.validateObject(e,t,n)||this.validateCombinations(e,t,n)||this.validateHypermedia(e,t,n)||this.validateFormat(e,t,n)||this.validateDefinedKeywords(e,t,n)||null;if(i){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(h||d!==this.errors.length)for(;r&&r.length||o&&o.length;){var m=r&&r.length?""+r.pop():null,f=o&&o.length?""+o.pop():null;h&&(h=h.prefixWith(m,f)),this.prefixErrors(d,m,f)}return null!==l?this.scannedFrozenValidationErrors[a][l]=this.errors.slice(s):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(s)),this.handleError(h)},u.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(C.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"==typeof r?this.createError(C.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},u.prototype.validateDefinedKeywords=function(e,t,r){for(var o in this.definedKeywords)if(void 0!==t[o])for(var n=this.definedKeywords[o],i=0;i<n.length;i++){var a=(0,n[i])(e,t[o],t,r);if("string"==typeof a||"number"==typeof a)return this.createError(C.KEYWORD_CUSTOM,{key:o,message:a},"","",null,e,t).prefixWith(null,o);if(a&&"object"==typeof a){var s=a.code;if("string"==typeof s){if(!C[s])throw new Error("Undefined error code (use defineError): "+s);s=C[s]}else"number"!=typeof s&&(s=C.KEYWORD_CUSTOM);var l="object"==typeof a.message?a.message:{key:o,message:a.message||"?"},u=a.schemaPath||"/"+o.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(s,l,a.dataPath||null,u,null,e,t)}}return null},u.prototype.validateBasic=function(e,t,r){var o;return(o=this.validateType(e,t,r))||(o=this.validateEnum(e,t,r))?o.prefixWith(null,"type"):null},u.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var o=t.type;Array.isArray(o)||(o=[o]);for(var n=0;n<o.length;n++){var i=o[n];if(i===r||"integer"===i&&"number"===r&&e%1==0)return null}return this.createError(C.INVALID_TYPE,{type:r,expected:o.join("/")},"","",null,e,t)},u.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++)if(c(e,t.enum[r]))return null;return this.createError(C.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},u.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var p=Math.pow(2,-51),d=1-p;function h(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function m(e,t){return t=h(t||""),e=h(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(r=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,o=[],r.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?o.pop():o.push(e)}),o.join("").replace(/^\//,"/"===r.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var r,o}function f(e){return e.split("#")[0]}function S(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=m(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)S(e[r],t);else for(var o in"string"==typeof e.$ref&&(e.$ref=m(t,e.$ref)),e)"enum"!==o&&S(e[o],t)}function g(e){var t=y[e=e||"en"];return function(e){var r=t[e.code]||L[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var o=e.params;return r.replace(/\{([^{}]*)\}/g,function(e,t){var r=o[t];return"string"==typeof r||"number"==typeof r?r:e})}}u.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var o=e/r%1;if(o>=p&&o<d)return this.createError(C.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},u.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(C.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(C.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(C.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(C.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},u.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(C.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},u.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},u.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(C.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(C.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},u.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var o,n="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(o=i[1],n=i[2]):o=t.pattern,r=new RegExp(o,n)}return r.test(e)?null:this.createError(C.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},u.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},u.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(C.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))||void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(C.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},u.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var o=r+1;o<e.length;o++)if(c(e[r],e[o])){var n=this.createError(C.ARRAY_UNIQUE,{match1:r,match2:o},"","/uniqueItems",null,e,t);if(this.handleError(n))return n}return null},u.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var o,n;if(Array.isArray(t.items)){for(n=0;n<e.length;n++)if(n<t.items.length){if(o=this.validateAll(e[n],t.items[n],[n],["items",n],r+"/"+n))return o}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(o=this.createError(C.ARRAY_ADDITIONAL_ITEMS,{},"/"+n,"/additionalItems",null,e,t),this.handleError(o)))return o}else if(o=this.validateAll(e[n],t.additionalItems,[n],["additionalItems"],r+"/"+n))return o}else for(n=0;n<e.length;n++)if(o=this.validateAll(e[n],t.items,[n],["items"],r+"/"+n))return o;return null},u.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},u.prototype.validateObjectMinMaxProperties=function(e,t){var r,o=Object.keys(e);return void 0!==t.minProperties&&o.length<t.minProperties&&(r=this.createError(C.OBJECT_PROPERTIES_MINIMUM,{propertyCount:o.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))||void 0!==t.maxProperties&&o.length>t.maxProperties&&(r=this.createError(C.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:o.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},u.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var o=t.required[r];if(void 0===e[o]){var n=this.createError(C.OBJECT_REQUIRED,{key:o},"","/required/"+r,null,e,t);if(this.handleError(n))return n}}return null},u.prototype.validateObjectProperties=function(e,t,r){var o;for(var n in e){var i=r+"/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[n]&&(a=!0,o=this.validateAll(e[n],t.properties[n],[n],["properties",n],i)))return o;if(void 0!==t.patternProperties)for(var s in t.patternProperties)if(new RegExp(s).test(n)&&(a=!0,o=this.validateAll(e[n],t.patternProperties[s],[n],["patternProperties",s],i)))return o;if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(o=this.createError(C.OBJECT_ADDITIONAL_PROPERTIES,{key:n},"","/additionalProperties",null,e,t).prefixWith(n,null),this.handleError(o)))return o}else if(o=this.validateAll(e[n],t.additionalProperties,[n],["additionalProperties"],i))return o}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},u.prototype.validateObjectDependencies=function(e,t,r){var o;if(void 0!==t.dependencies)for(var n in t.dependencies)if(void 0!==e[n]){var i=t.dependencies[n];if("string"==typeof i){if(void 0===e[i]&&(o=this.createError(C.OBJECT_DEPENDENCY_KEY,{key:n,missing:i},"","",null,e,t).prefixWith(null,n).prefixWith(null,"dependencies"),this.handleError(o)))return o}else if(Array.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];if(void 0===e[s]&&(o=this.createError(C.OBJECT_DEPENDENCY_KEY,{key:n,missing:s},"","/"+a,null,e,t).prefixWith(null,n).prefixWith(null,"dependencies"),this.handleError(o)))return o}else if(o=this.validateAll(e,i,[],["dependencies",n],r))return o}return null},u.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},u.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var o,n=0;n<t.allOf.length;n++){var i=t.allOf[n];if(o=this.validateAll(e,i,[],["allOf",n],r))return o}return null},u.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var o,n,i=[],a=this.errors.length;this.trackUnknownProperties&&(o=this.unknownPropertyPaths,n=this.knownPropertyPaths);for(var s=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[l],c=this.errors.length,p=this.validateAll(e,u,[],["anyOf",l],r);if(null===p&&c===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)n[d]=!0,delete o[d];for(var h in this.unknownPropertyPaths)n[h]||(o[h]=!0);s=!1;continue}return null}p&&i.push(p.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=o,this.knownPropertyPaths=n),s?(i=i.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(C.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},u.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var o,n,i=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(o=this.unknownPropertyPaths,n=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[l],c=this.errors.length,p=this.validateAll(e,u,[],["oneOf",l],r);if(null===p&&c===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,s),this.createError(C.ONE_OF_MULTIPLE,{index1:i,index2:l},"","/oneOf",null,e,t);if(i=l,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)n[d]=!0,delete o[d];for(var h in this.unknownPropertyPaths)n[h]||(o[h]=!0)}}else p&&a.push(p)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=o,this.knownPropertyPaths=n),null===i?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(C.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},u.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var o,n,i=this.errors.length;this.trackUnknownProperties&&(o=this.unknownPropertyPaths,n=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=o,this.knownPropertyPaths=n),null===a&&0===s.length?this.createError(C.NOT_PASSED,{},"","/not",null,e,t):null},u.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var o,n=0;n<t.links.length;n++){var i=t.links[n];if("describedby"===i.rel){for(var a=new l(i.href),s=!0,u=0;u<a.varNames.length;u++)if(!(a.varNames[u]in e)){s=!1;break}if(s){var c={$ref:a.fillFromObject(e)};if(o=this.validateAll(e,c,[],["links",n],r))return o}}}};var C={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},D={};for(var K in C)D[C[K]]=K;var L={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function O(e,t,r,o,n){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+o);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=o||"",this.subErrors=n||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}O.prototype=Object.create(Error.prototype),O.prototype.constructor=O,O.prototype.name="ValidationError",O.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var y={},b=function e(t){var r,o,n=new u,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(o=e,!0)},addFormat:function(){n.addFormat.apply(n,arguments)},language:function(e){return e?(y[e]||(e=e.split("-")[0]),!!y[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in C)t[r]&&!t[C[r]]&&(t[C[r]]=t[r]);var o=e.split("-")[0];if(y[o])for(r in y[e]=Object.create(y[o]),t)void 0===y[o][r]&&(y[o][r]=t[r]),y[e][r]=t[r];else y[e]=t,y[o]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,i,a){var s=g(r),l=new u(n,!1,o?function(e,t,r){return o(e,t,r)||s(e,t,r)}:s,i,a);"string"==typeof t&&(t={$ref:t}),l.addSchema("",t);var c=l.validateAll(e,t,null,null,"");return!c&&a&&(c=l.banUnknownProperties(e,t)),this.error=c,this.missing=l.missing,this.valid=null===c,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,i,a){var s=g(r),l=new u(n,!0,o?function(e,t,r){return o(e,t,r)||s(e,t,r)}:s,i,a);"string"==typeof t&&(t={$ref:t}),l.addSchema("",t),l.validateAll(e,t,null,null,""),a&&l.banUnknownProperties(e,t);var c={toString:function(){return this.valid?"valid":this.error.message}};return c.errors=l.errors,c.missing=l.missing,c.valid=0===c.errors.length,c},addSchema:function(){return n.addSchema.apply(n,arguments)},getSchema:function(){return n.getSchema.apply(n,arguments)},getSchemaMap:function(){return n.getSchemaMap.apply(n,arguments)},getSchemaUris:function(){return n.getSchemaUris.apply(n,arguments)},getMissingUris:function(){return n.getMissingUris.apply(n,arguments)},dropSchemas:function(){n.dropSchemas.apply(n,arguments)},defineKeyword:function(){n.defineKeyword.apply(n,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==C[e])throw new Error("Error already defined: "+e+" as "+C[e]);if(void 0!==D[t])throw new Error("Error code already used: "+D[t]+" as "+t);for(var o in C[e]=t,D[t]=e,L[e]=L[t]=r,y){var n=y[o];n[e]&&(n[t]=n[t]||n[e])}},reset:function(){n.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:S,resolveUrl:m,getDocumentUri:f,errorCodes:C};return i.language(t||"en"),i}();return b.addLanguage("en-gb",L),b.tv4=b,b})?o.apply(t,n):o)||(e.exports=i)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseClientTypes=void 0;class o{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(e,t,r,o){const n=e+"/"+t;if(o.extends){const t=o.extends.split("/"),r=1===t.length?e+"/"+t.shift():t.join("/"),i=this.uris[r];if(!i)throw"Type '"+n+"' tries to extend unknown schema '"+r+"'";o.extends=this.schemas[i]}this.uris[n]=r,this.aliases[r]=n,this.schemas[r]=o}resolveAlias(e){return this.uris[e]}getSchema(e){return this.schemas[e]}inScope(e){const t=e.length,r={};for(const o in this.uris)if(o.substr(0,t+1)===e+"/"){const e=this.uris[o];r[e]=this.schemas[e]}return r}}t.BaseClientTypes=o;const n=new o;t.default=n},function(e,t,r){class o extends Error{constructor(e){super();const t=new Error("Schema not found: "+e);return t.name="SchemaNotFound",t}}e.exports=o},function(e,t,r){e.exports=class{constructor(e){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=e,this.activatePropagation()}get(e){e=e.toLowerCase();let t=this._storage[e];return void 0===t&&(t=this.defaultValue,this._storage[e]=t),t}set(e,t){return e=e.toLowerCase(),this._storage[e]===t||(this._storage[e]=t,t||delete this._itemsRev[e],this._updateParentFolderItemRev(e,t),this._canPropagate&&this._propagate(e)),t}delete(e){return this.set(e,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}_generateHash(e){const t=e.sort().join("|");return""+this._hashCode(t)}_updateParentFolderItemRev(e,t){if("/"!==e){const r=this._getParentFolder(e);this._itemsRev[r]||(this._itemsRev[r]={});const o=this._itemsRev[r];t?o[e]=t:delete o[e],this._updateParentFolderItemRev(r,this.defaultValue)}}_getParentFolder(e){return e.substr(0,e.lastIndexOf("/",e.length-2)+1)}_propagate(e){if("/"!==e){const t=this._getParentFolder(e),r=this._itemsRev[t],o=[];for(const e in r)o.push(r[e]);const n=this._generateHash(o);this.set(t,n)}}_generateFolderRev(e){const t=this._itemsRev[e];let r=this.defaultValue;if(t){const e=[];for(const r in t){let o;o="/"===r.substr(-1)?this._generateFolderRev(r):t[r],e.push(o)}e.length>0&&(r=this._generateHash(e))}return this.set(e,r),r}}},function(e,t,r){var o;
/*!
     * webfinger.js
     *   http://github.com/silverbucket/webfinger.js
     *
     * Developed and Maintained by:
     *   Nick Jennings <nick@silverbucket.net>
     *
     * webfinger.js is released under the AGPL (see LICENSE).
     *
     * You don't have to do anything special to choose one license or the other and you don't
     * have to notify anyone which license you are using.
     * Please see the corresponding license file for details of these licenses.
     * You are free to use, modify and distribute this software, but all copyright
     * information must remain.
     *
     */"function"!=typeof fetch&&"function"!=typeof XMLHttpRequest&&(XMLHttpRequest=r(29)),function(){var r={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},n={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},i=["webfinger","host-meta","host-meta.json"];function a(e){return e.toString=function(){return this.message},e}function s(e){"object"!=typeof e&&(e={}),this.config={tls_only:void 0===e.tls_only||e.tls_only,webfist_fallback:void 0!==e.webfist_fallback&&e.webfist_fallback,uri_fallback:void 0!==e.uri_fallback&&e.uri_fallback,request_timeout:void 0!==e.request_timeout?e.request_timeout:1e4}}s.prototype.__fetchJRD=function(e,t,r){if("function"==typeof fetch)return this.__fetchJRD_fetch(e,t,r);if("function"==typeof XMLHttpRequest)return this.__fetchJRD_XHR(e,t,r);throw new Error("add a polyfill for fetch or XMLHttpRequest")},s.prototype.__fetchJRD_fetch=function(e,t,r){var o,n=this;"function"==typeof AbortController&&(o=new AbortController);var i=fetch(e,{headers:{Accept:"application/jrd+json, application/json"},signal:o?o.signal:void 0}).then(function(t){if(t.ok)return t.text();throw 404===t.status?a({message:"resource not found",url:e,status:t.status}):a({message:"error during request",url:e,status:t.status})},function(t){throw a({message:"error during request",url:e,status:void 0,err:t})}).then(function(t){if(n.__isValidJSON(t))return t;throw a({message:"invalid json",url:e,status:void 0})}),s=new Promise(function(t,r){setTimeout(function(){r(a({message:"request timed out",url:e,status:void 0})),o&&o.abort()},n.config.request_timeout)});Promise.race([i,s]).then(function(e){r(e)}).catch(function(e){t(e)})},s.prototype.__fetchJRD_XHR=function(e,t,r){var o=this,n=!1,i=new XMLHttpRequest;function s(){if(!n)return n=!0,200===i.status?o.__isValidJSON(i.responseText)?r(i.responseText):t(a({message:"invalid json",url:e,status:i.status})):404===i.status?t(a({message:"resource not found",url:e,status:i.status})):i.status>=301&&i.status<=302?function(e){return"string"==typeof e&&"https"===e.split("://")[0]}(i.getResponseHeader("Location"))?l():t(a({message:"no redirect URL found",url:e,status:i.status})):t(a({message:"error during request",url:e,status:i.status}))}function l(){i.onreadystatechange=function(){4===i.readyState&&s()},i.onload=function(){s()},i.ontimeout=function(){return t(a({message:"request timed out",url:e,status:i.status}))},i.open("GET",e,!0),i.timeout=o.config.request_timeout,i.setRequestHeader("Accept","application/jrd+json, application/json"),i.send()}return l()},s.prototype.__isValidJSON=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},s.prototype.__isLocalhost=function(e){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(e)},s.prototype.__processJRD=function(e,t,o,i){var s=JSON.parse(t);if("object"!=typeof s||"object"!=typeof s.links)return void 0!==s.error?o(a({message:s.error,request:e})):o(a({message:"unknown response from server",request:e}));var l=s.links;Array.isArray(l)||(l=[]);var u={object:s,json:t,idx:{}};u.idx.properties={name:void 0},u.idx.links=JSON.parse(JSON.stringify(n)),l.map(function(e,t){if(r.hasOwnProperty(e.rel)&&u.idx.links[r[e.rel]]){var o={};Object.keys(e).map(function(t,r){o[t]=e[t]}),u.idx.links[r[e.rel]].push(o)}});var c=JSON.parse(t).properties;for(var p in c)c.hasOwnProperty(p)&&"http://packetizer.com/ns/name"===p&&(u.idx.properties.name=c[p]);return i(u)},s.prototype.lookup=function(e,t){if("string"!=typeof e)throw new Error("first parameter must be a user address");if("function"!=typeof t)throw new Error("second parameter must be a callback");var r=this,o="";o=e.indexOf("://")>-1?e.replace(/ /g,"").split("/")[2]:e.replace(/ /g,"").split("@")[1];var n=0,a="https";function s(){var t="";return e.split("://")[1]||(t="acct:"),a+"://"+o+"/.well-known/"+i[n]+"?resource="+t+e}function l(e){if(r.config.uri_fallback&&"webfist.org"!==o&&n!==i.length-1)return n+=1,u();if(!r.config.tls_only&&"https"===a)return n=0,a="http",u();if(!r.config.webfist_fallback||"webfist.org"===o)return t(e);n=0,a="http",o="webfist.org";var l=s();r.__fetchJRD(l,t,function(e){r.__processJRD(l,e,t,function(e){"object"==typeof e.idx.links.webfist&&"string"==typeof e.idx.links.webfist[0].href&&r.__fetchJRD(e.idx.links.webfist[0].href,t,function(e){r.__processJRD(l,e,t,function(e){return t(null,t)})})})})}function u(){var e=s();r.__fetchJRD(e,l,function(o){r.__processJRD(e,o,t,function(e){t(null,e)})})}return r.__isLocalhost(o)&&(a="http"),setTimeout(u,0)},s.prototype.lookupLink=function(e,t,r){if(!n.hasOwnProperty(t))return r("unsupported rel "+t);this.lookup(e,function(e,o){var n=o.idx.links[t];return e?r(e):0===n.length?r('no links found with rel="'+t+'"'):r(null,n[0])})},void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()},function(e,t){e.exports=XMLHttpRequest},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=o(r(3)),i=o(r(17)),a=o(r(1)),s=r(0),l=o(r(31)),u=o(r(12)),c=o(r(4)),p=o(r(16)),d=o(r(8)),h=o(r(14)),m=o(r(15)),f=o(r(32)),S=o(r(33)),g=o(r(13)),C=o(r(34)),D=o(r(35)),K=o(r(36)),L={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:f.default,Dropbox:m.default,GoogleDrive:h.default,Access:u.default,Discover:p.default,Authorize:c.default,BaseClient:d.default,Env:i.default},n.default.cache&&(0,s.extend)(this.featureModules,{Caching:g.default,IndexedDB:C.default,LocalStorage:D.default,InMemoryStorage:K.default,Sync:S.default}),n.default.disableFeatures.forEach(e=>{this.featureModules[e]&&delete this.featureModules[e]}),this._allLoaded=!1;for(const e in this.featureModules)this.loadFeature(e)},hasFeature(e){for(let t=this.features.length-1;t>=0;t--)if(this.features[t].name===e)return this.features[t].supported;return!1},loadFeature(e){const t=this.featureModules[e],r=!t._rs_supported||t._rs_supported();(0,a.default)(`[RemoteStorage] [FEATURE ${e}] initializing ...`),"object"==typeof r?r.then(()=>{this.featureSupported(e,!0),this.initFeature(e)},()=>{this.featureSupported(e,!1)}):"boolean"==typeof r?(this.featureSupported(e,r),r&&this.initFeature(e)):this.featureSupported(e,!1)},initFeature(e){const t=this.featureModules[e];let r;try{r=t._rs_init(this)}catch(t){return void this.featureFailed(e,t)}"object"==typeof r&&"function"==typeof r.then?r.then(()=>{this.featureInitialized(e)},t=>{this.featureFailed(e,t)}):this.featureInitialized(e)},featureFailed(e,t){(0,a.default)(`[RemoteStorage] [FEATURE ${e}] initialization failed (${t})`),this.featureDone()},featureSupported(e,t){(0,a.default)(`[RemoteStorage] [FEATURE ${e}]${t?"":"not "} supported`),t||this.featureDone()},featureInitialized(e){(0,a.default)(`[RemoteStorage] [FEATURE ${e}] initialized`),this.features.push({name:e,init:this.featureModules[e]._rs_init,supported:!0,cleanup:this.featureModules[e]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(e=>{if(this.features.some(t=>t.name===e))return this.features.local=this.featureModules[e],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(e){console.error("'ready' failed: ",e,e.stack),this._emit("error",e)}},featuresLoaded(){(0,a.default)("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=n.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(l.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(e){(0,s.logError)(e),this._emit("error",e)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let e=0;e<this.features.length;e++){const t=this.features[e].cleanup;"function"==typeof t&&this._cleanups.push(t)}}};e.exports=L},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})};const n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(r(1));function i(e){return"dropbox"===this.backend&&!!e.match(/^\/public\/.*[^\/]$/)}const a={get:function(e,t){if(this.local){if(void 0===t)t="object"==typeof(r=this).remote&&r.remote.connected&&r.remote.online?2*r.getSyncInterval():((0,n.default)("Not setting default maxAge, because remote is offline or not connected"),!1);else if("number"!=typeof t&&!1!==t)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(e,t,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(e);var r},put:function(e,t,r){return i.bind(this)(e)?a._wrapBusyDone.call(this,this.remote.put(e,t,r)):this.local?this.local.put(e,t,r):a._wrapBusyDone.call(this,this.remote.put(e,t,r))},delete:function(e){return this.local?this.local.delete(e):a._wrapBusyDone.call(this,this.remote.delete(e))},_wrapBusyDone:function(e){return o(this,void 0,void 0,function*(){return this._emit("wire-busy"),e.then(e=>(this._emit("wire-done",{success:!0}),Promise.resolve(e)),e=>(this._emit("wire-done",{success:!1}),Promise.reject(e)))})}};e.exports=a},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(4)),a=n(r(2)),s=n(r(5)),l=n(r(1)),u=r(0),c=r(7),p=r(9);let d;const h="remotestorage:wireclient",m={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};class f extends p.RemoteBase{constructor(e){if(super(e),this._revisionCache={},d=(0,u.localStorageAvailable)(),this.addEvents(["connected","not-connected"]),d){const e=function(){const e=(0,u.getJSONFromLocalStorage)(h)||{},{userAddress:t,href:r,storageApi:o,token:n,properties:i}=e;return{userAddress:t,href:r,storageApi:o,token:n,properties:i}}();e&&setTimeout(()=>{this.configure(e)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const e=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return e?e[1]:"2012.04"}}_request(e,t,r,n,a,p,d){return o(this,void 0,void 0,function*(){if(this.isForbiddenRequestMethod(e,t))return Promise.reject(`Don't use ${e} on directories!`);let o;return r!==i.default.IMPLIED_FAKE_TOKEN&&(n.Authorization="Bearer "+r),this.rs._emit("wire-busy",{method:e,isFolder:(0,u.isFolder)(t)}),(0,c.requestWithTimeout)(e,t,{body:a,headers:n,responseType:"arraybuffer"}).then(r=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:e,isFolder:(0,u.isFolder)(t),success:!0}),n=r.status,[401,403,404,412].indexOf(n)>=0)return(0,l.default)("[WireClient] Error response status",r.status),o=p?this.stripQuotes(r.getResponseHeader("ETag")):void 0,401===r.status&&this.rs._emit("error",new s.default),Promise.resolve({statusCode:r.status,revision:o});if(function(e){return[201,204,304].indexOf(e)>=0}(r.status)||200===r.status&&"GET"!==e)return o=this.stripQuotes(r.getResponseHeader("ETag")),(0,l.default)("[WireClient] Successful request",o),Promise.resolve({statusCode:r.status,revision:o});{const e=r.getResponseHeader("Content-Type");o=p?this.stripQuotes(r.getResponseHeader("ETag")):200===r.status?d:void 0;const t=function(e){let t,r="utf-8";return e&&(t=e.match(/charset=(.+)$/),t&&(r=t[1])),r}(e);return(0,u.shouldBeTreatedAsBinary)(r.response,e)?((0,l.default)("[WireClient] Successful request with unknown or binary mime-type",o),Promise.resolve({statusCode:r.status,body:r.response,contentType:e,revision:o})):(0,u.getTextFromArrayBuffer)(r.response,t).then(t=>((0,l.default)("[WireClient] Successful request",o),Promise.resolve({statusCode:r.status,body:t,contentType:e,revision:o})))}var n},r=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:e,isFolder:(0,u.isFolder)(t),success:!1}),Promise.reject(r)))})}configure(e){if("object"!=typeof e)throw new Error("WireClient configure settings parameter should be an object");if(void 0!==e.userAddress&&(this.userAddress=e.userAddress),void 0!==e.href&&(this.href=e.href),void 0!==e.storageApi&&(this.storageApi=e.storageApi),void 0!==e.token&&(this.token=e.token),void 0!==e.properties&&(this.properties=e.properties),"string"==typeof this.storageApi){const e=m[this.storageApi]||5;this.supportsRevs=e>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,d&&(localStorage[h]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}get(e,t={}){if(!this.connected)return Promise.reject("not connected (path: "+e+")");const r={};return this.supportsRevs&&t.ifNoneMatch&&(r["If-None-Match"]=this.addQuotes(t.ifNoneMatch)),this._request("GET",this.href+(0,u.cleanPath)(e),this.token,r,void 0,this.supportsRevs,this._revisionCache[e]).then(t=>{if(!(0,u.isFolder)(e))return Promise.resolve(t);let r={};if(void 0!==t.body)try{t.body=JSON.parse(t.body)}catch(t){return Promise.reject("Folder description at "+this.href+(0,u.cleanPath)(e)+" is not JSON")}if(200===t.statusCode&&"object"==typeof t.body){if(0===Object.keys(t.body).length)t.statusCode=404;else if("http://remotestorage.io/spec/folder-description"===(o=t.body)["@context"]&&"object"==typeof o.items){for(const r in t.body.items)this._revisionCache[e+r]=t.body.items[r].ETag;r=t.body.items}else Object.keys(t.body).forEach(o=>{this._revisionCache[e+o]=t.body[o],r[o]={ETag:t.body[o]}});return t.body=r,Promise.resolve(t)}return Promise.resolve(t);var o})}put(e,t,r,o={}){if(!this.connected)return Promise.reject("not connected (path: "+e+")");!r.match(/charset=/)&&(t instanceof ArrayBuffer||(0,c.isArrayBufferView)(t))&&(r+="; charset=binary");const n={"Content-Type":r};return this.supportsRevs&&(o.ifMatch&&(n["If-Match"]=this.addQuotes(o.ifMatch)),o.ifNoneMatch&&(n["If-None-Match"]=this.addQuotes(o.ifNoneMatch))),this._request("PUT",this.href+(0,u.cleanPath)(e),this.token,n,t,this.supportsRevs)}delete(e,t={}){if(!this.connected)throw new Error("not connected (path: "+e+")");t||(t={});const r={};return this.supportsRevs&&t.ifMatch&&(r["If-Match"]=this.addQuotes(t.ifMatch)),this._request("DELETE",this.href+(0,u.cleanPath)(e),this.token,r,void 0,this.supportsRevs)}static _rs_init(e){e.remote=new f(e),e.remote.online=!0}static _rs_supported(){return"function"==typeof fetch||"function"==typeof XMLHttpRequest}static _rs_cleanup(){d&&delete localStorage[h]}}(0,u.applyMixins)(f,[a.default]),e.exports=f},function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(3)),a=n(r(17)),s=n(r(2)),l=n(r(1)),u=n(r(4)),c=n(r(10)),p=n(r(5)),d=r(0);let h,m;function f(e,t,r){return{action:e,path:t,promise:r}}function S(e,t){return e.common.revision!==t&&(!e.remote||e.remote.revision!==t)}function g(e){return e.common&&e.common.revision}class C{constructor(e){this._finishedTasks=[],this.rs=e,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(e=>{this.addTask(e),this.doTasks()}),this.rs.caching.onActivate(e=>{this.addTask(e),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return(new Date).getTime()}queueGetRequest(e){return new Promise((t,r)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(e,function(){this.rs.local.get(e).then(e=>t(e))}.bind(this)),this.doTasks()):r("cannot fulfill maxAge requirement - remote is not online"):r("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(e,t){if("object"!=typeof e||Array.isArray(e))return!0;for(const r in e){const o=e[r];if("object"!=typeof o)return!0;if("string"!=typeof o.ETag)return!0;if((0,d.isFolder)(r)){if(-1!==r.substring(0,r.length-1).indexOf("/"))return!0}else{if(-1!==r.indexOf("/"))return!0;if(t){if("string"!=typeof o["Content-Type"])return!0;if("number"!=typeof o["Content-Length"])return!0}}}return!1}corruptItemsMap(e){if("object"!=typeof e||Array.isArray(e))return!0;for(const t in e)if("boolean"!=typeof e[t])return!0;return!1}corruptRevision(e){return"object"!=typeof e||Array.isArray(e)||e.revision&&"string"!=typeof e.revision||e.body&&"string"!=typeof e.body&&"object"!=typeof e.body||e.contentType&&"string"!=typeof e.contentType||e.contentLength&&"number"!=typeof e.contentLength||e.timestamp&&"number"!=typeof e.timestamp||e.itemsMap&&this.corruptItemsMap(e.itemsMap)}isCorrupt(e){return"object"!=typeof e||Array.isArray(e)||"string"!=typeof e.path||this.corruptRevision(e.common)||e.local&&this.corruptRevision(e.local)||e.remote&&this.corruptRevision(e.remote)||e.push&&this.corruptRevision(e.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return o(this,void 0,void 0,function*(){let e=0;return this.rs.local.forAllNodes(t=>{e>100||(this.isCorrupt(t)?((0,l.default)("[Sync] WARNING: corrupt node in local cache",t),"object"==typeof t&&t.path&&(this.addTask(t.path),e++)):(this.needsFetch(t)&&this.rs.access.checkPathPermission(t.path,"r")||(0,d.isDocument)(t.path)&&this.needsPush(t)&&this.rs.access.checkPathPermission(t.path,"rw"))&&(this.addTask(t.path),e++))}).then(()=>e).catch(e=>{throw e})})}inConflict(e){return e.local&&e.remote&&(void 0!==e.remote.body||e.remote.itemsMap)}needsRefresh(e){return!!e.common&&(!e.common.timestamp||this.now()-e.common.timestamp>i.default.syncInterval)}needsFetch(e){return!!this.inConflict(e)||!(!e.common||void 0!==e.common.itemsMap||void 0!==e.common.body)||!(!e.remote||void 0!==e.remote.itemsMap||void 0!==e.remote.body)}needsPush(e){return!this.inConflict(e)&&(!(!e.local||e.push)||void 0)}needsRemotePut(e){return e.local&&e.local.body}needsRemoteDelete(e){return e.local&&!1===e.local.body}getParentPath(e){const t=e.match(/^(.*\/)([^\/]+\/?)$/);if(t)return t[1];throw new Error('Not a valid path: "'+e+'"')}deleteChildPathsFromTasks(){for(const e in this._tasks){const t=(0,d.pathsFromRoot)(e);for(let r=1;r<t.length;r++)this._tasks[t[r]]&&(Array.isArray(this._tasks[e])&&this._tasks[e].length&&Array.prototype.push.apply(this._tasks[t[r]],this._tasks[e]),delete this._tasks[e])}}collectRefreshTasks(){return o(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(e=>{let t;if(this.needsRefresh(e)){try{t=this.getParentPath(e.path)}catch(e){}t&&this.rs.access.checkPathPermission(t,"r")?this.addTask(t):this.rs.access.checkPathPermission(e.path,"r")&&this.addTask(e.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(e=>{throw e})})}flush(e){for(const t in e)"FLUSH"===this.rs.caching.checkPath(t)&&e[t]&&!e[t].local&&((0,l.default)("[Sync] Flushing",t),e[t]=void 0);return e}doTask(e){return this.rs.local.getNodes([e]).then(t=>{const r=t[e];return void 0===r||function(e){return e.remote&&e.remote.revision&&!e.remote.itemsMap&&!e.remote.body}(r)?f("get",e,this.rs.remote.get(e)):this.needsRemotePut(r)?(r.push=(0,d.deepClone)(r.local),r.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(t)).then(()=>{let t;return t=g(r)?{ifMatch:r.common.revision}:{ifNoneMatch:"*"},f("put",e,this.rs.remote.put(e,r.push.body,r.push.contentType,t))})):this.needsRemoteDelete(r)?(r.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(t)).then(()=>g(r)?f("delete",e,this.rs.remote.delete(e,{ifMatch:r.common.revision})):f("get",e,this.rs.remote.get(e)))):g(r)?f("get",e,this.rs.remote.get(e,{ifNoneMatch:r.common.revision})):f("get",e,this.rs.remote.get(e))})}autoMergeFolder(e){if(e.remote.itemsMap&&(e.common=e.remote,delete e.remote,e.common.itemsMap)){for(const t in e.common.itemsMap)e.local.itemsMap[t]||(e.local.itemsMap[t]=!1);(0,d.equal)(e.local.itemsMap,e.common.itemsMap)&&delete e.local}return e}autoMergeDocument(e){return function(e){return(!e.remote||!e.remote.revision||e.remote.revision===e.common.revision)&&(void 0===e.common.body&&!1===e.remote.body||e.remote.body===e.common.body&&e.remote.contentType===e.common.contentType)}(e)?delete(e=function(e){return e.remote&&!1===e.remote.body&&e.local&&!1===e.local.body&&delete e.local,e}(e)).remote:void 0!==e.remote.body&&((0,l.default)("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:e.path,oldValue:e.local.body,newValue:e.remote.body,lastCommonValue:e.common.body,oldContentType:e.local.contentType,newContentType:e.remote.contentType,lastCommonContentType:e.common.contentType}),e.remote.body?e.common=e.remote:e.common={},delete e.remote,delete e.local),e}autoMerge(e){if(e.remote){if(e.local)return(0,d.isFolder)(e.path)?this.autoMergeFolder(e):this.autoMergeDocument(e);if((0,d.isFolder)(e.path))void 0!==e.remote.itemsMap&&(e.common=e.remote,delete e.remote);else if(void 0!==e.remote.body){const t={origin:"remote",path:e.path,oldValue:!1===e.common.body?void 0:e.common.body,newValue:!1===e.remote.body?void 0:e.remote.body,oldContentType:e.common.contentType,newContentType:e.remote.contentType};if((t.oldValue||t.newValue)&&this.rs.local._emitChange(t),!e.remote.body)return;e.common=e.remote,delete e.remote}return e}e.common.body&&this.rs.local._emitChange({origin:"remote",path:e.path,oldValue:e.common.body,newValue:void 0,oldContentType:e.common.contentType,newContentType:void 0})}updateCommonTimestamp(e,t){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(r=>(r[e]&&r[e].common&&r[e].common.revision===t&&(r[e].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(r))))})}markChildren(e,t,r,n){return o(this,void 0,void 0,function*(){const o=[],i={},a={};for(const r in t)o.push(e+r),i[e+r]=t[r];for(const t in n)o.push(e+t);return this.rs.local.getNodes(o).then(t=>{let o,s;for(const l in t)if(s=t[l],i[l])s&&s.common?S(s,i[l].ETag)&&(r[l]=(0,d.deepClone)(s),r[l].remote={revision:i[l].ETag,timestamp:this.now()},r[l]=this.autoMerge(r[l])):(o=this.rs.caching.checkPath(l),"ALL"===o&&(r[l]={path:l,common:{timestamp:this.now()},remote:{revision:i[l].ETag,timestamp:this.now()}})),r[l]&&i[l]["Content-Type"]&&(r[l].remote.contentType=i[l]["Content-Type"]),r[l]&&i[l]["Content-Length"]&&(r[l].remote.contentLength=i[l]["Content-Length"]);else if(n[l.substring(e.length)]&&s&&s.common){if(s.common.itemsMap)for(const e in s.common.itemsMap)a[l+e]=!0;if(s.local&&s.local.itemsMap)for(const e in s.local.itemsMap)a[l+e]=!0;if(s.remote||(0,d.isFolder)(l))r[l]=void 0;else if(r[l]=this.autoMerge(s),void 0===r[l]){const t=this.getParentPath(l),o=r[t],n=l.substring(e.length);o&&o.local&&(delete o.local.itemsMap[n],(0,d.equal)(o.local.itemsMap,o.common.itemsMap)&&delete o.local)}}return this.deleteRemoteTrees(Object.keys(a),r).then(e=>this.rs.local.setNodes(this.flush(e)))})})}deleteRemoteTrees(e,t){return o(this,void 0,void 0,function*(){return 0===e.length?Promise.resolve(t):this.rs.local.getNodes(e).then(e=>o(this,void 0,void 0,function*(){const r={};function o(e,t){if(e&&e.itemsMap)for(const o in e.itemsMap)r[t+o]=!0}for(const r in e){const n=e[r];n&&((0,d.isFolder)(r)?(o(n.common,r),o(n.local,r)):n.common&&void 0!==typeof n.common.body&&(t[r]=(0,d.deepClone)(n),t[r].remote={body:!1,timestamp:this.now()},t[r]=this.autoMerge(t[r])))}return this.deleteRemoteTrees(Object.keys(r),t).then(e=>this.rs.local.setNodes(this.flush(e)))}))})}completeFetch(e,t,r,n){return o(this,void 0,void 0,function*(){let o,i;const a=(0,d.pathsFromRoot)(e);return(0,d.isFolder)(e)?o=[e]:(i=a[1],o=[e,i]),this.rs.local.getNodes(o).then(o=>{let a,s,l=o[e];const u={};function c(e){if(e&&e.itemsMap)for(a in e.itemsMap)t[a]||(u[a]=!0)}if("object"==typeof l&&l.path===e&&"object"==typeof l.common||(l={path:e,common:{}},o[e]=l),l.remote={revision:n,timestamp:this.now()},(0,d.isFolder)(e))for(a in c(l.common),c(l.remote),l.remote.itemsMap={},t)l.remote.itemsMap[a]=!0;else l.remote.body=t,l.remote.contentType=r,s=o[i],s&&s.local&&s.local.itemsMap&&(a=e.substring(i.length),s.local.itemsMap[a]=!0,(0,d.equal)(s.local.itemsMap,s.common.itemsMap)&&delete s.local);return o[e]=this.autoMerge(l),{toBeSaved:o,missingChildren:u}})})}completePush(e,t,r,n){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(o=>{const i=o[e];if(!i.push)throw this.stopped=!0,new Error("completePush called but no push version!");return r?((0,l.default)("[Sync] We have a conflict"),i.remote&&i.remote.revision===n||(i.remote={revision:n||"conflict",timestamp:this.now()},delete i.push),o[e]=this.autoMerge(i)):(i.common={revision:n,timestamp:this.now()},"put"===t?(i.common.body=i.push.body,i.common.contentType=i.push.contentType,(0,d.equal)(i.local.body,i.push.body)&&i.local.contentType===i.push.contentType&&delete i.local,delete i.push):"delete"===t&&(!1===i.local.body?o[e]=void 0:delete i.push)),this.rs.local.setNodes(this.flush(o))})})}dealWithFailure(e){return o(this,void 0,void 0,function*(){return this.rs.local.getNodes([e]).then(t=>{if(t[e])return delete t[e].push,this.rs.local.setNodes(this.flush(t))})})}interpretStatus(e){const t={statusCode:e,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if("string"==typeof e&&("offline"===e||"timeout"===e))return t.successful=!1,t.networkProblems=!0,t;if("number"==typeof e){const r=Math.floor(e/100);return t.successful=2===r||304===e||412===e||404===e,t.conflict=412===e,t.unAuth=401===e&&this.rs.remote.token!==u.default.IMPLIED_FAKE_TOKEN||402===e||403===e,t.notFound=404===e,t.changed=304!==e,t}}handleGetResponse(e,t,r,n,i){return o(this,void 0,void 0,function*(){return t.notFound&&(r=!!(0,d.isFolder)(e)&&{}),t.changed?this.completeFetch(e,r,n,i).then(t=>(0,d.isFolder)(e)?this.corruptServerItemsMap(r)?((0,l.default)("[Sync] WARNING: Discarding corrupt folder description from server for "+e),!1):this.markChildren(e,r,t.toBeSaved,t.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(t.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(e,i).then(()=>!0)})}handleResponse(e,t,r){const o=this.interpretStatus(r.statusCode);if(o.successful){if("get"===t)return this.handleGetResponse(e,o,r.body,r.contentType,r.revision);if("put"===t||"delete"===t)return this.completePush(e,t,o.conflict,r.revision).then(function(){return!0});throw new Error("cannot handle response for unknown action "+t)}{let t;return t=o.unAuth?new p.default:o.networkProblems?new c.default("Network request failed."):new Error("HTTP response code "+o.statusCode+" received."),this.dealWithFailure(e).then(()=>{throw this.rs._emit("error",t),t})}}finishTask(e,t=!0){if(void 0!==e.action){if(!(t&&((0,l.default)("[Sync] queue finished task:",e.path),this._finishedTasks.push(e),this._finishedTasks.length>1)))return(0,l.default)("[Sync] run task:",e.path),e.promise.then(t=>this.handleResponse(e.path,e.action,t),t=>((0,l.default)("[Sync] wireclient rejects its promise!",e.path,e.action,t),this.handleResponse(e.path,e.action,{statusCode:"offline"}))).then(t=>{if(this._finishedTasks.shift(),delete this._timeStarted[e.path],delete this._running[e.path],t&&this._tasks[e.path]){for(let t=0;t<this._tasks[e.path].length;t++)this._tasks[e.path][t]();delete this._tasks[e.path]}this.rs._emit("sync-req-done"),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?((0,l.default)("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done"))):setTimeout(()=>{this.doTasks()},10)})},t=>{(0,l.default)("[Sync] Error",t),this._finishedTasks.shift(),delete this._timeStarted[e.path],delete this._running[e.path],this.rs._emit("sync-req-done"),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):this.done||(this.done=!0,this.rs._emit("sync-done"))});(0,l.default)("[Sync] delaying finished task:",e.path)}else delete this._running[e.path]}doTasks(){let e,t,r=0;e=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const o=e-Object.getOwnPropertyNames(this._running).length;if(o<=0)return!0;for(t in this._tasks)if(!this._running[t]&&(this._timeStarted[t]=this.now(),this._running[t]=this.doTask(t),this._running[t].then(this.finishTask.bind(this)),r++,r>=o))return!0;return r>=o}collectTasks(e){return o(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(t=>t||!1===e?Promise.resolve():this.collectRefreshTasks(),function(e){throw e})})}addTask(e,t){this._tasks[e]||(this._tasks[e]=[]),"function"==typeof t&&this._tasks[e].push(t)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(e){(0,l.default)("[Sync] doTasks error",e)}},function(e){throw(0,l.default)("[Sync] Sync error",e),new Error("Local cache unavailable")})}static _rs_init(e){h=function(){(0,l.default)("[Sync] syncCycleCb calling syncCycle");const t=new a.default;t.isBrowser()&&function(e,t){function r(e){const r=t.getCurrentSyncInterval();i.default.isBackground=!e;const o=t.getCurrentSyncInterval();t._emit("sync-interval-change",{oldValue:r,newValue:o})}e.on("background",()=>r(!1)),e.on("foreground",()=>r(!0))}(t,e),e.sync||(e.sync=new C(e),e.syncStopped&&((0,l.default)("[Sync] Instantiating sync stopped"),e.sync.stopped=!0,delete e.syncStopped)),(0,l.default)("[Sync] syncCycleCb calling syncCycle"),e.syncCycle()},m=function(){e.removeEventListener("connected",m),e.startSync()},e.on("ready",h),e.on("connected",m)}static _rs_cleanup(e){e.stopSync(),e.removeEventListener("ready",h),e.removeEventListener("connected",m),e.sync=void 0,delete e.sync}}(0,d.applyMixins)(C,[s.default]),e.exports=C},function(e,t,r){(function(t){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(2)),a=n(r(11)),s=n(r(1)),l=r(0);let u;class c extends a.default{constructor(e){super(),this.addEvents(["change","local-events-done"]),this.db=e||u,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):(0,s.default)("[IndexedDB] Failed to open DB")}getNodes(e){return o(this,void 0,void 0,function*(){const t=[],r={};for(let o=0,n=e.length;o<n;o++)void 0!==this.changesQueued[e[o]]?r[e[o]]=(0,l.deepClone)(this.changesQueued[e[o]]||void 0):void 0!==this.changesRunning[e[o]]?r[e[o]]=(0,l.deepClone)(this.changesRunning[e[o]]||void 0):t.push(e[o]);return t.length>0?this.getNodesFromDb(t).then(function(e){for(const t in r)e[t]=r[t];return e}):Promise.resolve(r)})}setNodes(e){return o(this,void 0,void 0,function*(){for(const t in e)this.changesQueued[t]=e[t]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){0===this.putsRunning?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=t.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(e){return new Promise((t,r)=>{const o=this.db.transaction(["nodes"],"readonly"),n=o.objectStore("nodes"),i={};this.getsRunning++,e.map(e=>{n.get(e).onsuccess=t=>{i[e]=t.target.result}}),o.oncomplete=()=>{t(i),this.getsRunning--},o.onerror=o.onabort=()=>{r("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(e){return o(this,void 0,void 0,function*(){return new Promise((t,r)=>{const o=this.db.transaction(["nodes"],"readwrite"),n=o.objectStore("nodes"),i=(new Date).getTime();this.putsRunning++,(0,s.default)("[IndexedDB] Starting put",e,this.putsRunning);for(const t in e){const r=e[t];if("object"==typeof r)try{n.put(r)}catch(e){throw(0,s.default)("[IndexedDB] Error while putting",r,e),e}else try{n.delete(t)}catch(e){throw(0,s.default)("[IndexedDB] Error while removing",n,r,e),e}}o.oncomplete=()=>{this.putsRunning--,(0,s.default)("[IndexedDB] Finished put",e,this.putsRunning,(new Date).getTime()-i+"ms"),t()},o.onerror=()=>{this.putsRunning--,r("transaction error")},o.onabort=()=>{r("transaction abort"),this.putsRunning--}})})}reset(e){const t=this.db.name;this.db.close(),c.clean(this.db.name,()=>{c.open(t,(t,r)=>{t?(0,s.default)("[IndexedDB] Error while resetting local storage",t):this.db=r,"function"==typeof e&&e(self)})})}forAllNodes(e){return o(this,void 0,void 0,function*(){return new Promise(t=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=r=>{const o=r.target.result;o?(e(this.migrate(o.value)),o.continue()):t()}})})}closeDB(){0===this.putsRunning?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(e,t){const r=setTimeout(function(){t("timeout trying to open db")},1e4);try{const o=indexedDB.open(e,2);o.onerror=function(){(0,s.default)("[IndexedDB] Opening DB failed",o),clearTimeout(r),t(o.error)},o.onupgradeneeded=function(e){const t=o.result;(0,s.default)("[IndexedDB] Upgrade: from ",e.oldVersion," to ",e.newVersion),1!==e.oldVersion&&((0,s.default)("[IndexedDB] Creating object store: nodes"),t.createObjectStore("nodes",{keyPath:"path"})),(0,s.default)("[IndexedDB] Creating object store: changes"),t.createObjectStore("changes",{keyPath:"path"})},o.onsuccess=function(){clearTimeout(r);const n=o.result;if(!n.objectStoreNames.contains("nodes")||!n.objectStoreNames.contains("changes"))return(0,s.default)("[IndexedDB] Missing object store. Resetting the database."),void c.clean(e,function(){c.open(e,t)});t(null,o.result)}}catch(o){(0,s.default)("[IndexedDB] Failed to open database: "+o),(0,s.default)("[IndexedDB] Resetting database and trying again."),clearTimeout(r),c.clean(e,function(){c.open(e,t)})}}static clean(e,t){const r=indexedDB.deleteDatabase(e);r.onsuccess=function(){(0,s.default)("[IndexedDB] Done removing DB"),t()},r.onerror=r.onabort=function(t){console.error('Failed to remove database "'+e+'"',t)}}static _rs_init(e){return new Promise((t,r)=>{c.open("remotestorage",function(o,n){o?r(o):(u=n,n.onerror=()=>{e._emit("error",o)},t())})})}static _rs_supported(){return new Promise((e,t)=>{const r=(0,l.getGlobalContext)();let o=!1;if("undefined"!=typeof navigator&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(o=!0)),"indexedDB"in r&&!o)try{const r=indexedDB.open("rs-check");r.onerror=function(){t()},r.onsuccess=function(){r.result.close(),indexedDB.deleteDatabase("rs-check"),e()}}catch(e){t()}else t()})}static _rs_cleanup(e){return new Promise(t=>{e.local&&e.local.closeDB(),c.clean("remotestorage",t)})}diffHandler(){}}(0,l.applyMixins)(c,[i.default]),e.exports=c}).call(this,r(6))},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=o(r(11)),i=o(r(2)),a=o(r(1)),s=r(0),l="remotestorage:cache:nodes:";function u(e){return e.substr(0,l.length)===l||"remotestorage:cache:changes:"===e.substr(0,28)}class c extends n.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...e){}getNodes(e){const t={};for(let r=0,o=e.length;r<o;r++)try{t[e[r]]=JSON.parse(localStorage[l+e[r]])}catch(o){t[e[r]]=void 0}return Promise.resolve(t)}setNodes(e){for(const t in e)localStorage[l+t]=JSON.stringify(e[t]);return Promise.resolve()}forAllNodes(e){let t;for(let r=0,o=localStorage.length;r<o;r++)if(localStorage.key(r).substr(0,l.length)===l){try{t=this.migrate(JSON.parse(localStorage[localStorage.key(r)]))}catch(e){t=void 0}t&&e(t)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return(0,s.localStorageAvailable)()}static _rs_cleanup(){const e=[];for(let t=0,r=localStorage.length;t<r;t++){const r=localStorage.key(t);u(r)&&e.push(r)}e.forEach(e=>{(0,a.default)("[LocalStorage] Removing",e),delete localStorage[e]})}}(0,s.applyMixins)(c,[i.default]),e.exports=c},function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const n=o(r(2)),i=o(r(11)),a=r(0);class s extends i.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(e){const t={};for(let r=0,o=e.length;r<o;r++)t[e[r]]=(0,a.deepClone)(this._storage[e[r]]);return Promise.resolve(t)}setNodes(e){for(const t in e)void 0===e[t]?delete this._storage[t]:this._storage[t]=e[t];return Promise.resolve()}forAllNodes(e){for(const t in this._storage)e(this.migrate(this._storage[t]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}(0,a.applyMixins)(s,[n.default]),e.exports=s}])}),Be=ae(We),Me=(We.RemoteStorage,se(function(e,t){const r={OLSKLanguageSwitcherCodesMap:()=>({en:"English",fr:"Français",es:"Español",pt:"Português",de:"Deutsch"}),OLSKLanguageSwitcherLauncherFakeItemProxy:()=>({LCHRecipeName:"OLSKLanguageSwitcherLauncherFakeItemProxy",LCHRecipeCallback(){}}),OLSKLanguageSwitcherLauncherItemSwitch(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamLanguageCode)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamRouteConstant)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKCanonical)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:["OLSKLanguageSwitcherLauncherItemSwitch",e.ParamLanguageCode].join("-"),LCHRecipeName:r.OLSKLanguageSwitcherCodesMap()[e.ParamLanguageCode],LCHRecipeCallback(){(t.DebugWindow||window).location.href=e.OLSKCanonical(e.ParamRouteConstant,{OLSKRoutingLanguage:e.ParamLanguageCode})},LCHRecipeIsExcluded:()=>!!e.ParamAuthorized}},OLSKLanguageSwitcherRecipes(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if(!Array.isArray(e.ParamLanguageCodes))throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamCurrentLanguage)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamSpecUI)throw new Error("OLSKErrorInputNotValid");return[r.OLSKLanguageSwitcherLauncherFakeItemProxy()].concat(e.ParamLanguageCodes.filter(function(t){return t!==e.ParamCurrentLanguage}).map(function(t){return r.OLSKLanguageSwitcherLauncherItemSwitch(Object.assign(Object.assign(Object.assign({},e),{}),{ParamLanguageCode:t}))})).filter(function(t){return!!e.ParamSpecUI||!(t.LCHRecipeSignature||t.LCHRecipeName).match(/Fake/)})}};Object.assign(t,r)})),je=se(function(e,t){const r={OLSKVersionAdd(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamMap||null===e.ParamMap)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof e.ParamKey)throw new Error("OLSKErrorInputNotValid");if(void 0===e.ParamData)throw new Error("OLSKErrorInputNotValid");if(void 0!==e.ParamLimit&&"number"!=typeof e.ParamLimit)throw new Error("OLSKErrorInputNotValid");return"object"==typeof e.ParamData&&(e.ParamData=JSON.parse(JSON.stringify(e.ParamData))),Object.assign(e.ParamMap,{[e.ParamKey]:(e.ParamMap[e.ParamKey]||[]).concat(e.ParamData).slice(-(e.ParamLimit||1/0))})},OLSKVersionClear(e,t){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");return delete e[t],e}};Object.assign(t,r)}),Ze=se(function(e,t){!function(e){const t={OLKSLocalStorageSet(e,t,r){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.setItem)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t||!t.trim())throw new Error("OLSKErrorInputNotValid");if(void 0===r)throw new Error("OLSKErrorInputNotValid");return r?e.setItem(t,JSON.stringify(r)):e.removeItem(t),r},OLKSLocalStorageGet(e,t){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.getItem)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t||!t.trim())throw new Error("OLSKErrorInputNotValid");return JSON.parse(e.getItem(t))}};Object.assign(e,t),Object.defineProperty(e,"__esModule",{value:!0})}(t)}),Ue=ae(Ze),$e=se(function(e,t){const r={OLSKChainGather(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");const t=[],r=function(){return Object.keys(e).reduce(function(o,n){return Object.assign(o,"function"==typeof e[n]?{[n]:function(){const o=arguments;return t.push(function(){return e[n](...o)}),r()}}:{})},{_OLSKChainQueue:t,OLSKChainExecute:()=>t.reduce(async function(e,t){return(await e).concat(await t())},Promise.resolve([]))})};return r()}};Object.assign(t,r)}),He=se(function(e,t){const r={OLSKBeaconWait(e){if(void 0!==e&&"number"!=typeof e)throw new Error("OLSKErrorInputNotValid");return new Promise(function(t){return setTimeout(t,e||650)})},OLSKBeaconDeferFunction(e){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return new Promise(function(t){const r=document.querySelector(e);let o=r.addEventListener("click",function(){r.removeEventListener("click",o),t()})})},OLSKBeaconPointFunction(e,t){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");const r=document.querySelector(e).getBoundingClientRect(),o=document.querySelector(t).getBoundingClientRect();return function(t){return n=document.querySelector(e),i=r.left-(r.left-(o.left+o.width/2-r.width/2))*t,a=r.top-(r.top-(o.top+o.height/2-r.height/2))*t,n.style.left=i+"px",void(n.style.top=a+"px");var n,i,a}},_OLSKBeaconFire(e,t){if(e.fireEvent)return e.fireEvent("on"+t);const r=document.createEvent("Events");r.initEvent(t,!0,!1),e.dispatchEvent(r)},OLSKBeaconClickFunction(e,t,o){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof o)throw new Error("OLSKErrorInputNotValid");const n={didClick:!1,didTouchDown:!1,didTouchUp:!1},i=performance.now();return function(a){const s=performance.now()-i;return n.didClick||(r._OLSKBeaconFire(document.querySelector(e),"click"),n.didClick=!0),n.didTouchDown?!n.didTouchUp&&s>250?(document.querySelector(t).classList.remove(o),void(n.didTouchUp=!0)):void 0:(document.querySelector(t).classList.add(o),void(n.didTouchDown=!0))}},OLSKBeaconNudgeFunction(e,t,r){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("number"!=typeof t)throw new Error("OLSKErrorInputNotValid");if("number"!=typeof r)throw new Error("OLSKErrorInputNotValid");const o=document.querySelector(e).getBoundingClientRect();return function(n){return i=document.querySelector(e),a=o.left+t*n,s=o.top+r*n,i.style.left=a+"px",void(i.style.top=s+"px");var i,a,s}},OLSKBeaconFillFunction(e,t){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");return function(o){document.querySelector(e).value=t.slice(0,t.length*o),r._OLSKBeaconFire(document.querySelector(e),"input")}},OLSKBeaconSetFunction(e,t){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");if("string"!=typeof t)throw new Error("OLSKErrorInputNotValid");return function(o){document.querySelector(e).value=t,r._OLSKBeaconFire(document.querySelector(e),"change")}},_OLSKBeaconAnimate(e,t){if("function"!=typeof e)throw new Error("OLSKErrorInputNotValid");if(void 0!==t&&"number"!=typeof t)throw new Error("OLSKErrorInputNotValid");const r=performance.now();return new Promise(function(o){requestAnimationFrame(function n(i){let a=(i-r)/(t||650);a>1&&(a=1),e(function(e){return.5*(Math.sin((e-.5)*Math.PI)+1)}(a),a),a<1?requestAnimationFrame(n):o()})})}};Object.assign(t,r)}),Ge=se(function(e,t){const r={OLSKTransportExportBasename:(e={})=>(e.DebugWindow||window).location.hostname+"-"+(e.DebugDate||Date).now(),OLSKTransportExportJSONFilename(e={}){return this.OLSKTransportExportBasename(e)+".json"},OLSKTransportExportTXTFilename(e={}){return this.OLSKTransportExportBasename(e)+".txt"},OLSKTransportLauncherFakeItemProxy:()=>({LCHRecipeName:"OLSKTransportLauncherFakeItemProxy",LCHRecipeCallback(){}}),_AlertIfNotValid(e,t,r={}){if(!e.trim())return(r.DebugWindow||window).alert(t.OLSKLocalized("OLSKTransportLauncherItemImportJSONErrorNotFilledAlertText"));if(!e.startsWith("{")||!e.endsWith("}"))return(r.DebugWindow||window).alert(t.OLSKLocalized("OLSKTransportLauncherItemImportJSONErrorNotValidAlertText"));try{return t.OLSKTransportDispatchImportJSON(JSON.parse(e))}catch{return(r.DebugWindow||window).alert(t.OLSKLocalized("OLSKTransportLauncherItemImportJSONErrorNotValidAlertText"))}},OLSKTransportLauncherItemImportJSON(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKTransportDispatchImportJSON)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKTransportLauncherItemImportJSON",LCHRecipeName:e.OLSKLocalized("OLSKTransportLauncherItemImportJSONText"),async LCHRecipeCallback(){const o=await this.api.LCHReadTextFile({accept:".json"});return r._AlertIfNotValid(o,e,t)}}},OLSKTransportLauncherItemExportJSON(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKLocalized)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKTransportDispatchExportInput)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKTransportLauncherItemExportJSON",LCHRecipeName:e.OLSKLocalized("OLSKTransportLauncherItemExportJSONText"),async LCHRecipeCallback(o){return this.api.LCHSaveFile(JSON.stringify(o||await e.OLSKTransportDispatchExportInput()),r.OLSKTransportExportJSONFilename(t))}}},OLSKTransportLauncherFakeItemImportSerialized(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKTransportDispatchImportJSON)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"OLSKTransportLauncherFakeItemImportSerialized",LCHRecipeCallback:()=>r._AlertIfNotValid((t.DebugWindow||window).prompt(),e)}},OLSKTransportLauncherFakeItemExportSerialized(e,t={}){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKTransportDispatchExportInput)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeSignature:"OLSKTransportLauncherFakeItemExportSerialized",LCHRecipeName:"OLSKTransportLauncherFakeItemExportSerialized",LCHRecipeCallback:async o=>(t.DebugWindow||window).alert(JSON.stringify({OLSKDownloadName:r.OLSKTransportExportJSONFilename(t),OLSKDownloadData:JSON.stringify(o||await e.OLSKTransportDispatchExportInput())}))}},OLSKTransportFakeExportPlaintext(e,t={}){if("string"!=typeof e)throw new Error("OLSKErrorInputNotValid");return(t.DebugWindow||window).alert(JSON.stringify({OLSKDownloadName:r.OLSKTransportExportTXTFilename(t),OLSKDownloadData:e}))},OLSKTransportRecipes(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamSpecUI)throw new Error("OLSKErrorInputNotValid");return[r.OLSKTransportLauncherFakeItemProxy(),r.OLSKTransportLauncherItemImportJSON(e),r.OLSKTransportLauncherItemExportJSON(e),r.OLSKTransportLauncherFakeItemImportSerialized(e),r.OLSKTransportLauncherFakeItemExportSerialized(e)].filter(function(t){return!!e.ParamSpecUI||!(t.LCHRecipeSignature||t.LCHRecipeName).match(/Fake/)})}};Object.assign(t,r)}),ze=se(function(e,t){const r={_ZDRSchemaObjectValidate(e){if("object"!=typeof e||null===e)throw new Error("ZDRErrorInputNotValid");if("string"!=typeof e.ZDRSchemaKey)throw new Error("ZDRErrorInputNotString");if(!e.ZDRSchemaKey.trim())throw new Error("ZDRErrorInputNotFilled");if(e.ZDRSchemaKey.trim()!==e.ZDRSchemaKey)throw new Error("ZDRErrorInputNotTrimmed");if("function"!=typeof e.ZDRSchemaStub)throw new Error("ZDRErrorInputNotFunction");if("function"!=typeof e.ZDRSchemaPath)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRSchemaMethods&&("object"!=typeof e.ZDRSchemaMethods||null===e.ZDRSchemaMethods))throw new Error("ZDRErrorInputNotObject");if(void 0!==e.ZDRSchemaDispatchValidate&&"function"!=typeof e.ZDRSchemaDispatchValidate)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRSchemaDispatchSyncCreate&&"function"!=typeof e.ZDRSchemaDispatchSyncCreate)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRSchemaDispatchSyncUpdate&&"function"!=typeof e.ZDRSchemaDispatchSyncUpdate)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRSchemaDispatchSyncDelete&&"function"!=typeof e.ZDRSchemaDispatchSyncDelete)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRSchemaDispatchSyncConflict&&"function"!=typeof e.ZDRSchemaDispatchSyncConflict)throw new Error("ZDRErrorInputNotFunction");return!0},_ZDRScopeObjectValidate(e){if("object"!=typeof e||null===e)throw new Error("ZDRErrorInputNotValid");if("string"!=typeof e.ZDRScopeKey)throw new Error("ZDRErrorInputNotString");if(!e.ZDRScopeKey.trim())throw new Error("ZDRErrorInputNotFilled");if(e.ZDRScopeKey.trim()!==e.ZDRScopeKey)throw new Error("ZDRErrorInputNotTrimmed");if("string"!=typeof e.ZDRScopeDirectory)throw new Error("ZDRErrorInputNotString");if(!e.ZDRScopeDirectory.trim())throw new Error("ZDRErrorInputNotFilled");if(e.ZDRScopeDirectory.trim()!==e.ZDRScopeDirectory)throw new Error("ZDRErrorInputNotTrimmed");if(e.ZDRScopeDirectory.match("/"))throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRScopeSchemas&&!Array.isArray(e.ZDRScopeSchemas))throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRScopeCreatorDirectory){if("string"!=typeof e.ZDRScopeCreatorDirectory)throw new Error("ZDRErrorInputNotString");if(!e.ZDRScopeCreatorDirectory.trim())throw new Error("ZDRErrorInputNotFilled");if(e.ZDRScopeCreatorDirectory.trim()!==e.ZDRScopeCreatorDirectory)throw new Error("ZDRErrorInputNotTrimmed")}if(void 0!==e.ZDRScopeIsPublic&&"boolean"!=typeof e.ZDRScopeIsPublic)throw new Error("ZDRErrorInputNotBoolean");return!0},_ZDRClientObjectValidate(e){if("object"!=typeof e||null===e)throw new Error("ZDRErrorInputNotValid");if("function"!=typeof e.ZDRClientWriteFile)throw new Error("ZDRErrorInputNotFunction");if("function"!=typeof e.ZDRClientReadFile)throw new Error("ZDRErrorInputNotFunction");if("function"!=typeof e.ZDRClientListObjects)throw new Error("ZDRErrorInputNotFunction");if("function"!=typeof e.ZDRClientDelete)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRClientPrepare&&"function"!=typeof e.ZDRClientPrepare)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRClientConnect&&"function"!=typeof e.ZDRClientConnect)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRClientReconnect&&"function"!=typeof e.ZDRClientReconnect)throw new Error("ZDRErrorInputNotFunction");if(void 0!==e.ZDRClientDisconnect&&"function"!=typeof e.ZDRClientDisconnect)throw new Error("ZDRErrorInputNotFunction");return!0},_ZDRPathIsDirectory(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return"/"===e.slice(-1)},_ZDRPathFormatDirectory(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return r._ZDRPathIsDirectory(e)?e:e.concat("/")},_ZDRPathFormatPath(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return"/"===e[0]?e:"/".concat(e)},_ZDRModelSyncCallbackSignatures:()=>["ZDRSchemaDispatchSyncCreate","ZDRSchemaDispatchSyncUpdate","ZDRSchemaDispatchSyncDelete","ZDRSchemaDispatchSyncConflict"],_ZDRModelSyncCallbackInput(e,t){if(!r._ZDRModelSyncCallbackSignatures().includes(e))throw new Error("ZDRErrorInputNotValid");if(!t.origin)throw new Error("ZDRErrorInputNotValid");return"ZDRSchemaDispatchSyncConflict"===e?t:t["ZDRSchemaDispatchSyncDelete"===e?"oldValue":"newValue"]},_ZDRModelSyncCallbackSignature(e){if("object"==typeof e&&null!==e)return"remote"===e.origin&&void 0===e.oldValue&&void 0!==e.newValue?"ZDRSchemaDispatchSyncCreate":"remote"===e.origin&&void 0!==e.oldValue&&void 0!==e.newValue?"ZDRSchemaDispatchSyncUpdate":"remote"===e.origin&&void 0!==e.oldValue&&void 0===e.newValue?"ZDRSchemaDispatchSyncDelete":"conflict"===e.origin?"ZDRSchemaDispatchSyncConflict":void 0},ZDRProtocolRemoteStorage:()=>"ZDR_PROTOCOL_REMOTE_STORAGE",ZDRProtocolCustom:()=>"ZDR_PROTOCOL_CUSTOM",_ZDRProtocols:()=>[r.ZDRProtocolRemoteStorage(),r.ZDRProtocolCustom()],ZDRProtocolForIdentity(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return r.ZDRProtocolRemoteStorage()},_ZDRProtocol(e){if("function"==typeof e&&Object.keys(e).includes("Unauthorized"))return r.ZDRProtocolRemoteStorage();if(e&&"object"==typeof e&&e.ZDRClientWriteFile&&r._ZDRClientObjectValidate(e))return r.ZDRProtocolCustom();throw new Error("ZDRErrorInputNotValid")},_ZDRClientInterface:(e,t,o)=>({async ClientWriteFile(n,i,a){try{await{[r.ZDRProtocolRemoteStorage()]:async function(){return e.storeFile(a,n,"undefined"!=typeof Blob&&i.constructor===Blob?await new Promise(function(e,t){const r=new FileReader;r.onload=function(){e(r.result)},r.readAsArrayBuffer(i)}):i)},[r.ZDRProtocolCustom()]:function(){return e.ZDRClientWriteFile(n,i,a)}}[t]()}catch(e){if(o.ZDRParamDispatchWriteError)return o.ZDRParamDispatchWriteError(e);throw e}return i},async ClientWriteObject(e,t){const r=JSON.stringify(o._ZDRParamDispatchJSONPreStringify?o._ZDRParamDispatchJSONPreStringify(t):t);return await this.ClientWriteFile(e,r,"application/json"),t},ClientReadFile:o=>({[r.ZDRProtocolRemoteStorage()]:async function(){return(await e.getFile(o,!1)||{}).data},[r.ZDRProtocolCustom()]:function(){return e.ZDRClientReadFile(o)}}[t]()),async ClientReadObject(e){const t=await this.ClientReadFile(e);if(!t)return null;const r=JSON.parse(t);return o._ZDRParamDispatchJSONPostParse?o._ZDRParamDispatchJSONPostParse(r):r},ClientListObjects:async n=>Object.fromEntries((await{[r.ZDRProtocolRemoteStorage()]:async function(){return Object.entries(await e.getAll("/"===n?"":n,!1)).filter(function([e,t]){return!r._ZDRPathIsDirectory(e)&&!0!==t})},[r.ZDRProtocolCustom()]:async function(){return Object.entries(await e.ZDRClientListObjects(n))}}[t]()).map(function([e,t]){return[e,o._ZDRParamDispatchJSONPostParse?o._ZDRParamDispatchJSONPostParse(t):t]})),ClientPaths:async o=>await{[r.ZDRProtocolRemoteStorage()]:async function(){return Object.keys(await e.getListing(o,!1))},[r.ZDRProtocolCustom()]:async function(){return Object.keys(await e.ZDRClientListObjects(o))}}[t](),ClientPermalink:o=>({[r.ZDRProtocolRemoteStorage()]:function(){return e.getItemURL(o)},[r.ZDRProtocolCustom()]:function(){throw new Error("ZDRErrorMethodNotDefined")}}[t]()),ClientDelete:o=>({[r.ZDRProtocolRemoteStorage()]:function(){return r._ZDRPathIsDirectory(o)?null:e.remove(o.replace(/^\/+/,""))},[r.ZDRProtocolCustom()]:function(){return e.ZDRClientDelete(o)}}[t]())}),_ZDRWrap(e){if("object"!=typeof e||null===e)throw new Error("ZDRErrorInputNotValid");const t=r._ZDRProtocol(e.ZDRParamLibrary);if(!Array.isArray(e.ZDRParamScopes)||!e.ZDRParamScopes.length)throw new Error("ZDRErrorInputNotValid");const o=e.ZDRParamScopes.filter(r._ZDRScopeObjectValidate);if(!o.length)throw new Error("ZDRErrorInputNotValid");if("function"!=typeof e.ZDRParamDispatchReady)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchError&&"function"!=typeof e.ZDRParamDispatchError)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchConnected&&"function"!=typeof e.ZDRParamDispatchConnected)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchOnline&&"function"!=typeof e.ZDRParamDispatchOnline)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchOffline&&"function"!=typeof e.ZDRParamDispatchOffline)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchSyncDidStart&&"function"!=typeof e.ZDRParamDispatchSyncDidStart)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchSyncDidStop&&"function"!=typeof e.ZDRParamDispatchSyncDidStop)throw new Error("ZDRErrorInputNotValid");if(void 0!==e.ZDRParamDispatchWriteError&&"function"!=typeof e.ZDRParamDispatchWriteError)throw new Error("ZDRErrorInputNotValid");if(void 0!==e._ZDRParamDispatchJSONPreStringify&&"function"!=typeof e._ZDRParamDispatchJSONPreStringify)throw new Error("ZDRErrorInputNotValid");if(void 0!==e._ZDRParamDispatchJSONPostParse&&"function"!=typeof e._ZDRParamDispatchJSONPostParse)throw new Error("ZDRErrorInputNotValid");const n=t!==r.ZDRProtocolRemoteStorage()?e.ZDRParamLibrary:new e.ZDRParamLibrary({modules:o.reduce(function(e,t){return e.concat({name:t.ZDRScopeDirectory,builder:function(e,t){return{exports:{privateClient:e,publicClient:t}}}})},[])});t===r.ZDRProtocolRemoteStorage()&&(n.on("error",function(t){(n.remote.online||"Sync failed: Network request failed."!==t.message)&&e.ZDRParamDispatchError&&e.ZDRParamDispatchError(t)}),n.on("connected",function(){e.ZDRParamDispatchConnected&&e.ZDRParamDispatchConnected(n.remote.userAddress,n.remote.token)}),n.on("network-online",function(){e.ZDRParamDispatchOnline&&e.ZDRParamDispatchOnline()}),n.on("network-offline",function(){e.ZDRParamDispatchOffline&&e.ZDRParamDispatchOffline()}),n.on("sync-done",function(){e.ZDRParamDispatchSyncDidStop&&e.ZDRParamDispatchSyncDidStop()}),n.on("ready",function(){e.ZDRParamDispatchReady()})),t===r.ZDRProtocolCustom()&&Promise.resolve((n.ZDRClientPrepare||function(){})()).then(e.ZDRParamDispatchReady);const i={ZDRStorageProtocol:t,ZDRStorageClient:()=>({[r.ZDRProtocolRemoteStorage()]:function(){return n},[r.ZDRProtocolCustom()]:function(){return e.ZDRParamLibrary}}[t]()),ZDRCloudConnect(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return{[r.ZDRProtocolRemoteStorage()]:function(){return n.connect(e)},[r.ZDRProtocolCustom()]:function(){return n.ZDRClientConnect(e)}}[t]()},ZDRCloudReconnect:()=>({[r.ZDRProtocolRemoteStorage()]:function(){return n.reconnect(e)},[r.ZDRProtocolCustom()]:function(){return n.ZDRClientReconnect?n.ZDRClientReconnect():n.ZDRClientConnect()}}[t]()),ZDRCloudDisconnect:()=>({[r.ZDRProtocolRemoteStorage()]:function(){return n.disconnect(e)},[r.ZDRProtocolCustom()]:function(){return n.ZDRClientDisconnect(e)}}[t]())};return o.reduce(function(o,a){t===r.ZDRProtocolRemoteStorage()&&(n.access.claim(a.ZDRScopeDirectory,"rw"),n.caching.enable(`/${a.ZDRScopeDirectory}/`));const s=(a.ZDRScopeSchemas||[]).filter(r._ZDRSchemaObjectValidate),l={[r.ZDRProtocolRemoteStorage()]:function(){return n[a.ZDRScopeDirectory][a.ZDRScopeIsPublic?"publicClient":"privateClient"]},[r.ZDRProtocolCustom()]:function(){return n}}[t](),u=r._ZDRClientInterface(l,t,e);t===r.ZDRProtocolRemoteStorage()&&s.filter(function(e){return Object.keys(e).filter(function(e){return r._ZDRModelSyncCallbackSignatures().includes(e)}).length}).length&&l.on("change",function(t){const o=r._ZDRModelSyncCallbackSignature(t);o&&s.forEach(function(n){if(n.ZDRSchemaPath(n.ZDRSchemaStub(t.relativePath))!==t.relativePath)return;if(!n[o])return;const i=r._ZDRModelSyncCallbackInput(o,t);return n[o](e._ZDRParamDispatchJSONPostParse?e._ZDRParamDispatchJSONPostParse(i):i)})});const c=function(e,o=!1){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return(("mod.ZDRProtocolFission()"===t?`/${o?"p":a.ZDRScopeIsPublic?"public":"private"}/${a.ZDRScopeCreatorDirectory?`Apps/${a.ZDRScopeCreatorDirectory}/${a.ZDRScopeDirectory}`:a.ZDRScopeDirectory}/`:"")+e).slice(t===r.ZDRProtocolRemoteStorage()&&"/"===e[0]?1:0)};return Object.assign(o,{[a.ZDRScopeKey]:Object.assign({_ZDRStorageBasePath:c,ZDRStorageWriteFile(e,t,r){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");if("string"!=typeof r)throw new Error("ZDRErrorInputNotValid");return u.ClientWriteFile(c(e),t,r)},ZDRStorageWriteObject(e,t){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");if("object"!=typeof t||null===t)throw new Error("ZDRErrorInputNotValid");return u.ClientWriteObject(c(e),t)},ZDRStorageReadFile(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return u.ClientReadFile(c(e))},ZDRStorageReadObject(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return u.ClientReadObject(c(e))},ZDRStorageListingObjects(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return u.ClientListObjects(r._ZDRPathFormatDirectory(c(e)))},_ZDRStoragePaths:e=>u.ClientPaths(c(e)),ZDRStoragePaths(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return this._ZDRStoragePaths(r._ZDRPathFormatDirectory(e))},async _ZDRStoragePathsRecursive(e,t=!1){const o=this;return function(e){return[].concat.apply([],e)}(await Promise.all((await o.ZDRStoragePaths(e)).map(function(n){return r._ZDRPathIsDirectory(n)?o._ZDRStoragePathsRecursive(e+n,t):e+n}))).concat(t?e:[])},ZDRStoragePathsRecursive(e,t=!1){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");if(void 0!==t&&"boolean"!=typeof t)throw new Error("ZDRErrorInputNotValid");return this._ZDRStoragePathsRecursive(r._ZDRPathFormatDirectory(e),t)},ZDRStoragePermalink(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return u.ClientPermalink(c(e,!0))},_ZDRStorageDeleteFile:e=>u.ClientDelete(e),ZDRStorageDeleteFile(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");return u.ClientDelete(c(e))},async ZDRStorageDeleteFolderRecursive(e){if("string"!=typeof e)throw new Error("ZDRErrorInputNotValid");const t=this._ZDRStoragePathsRecursive?this:o[a.ZDRScopeKey];return await Promise.all((await t._ZDRStoragePathsRecursive(r._ZDRPathFormatDirectory(e))).map(c).map(t._ZDRStorageDeleteFile)),e}},s.reduce(function(e,t){return Object.assign(e,{[t.ZDRSchemaKey]:Object.assign({ZDRModelPath(e){if("object"!=typeof e||null===e)throw new Error("ZDRErrorInputNotValid");return t.ZDRSchemaPath(...arguments)},ZDRModelWriteObject(n){if(t.ZDRSchemaDispatchValidate){const e=t.ZDRSchemaDispatchValidate(...arguments);if(e)return Promise.reject(e)}return o[a.ZDRScopeKey].ZDRStorageWriteObject(r._ZDRPathFormatPath(e[t.ZDRSchemaKey].ZDRModelPath(...arguments)),n)},async _ZDRModelListObjects(){const e=this;return(await o[a.ZDRScopeKey].ZDRStoragePathsRecursive("/")).filter(function(o){return r._ZDRPathFormatPath(o)===r._ZDRPathFormatPath(e.ZDRModelPath(t.ZDRSchemaStub(o)))})},async ZDRModelListObjects(){return Promise.all((await this._ZDRModelListObjects()).map(o[a.ZDRScopeKey].ZDRStorageReadObject))},ZDRModelDeleteObject:async n=>(await o[a.ZDRScopeKey].ZDRStorageDeleteFile(r._ZDRPathFormatPath(e[t.ZDRSchemaKey].ZDRModelPath(n))),n)},Object.entries(t.ZDRSchemaMethods||{}).reduce(function(e,[t,r]){if("function"!=typeof r)throw new Error("ZDRErrorInputNotFunction");return Object.assign(e,{[t]:r.bind(i)})},{}))})},{}))})},i)},ZDRWrap(e={}){const t=this;return new Promise(async function(r,o){try{const o=t._ZDRWrap(Object.assign(e,{ZDRParamDispatchReady:function(){setTimeout(function(){return r(o)})}}))}catch(e){o(e)}})},ZDRPreferenceProtocol(e,t){if(!r._ZDRProtocols().includes(e))throw new Error("ZDRErrorInputNotValid");const o="object"==typeof localStorage?localStorage:t;return o.getItem("ZDR_PREFERENCE_PROTOCOL")||o.setItem("ZDR_PREFERENCE_PROTOCOL",e),o.getItem("ZDR_PREFERENCE_PROTOCOL")},ZDRPreferenceProtocolClear:e=>("object"==typeof localStorage?localStorage:e).removeItem("ZDR_PREFERENCE_PROTOCOL"),ZDRPreferenceProtocolMigrate:e=>("object"==typeof localStorage?localStorage:e).getItem("ZDR_PREFERENCE_PROTOCOL_MIGRATE"),ZDRPreferenceProtocolMigrateClear:e=>("object"==typeof localStorage?localStorage:e).removeItem("ZDR_PREFERENCE_PROTOCOL_MIGRATE"),ZDRPreferenceProtocolConnect(e,t){const r=this.ZDRProtocolForIdentity(e),o="object"==typeof localStorage?localStorage:t;return o.getItem("ZDR_PREFERENCE_PROTOCOL")&&o.getItem("ZDR_PREFERENCE_PROTOCOL")!==r&&o.setItem("ZDR_PREFERENCE_PROTOCOL_MIGRATE",o.getItem("ZDR_PREFERENCE_PROTOCOL")),o.setItem("ZDR_PREFERENCE_PROTOCOL",r),r},ZDRLauncherFakeItemProxy:()=>({LCHRecipeName:"ZDRLauncherFakeItemProxy",LCHRecipeCallback(){}}),ZDRLauncherItemFakeDispatchError(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchError",LCHRecipeCallback:()=>e.ZDRParamDispatchError(new Error("ZDR_FAKE_CLOUD_ERROR"))}},ZDRLauncherItemFakeDispatchWriteError(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchWriteError",LCHRecipeCallback:()=>e.ZDRParamDispatchWriteError(new Error("ZDR_FAKE_WRITE_ERROR"))}},ZDRLauncherItemFakeDispatchConnected(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchConnected",LCHRecipeCallback:()=>e.ZDRParamDispatchConnected("ZDR_FAKE_CLOUD_IDENTITY","ZDR_FAKE_CLOUD_TOKEN")}},ZDRLauncherItemFakeDispatchOnline(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchOnline",LCHRecipeCallback:()=>e.ZDRParamDispatchOnline()}},ZDRLauncherItemFakeDispatchOffline(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchOffline",LCHRecipeCallback:()=>e.ZDRParamDispatchOffline()}},ZDRLauncherItemFakeDispatchSyncDidStart(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchSyncDidStart",LCHRecipeCallback:()=>e.ZDRParamDispatchSyncDidStart()}},ZDRLauncherItemFakeDispatchSyncDidStop(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchSyncDidStop",LCHRecipeCallback:()=>e.ZDRParamDispatchSyncDidStop()}},ZDRLauncherItemFakeDispatchDisconnected(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");return{LCHRecipeName:"ZDRLauncherItemFakeDispatchDisconnected",LCHRecipeCallback:()=>e.ZDRParamDispatchConnected(null)}},ZDRRecipes(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamMod||null===e.ParamMod)throw new Error("OLSKErrorInputNotValid");if("boolean"!=typeof e.ParamSpecUI)throw new Error("OLSKErrorInputNotValid");return[r.ZDRLauncherFakeItemProxy(),r.ZDRLauncherItemFakeDispatchError(e.ParamMod),r.ZDRLauncherItemFakeDispatchWriteError(e.ParamMod),r.ZDRLauncherItemFakeDispatchConnected(e.ParamMod),r.ZDRLauncherItemFakeDispatchOnline(e.ParamMod),r.ZDRLauncherItemFakeDispatchOffline(e.ParamMod),r.ZDRLauncherItemFakeDispatchSyncDidStart(e.ParamMod),r.ZDRLauncherItemFakeDispatchSyncDidStop(e.ParamMod),r.ZDRLauncherItemFakeDispatchDisconnected(e.ParamMod)].filter(function(t){return!!e.ParamSpecUI||!(t.LCHRecipeSignature||t.LCHRecipeName).match(/Fake/)})}};Object.assign(t,r)}),qe='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKInputClear">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <circle id="_OLSKInputClear-oval2" stroke="rgb(170, 170, 170)" stroke-width="1.5" fill="rgb(170, 170, 170)" cx="8" cy="8" r="5.5" />\n    <path id="_OLSKInputClear-bezier" stroke="rgb(255, 255, 255)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 6,6 L 10,10" />\n    <path id="_OLSKInputClear-bezier2" stroke="rgb(255, 255, 255)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 6,10 L 10,6" />\n</svg>\n';function Je(e){let t,r,o,n,s;return{c(){t=K("button"),r=K("div"),w(r,"class","OLSKInputWrapperClearButtonImage"),w(t,"type","button"),w(t,"class","OLSKInputWrapperClearButton OLSKDecorTappable OLSKDecorButtonNoStyle OLSKToolbarButton svelte-1clh3fc"),w(t,"title",o=ue("OLSKInputWrapperClearButtonText"))},m(o,i){g(o,t,i),S(t,r),r.innerHTML=qe,n||(s=[b(t,"mousedown",Qe),b(t,"click",function(){a(e[1])&&e[1].apply(this,arguments)})],n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i(s)}}}function Ye(e){let t,r,o;const n=e[3].default,i=l(n,e,e[2],null);let a=e[0]&&Je(e);return{c(){t=K("div"),i&&i.c(),r=O(),a&&a.c(),w(t,"class","OLSKInputWrapper svelte-1clh3fc")},m(e,n){g(e,t,n),i&&i.m(t,null),S(t,r),a&&a.m(t,null),o=!0},p(e,[r]){i&&i.p&&(!o||4&r)&&p(i,n,e,e[2],o?c(n,e[2],r,null):d(e[2]),null),e[0]?a?a.p(e,r):(a=Je(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i(e){o||(J(i,e),o=!0)},o(e){Y(i,e),o=!1},d(e){e&&C(t),i&&i.d(e),a&&a.d()}}}const Qe=e=>e.preventDefault();function Xe(e,t,r){let{$$slots:o={},$$scope:n}=t,{OLSKInputWrapperValue:i}=t,{OLSKInputWrapperDispatchClear:a}=t;return e.$$set=e=>{"OLSKInputWrapperValue"in e&&r(0,i=e.OLSKInputWrapperValue),"OLSKInputWrapperDispatchClear"in e&&r(1,a=e.OLSKInputWrapperDispatchClear),"$$scope"in e&&r(2,n=e.$$scope)},[i,a,n,o]}class et extends oe{constructor(e){super(),re(this,e,Xe,Ye,s,{OLSKInputWrapperValue:0,OLSKInputWrapperDispatchClear:1})}}const tt={OLSKCollectionAPI(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e.OLSKCollectionSortFunction)throw new Error("OLSKErrorInputNotValid");if("function"!=typeof e._OLSKCollectionKeyFunction)throw new Error("OLSKErrorInputNotValid");if(void 0!==e.OLSKCollectionItems){if(!Array.isArray(e.OLSKCollectionItems))throw new Error("OLSKErrorInputNotValid")}else e.OLSKCollectionItems=[];if(void 0!==e.OLSKCollectionDispatchChange&&"function"!=typeof e.OLSKCollectionDispatchChange)throw new Error("OLSKErrorInputNotValid");const t={ValueItemsAll(t){e.OLSKCollectionItems.splice(...[0,e.OLSKCollectionItems.length].concat(t)),e.OLSKCollectionDispatchChange&&e.OLSKCollectionDispatchChange()}};return{OLSKCollectionDataItemsAll:()=>e.OLSKCollectionItems.slice(),OLSKCollectionInsert:r=>(t.ValueItemsAll([r].concat(e.OLSKCollectionItems)),r),OLSKCollectionUpdate:r=>(t.ValueItemsAll(e.OLSKCollectionItems.map(function(t){return e._OLSKCollectionKeyFunction(t)===e._OLSKCollectionKeyFunction(r)?r:t})),r),OLSKCollectionRemove:r=>(t.ValueItemsAll(e.OLSKCollectionItems.filter(function(t){return e._OLSKCollectionKeyFunction(t)!==e._OLSKCollectionKeyFunction(r)})),r),OLSKCollectionSort(){t.ValueItemsAll(e.OLSKCollectionItems.sort(e.OLSKCollectionSortFunction))},_OLSKCollectionDebugReassign(t){e.OLSKCollectionItems=t}}},OLSKCollectionConstrainIndex(e,t){if(!Array.isArray(e))throw new Error("OLSKErrorInputNotValid");if("number"!=typeof t)throw new Error("OLSKErrorInputNotValid");return t<0?e.length-1:t>=e.length?0:t}};var rt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedReload">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedReload-oval2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 13,9 C 13,11.76 10.76,14 8,14 5.24,14 3,11.76 3,9 3,6.24 5.24,4 8,4" />\n    <path id="_OLSKSharedReload-bezier8" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="rgb(0, 0, 0)" d="M 8,2 L 8,6 11,4 8,2" />\n</svg>\n',ot='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedApropos">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    \n    <text  fill="rgb(0, 0, 0)" font-family="Georgia, Times, \'Times New Roman\', serif" font-size="17" x="5.51" y="-0" text-anchor="middle"><tspan x="8" y="14">i</tspan></text>\n</svg>\n',nt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedCloud">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedCloud-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-miterlimit="10" fill="none" d="M 9.44,3.25 C 8.04,3.25 7.01,4.06 6.52,5.03 L 6.53,5.03 C 6.44,5.21 6.22,5.28 6.05,5.19 5.44,4.89 4.72,4.92 4.15,5.26 3.58,5.61 3.15,6.24 3.15,7.21 L 3.15,7.21 C 3.15,7.38 3.03,7.53 2.86,7.56 1.78,7.75 1,8.83 1,9.91 1,11.21 2.02,12.25 3.69,12.25 L 12.49,12.25 C 13.88,12.25 15,11.13 15,9.73 15,8.5 14.13,7.48 12.98,7.25 L 12.97,7.25 C 12.79,7.21 12.66,7.04 12.68,6.86 12.86,5.08 11.46,3.25 9.44,3.25 Z M 9.44,3.25" />\n</svg>\n',it='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedCloudError">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedCloudError-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 11.31,12 L 12.49,12 C 13.88,12 15,10.88 15,9.48 15,8.25 14.13,7.23 12.98,7 L 12.97,7 C 12.79,6.96 12.66,6.79 12.68,6.61 12.86,4.83 11.46,3 9.44,3 8.04,3 7.01,3.81 6.52,4.78 L 6.53,4.78 C 6.44,4.96 6.22,5.03 6.05,4.94 5.44,4.64 4.72,4.67 4.15,5.01 3.58,5.36 3.15,5.99 3.15,6.96 L 3.15,6.96 C 3.15,7.13 3.03,7.28 2.86,7.31 1.78,7.5 1,8.58 1,9.66 1,10.96 2.02,12 3.69,12 L 4.86,12" />\n    <g id="_OLSKSharedCloudError-group">\n    </g>\n    <path id="_OLSKSharedCloudError-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 8,8 L 8,11" />\n    <path id="_OLSKSharedCloudError-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 8,13.5 L 8,13.5" />\n</svg>\n',at='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedCloudOffline">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedCloudOffline-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 11.81,12 L 12.49,12 C 13.88,12 15,10.88 15,9.48 15,8.25 14.13,7.23 12.98,7 L 12.97,7 C 12.79,6.96 12.66,6.79 12.68,6.61 12.86,4.83 11.46,3 9.44,3 8.04,3 7.01,3.81 6.52,4.78 L 6.53,4.78 C 6.44,4.96 6.22,5.03 6.05,4.94 5.44,4.64 4.72,4.67 4.15,5.01 3.58,5.36 3.15,5.99 3.15,6.96 L 3.15,6.96 C 3.15,7.13 3.03,7.28 2.86,7.31 1.78,7.5 1,8.58 1,9.66 1,10.96 2.02,12 3.69,12 L 4.86,12" />\n    <g id="_OLSKSharedCloudOffline-group" transform="translate(8.3, 12.11) rotate(90)" >\n        <path id="_OLSKSharedCloudOffline-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1.68,-1.68 L -1.68,1.68" />\n        <path id="_OLSKSharedCloudOffline-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 3.35,-0 L 0,3.35" transform="translate(-1.68, 1.68) rotate(-90)"  />\n    </g>\n</svg>\n',st='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedCreate">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedCreate-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 8,1 L 8,15" />\n    <path id="_OLSKSharedCreate-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,8 L 15,8" />\n</svg>\n',lt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedDismiss">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_OLSKSharedDismiss-group" transform="translate(8, 8) rotate(-45)" >\n        <path id="_OLSKSharedDismiss-bezier" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 0,-7 L 0,7" />\n        <path id="_OLSKSharedDismiss-bezier2" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M -7,0 L 7,0" />\n    </g>\n</svg>\n',ut='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharediOSA2HS">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <rect id="_OLSKSharediOSA2HS-rectangle2" stroke="rgb(0, 0, 0)" fill="rgb(255, 255, 255)" x="1" y="1" width="14" height="14" rx="1" />\n    <g id="_OLSKSharediOSA2HS-group">\n        <path id="_OLSKSharediOSA2HS-bezier" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 8,5 L 8,11" />\n        <path id="_OLSKSharediOSA2HS-bezier2" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 5,8 L 11,8" />\n    </g>\n</svg>\n',ct='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharediOSShare">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharediOSShare-bezier6" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="4" fill="none" d="M 10.84,5.96 L 12.54,5.96 C 13.18,5.96 13.69,6.46 13.69,7.09 L 13.69,13.98 C 13.69,14.61 13.18,15.11 12.54,15.11 L 3.85,15.11 C 3.21,15.11 2.69,14.61 2.69,13.98 L 2.69,7.09 C 2.69,6.46 3.21,5.96 3.85,5.96 L 5.5,5.96" />\n    <path id="_OLSKSharediOSShare-bezier" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 4.94,3.56 L 8.19,0.5 11.44,3.56" />\n    <path id="_OLSKSharediOSShare-bezier2" stroke="rgb(0, 0, 0)" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 8.19,9.91 L 8.19,1.5" />\n</svg>\n',pt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedLanguage">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <circle id="_OLSKSharedLanguage-oval" stroke="rgb(0, 0, 0)" fill="none" cx="8" cy="8" r="6" />\n    <path id="_OLSKSharedLanguage-bezier2" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" fill="none" d="M 2,8 L 14,8" />\n    <path id="_OLSKSharedLanguage-bezier3" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" fill="none" d="M 8,14 L 8,2" />\n    <path id="_OLSKSharedLanguage-bezier4" stroke="rgb(0, 0, 0)" stroke-linejoin="bevel" stroke-miterlimit="10" fill="none" d="M 12.24,3.75 C 11.15,4.83 9.65,5.5 8,5.5 6.35,5.5 4.85,4.83 3.76,3.75 4.09,3.42 4.46,3.13 4.86,2.89 5.77,2.32 6.85,2 8,2 9.65,2 11.15,2.67 12.24,3.75 Z M 12.24,3.75" />\n    <path id="_OLSKSharedLanguage-bezier5" stroke="rgb(0, 0, 0)" stroke-linejoin="bevel" stroke-miterlimit="10" fill="none" d="M 12.24,12.25 C 11.15,13.33 9.65,14 8,14 6.35,14 4.85,13.33 3.76,12.25 4.09,11.92 4.46,11.63 4.86,11.39 5.77,10.82 6.85,10.5 8,10.5 9.65,10.5 11.15,11.17 12.24,12.25 Z M 12.24,12.25" />\n    <ellipse id="_OLSKSharedLanguage-oval4" stroke="rgb(0, 0, 0)" fill="none" cx="8" cy="8" rx="3" ry="5.75" />\n</svg>\n',dt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedLauncher">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_OLSKSharedLauncher-group" transform="scale(1.07, 1.07)" >\n        <path id="_OLSKSharedLauncher-prompt" stroke="rgb(0, 0, 0)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 8.25,2.5 L 13.25,7.5 8.25,12.5" />\n        <g id="_OLSKSharedLauncher-linesSolid">\n            <path id="_OLSKSharedLauncher-bezier5" stroke="rgb(0, 0, 0)" stroke-width="1.2" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 2,5.5 L 8,5.5" />\n            <path id="_OLSKSharedLauncher-bezier6" stroke="rgb(0, 0, 0)" stroke-width="1.2" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 4.5,7.5 L 10,7.5" />\n            <path id="_OLSKSharedLauncher-bezier7" stroke="rgb(0, 0, 0)" stroke-width="1.2" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 2.5,9.5 L 7.5,9.5" />\n        </g>\n    </g>\n</svg>\n',ht='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedStashSelected">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedStashSelected-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 2,9 L 6,13 13,5" />\n</svg>\n',mt='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedStorageDisconnect">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedStorageDisconnect-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-miterlimit="10" fill="none" d="M 9.44,3.25 C 8.04,3.25 7.01,4.06 6.52,5.03 L 6.53,5.03 C 6.44,5.21 6.22,5.28 6.05,5.19 5.44,4.89 4.72,4.92 4.15,5.26 3.58,5.61 3.15,6.24 3.15,7.21 L 3.15,7.21 C 3.15,7.38 3.03,7.53 2.86,7.56 1.78,7.75 1,8.83 1,9.91 1,11.21 2.02,12.25 3.69,12.25 L 12.49,12.25 C 13.88,12.25 15,11.13 15,9.73 15,8.5 14.13,7.48 12.98,7.25 L 12.97,7.25 C 12.79,7.21 12.66,7.04 12.68,6.86 12.86,5.08 11.46,3.25 9.44,3.25 Z M 9.44,3.25" />\n    <path id="_OLSKSharedStorageDisconnect-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 12,1.5 L 4.5,14.5" />\n</svg>\n',ft='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedSyncStart">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_OLSKSharedSyncStart-group" transform="" >\n        <path id="_OLSKSharedSyncStart-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 13,6.5 L 10.5,6.5" />\n        <path id="_OLSKSharedSyncStart-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 13,6.5 L 14,4.5" />\n        <path id="_OLSKSharedSyncStart-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 4.86,8.83 L 2.83,8.83" />\n        <path id="_OLSKSharedSyncStart-bezier5" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1.83,10.83 L 2.83,8.83" />\n        <path id="_OLSKSharedSyncStart-oval" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 12.85,9.21 C 12.31,11.39 10.34,13 8,13 5.66,13 3.69,11.39 3.15,9.21" />\n        <path id="_OLSKSharedSyncStart-oval3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 3.25,6.42 C 3.91,4.43 5.79,3 8,3 10.14,3 11.97,4.35 12.68,6.24" />\n    </g>\n</svg>\n',St='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedSyncStop">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_OLSKSharedSyncStop-group" transform="" >\n        <path id="_OLSKSharedSyncStop-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 13,6.5 L 10.5,6.5" />\n        <path id="_OLSKSharedSyncStop-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 13,6.5 L 14,4.5" />\n        <path id="_OLSKSharedSyncStop-bezier4" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 4.86,8.83 L 2.83,8.83" />\n        <path id="_OLSKSharedSyncStop-bezier5" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1.83,10.83 L 2.83,8.83" />\n        <path id="_OLSKSharedSyncStop-oval" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 12.85,9.21 C 12.31,11.39 10.34,13 8,13 5.66,13 3.69,11.39 3.15,9.21" />\n        <path id="_OLSKSharedSyncStop-oval3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 3.25,6.42 C 3.91,4.43 5.79,3 8,3 10.14,3 11.97,4.35 12.68,6.24" />\n    </g>\n    <path id="_OLSKSharedSyncStop-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 11.62,1.66 L 3.96,13.91" />\n</svg>\n';function gt(e,t,r){const o=e.slice();return o[19]=t[r],o}function Ct(e,t,r){const o=e.slice();return o[22]=t[r],o}const Dt=e=>({OLSKCollectionItem:65&e}),Kt=e=>({OLSKCollectionItem:e[22]}),Lt=e=>({}),Ot=e=>({});function yt(e){let t,r;const o=e[16].OLSKCollectionEmpty,n=l(o,e,e[15],Ot);return{c(){t=K("div"),n&&n.c(),w(t,"class","OLSKCollectionEmpty"),w(t,"aria-hidden","true")},m(e,o){g(e,t,o),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||32768&t)&&p(n,o,e,e[15],r?c(o,e[15],t,Lt):d(e[15]),Ot)},i(e){r||(J(n,e),r=!0)},o(e){Y(n,e),r=!1},d(e){e&&C(t),n&&n.d(e)}}}function bt(e){let t,r,o=e[19]+"";return{c(){t=K("div"),r=L(o),w(t,"class","OLSKCollectionChunkHeading OLSKStickyHeader")},m(e,o){g(e,t,o),S(t,r)},p(e,t){64&t&&o!==(o=e[19]+"")&&v(r,o)},d(e){e&&C(t)}}}function wt(e){let r,o,n=ht+"";return{c(){r=K("div"),o=K("div"),w(o,"class","OLSKCollectionItemStashStatusImage svelte-foe401"),w(r,"class","OLSKCollectionItemStashStatus svelte-foe401")},m(e,t){g(e,r,t),S(r,o),o.innerHTML=n},p:t,d(e){e&&C(r)}}}function vt(e){let t,r,o,n,i,a,s,u,h=e[1]._OLSKCollectionStashEnabled&&wt();const m=e[16].OLSKCollectionItem,f=l(m,e,e[15],Kt);function D(){return e[17](e[22])}return{c(){t=K("div"),h&&h.c(),r=O(),f&&f.c(),o=O(),w(t,"class",n="OLSKCollectionItem "+e[5]+" svelte-foe401"),w(t,"aria-label",i=e[2](e[22])),w(t,"role","button"),E(t,"OLSKCollectionItemStash",e[1]._OLSKCollectionStashItems.includes(e[22])),E(t,"OLSKCollectionItemLocus",e[22]===e[4])},m(e,n){g(e,t,n),h&&h.m(t,null),S(t,r),f&&f.m(t,null),S(t,o),a=!0,s||(u=b(t,"click",D),s=!0)},p(o,s){(e=o)[1]._OLSKCollectionStashEnabled?h?h.p(e,s):(h=wt(),h.c(),h.m(t,r)):h&&(h.d(1),h=null),f&&f.p&&(!a||32833&s)&&p(f,m,e,e[15],a?c(m,e[15],s,Dt):d(e[15]),Kt),(!a||32&s&&n!==(n="OLSKCollectionItem "+e[5]+" svelte-foe401"))&&w(t,"class",n),(!a||69&s&&i!==(i=e[2](e[22])))&&w(t,"aria-label",i),(!a||99&s)&&E(t,"OLSKCollectionItemStash",e[1]._OLSKCollectionStashItems.includes(e[22])),(!a||113&s)&&E(t,"OLSKCollectionItemLocus",e[22]===e[4])},i(e){a||(J(f,e),a=!0)},o(e){Y(f,e),a=!1},d(e){e&&C(t),h&&h.d(),f&&f.d(e),s=!1,u()}}}function Vt(e){let t,r,o,n,i,a=e[19]&&bt(e),s=e[19]?e[6]._ValueItemsChunked[e[19]]:e[0],l=[];for(let t=0;t<s.length;t+=1)l[t]=vt(Ct(e,s,t));const u=e=>Y(l[e],1,1,()=>{l[e]=null});return{c(){t=K("div"),a&&a.c(),r=O(),o=K("div");for(let e=0;e<l.length;e+=1)l[e].c();n=O(),w(o,"class","OLSKCollectionChunkItems"),w(t,"class","OLSKCollectionChunk")},m(e,s){g(e,t,s),a&&a.m(t,null),S(t,r),S(t,o);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(o,null);S(t,n),i=!0},p(e,n){if(e[19]?a?a.p(e,n):(a=bt(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),32895&n){let t;for(s=e[19]?e[6]._ValueItemsChunked[e[19]]:e[0],t=0;t<s.length;t+=1){const r=Ct(e,s,t);l[t]?(l[t].p(r,n),J(l[t],1)):(l[t]=vt(r),l[t].c(),J(l[t],1),l[t].m(o,null))}for(z(),t=s.length;t<l.length;t+=1)u(t);q()}},i(e){if(!i){for(let e=0;e<s.length;e+=1)J(l[e]);i=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Y(l[e]);i=!1},d(e){e&&C(t),a&&a.d(),D(l,e)}}}function Tt(e){let t,r,o,n,i,s;const u=e[16].default,h=l(u,e,e[15],null);let m=!e[0].length&&yt(e),f=e[6]._ValueItemsChunks||[void 0],L=[];for(let t=0;t<f.length;t+=1)L[t]=Vt(gt(e,f,t));const y=e=>Y(L[e],1,1,()=>{L[e]=null});return{c(){t=K("div"),h&&h.c(),r=O(),m&&m.c(),o=O();for(let e=0;e<L.length;e+=1)L[e].c();w(t,"class","OLSKCollection")},m(l,u){g(l,t,u),h&&h.m(t,null),S(t,r),m&&m.m(t,null),S(t,o);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(t,null);n=!0,i||(s=b(window,"keydown",function(){a(e[6].InterfaceWindowDidKeydown)&&e[6].InterfaceWindowDidKeydown.apply(this,arguments)}),i=!0)},p(r,[i]){if(e=r,h&&h.p&&(!n||32768&i)&&p(h,u,e,e[15],n?c(u,e[15],i,null):d(e[15]),null),e[0].length?m&&(z(),Y(m,1,1,()=>{m=null}),q()):m?(m.p(e,i),1&i&&J(m,1)):(m=yt(e),m.c(),J(m,1),m.m(t,o)),32895&i){let r;for(f=e[6]._ValueItemsChunks||[void 0],r=0;r<f.length;r+=1){const o=gt(e,f,r);L[r]?(L[r].p(o,i),J(L[r],1)):(L[r]=Vt(o),L[r].c(),J(L[r],1),L[r].m(t,null))}for(z(),r=f.length;r<L.length;r+=1)y(r);q()}},i(e){if(!n){J(h,e),J(m);for(let e=0;e<f.length;e+=1)J(L[e]);n=!0}},o(e){Y(h,e),Y(m),L=L.filter(Boolean);for(let e=0;e<L.length;e+=1)Y(L[e]);n=!1},d(e){e&&C(t),h&&h.d(e),m&&m.d(),D(L,e),i=!1,s()}}}function Et(e,t,r){let{$$slots:o={},$$scope:n}=t,{OLSKCollectionItemAccessibilitySummaryFunction:i}=t,{OLSKCollectionSortFunction:a}=t,{OLSKCollectionChunkFunction:s=null}=t,{OLSKCollectionChunkKeySortFunction:l=null}=t,{_OLSKCollectionDispatchKey:u}=t,{OLSKCollectionDispatchClick:c}=t,{OLSKCollectionDispatchArrow:p=null}=t,{OLSKCollectionDispatchStash:d=null}=t,{OLSKCollectionItems:h=[]}=t,{OLSKCollectionItemsLocus:m=null}=t,{OLSKCollectionItemClass:f=""}=t,{OLSKCollectionEnableLooping:S=!1}=t,{OLSKCollectionIgnoreKeyboard:g=!1}=t;const C=Object.assign(tt.OLSKCollectionAPI({OLSKCollectionItems:h,_OLSKCollectionKeyFunction:u,OLSKCollectionSortFunction:a,OLSKCollectionDispatchChange(){r(0,h),D(h)}}),{_OLSKCollectionStashItems:[],_OLSKCollectionStashEnabled:!1,OLSKCollectionStashEnabled:e=>void 0===e?C._OLSKCollectionStashEnabled:(r(1,C._OLSKCollectionStashItems=[],C),r(1,C._OLSKCollectionStashEnabled=e,C)),_OLSKCollectionStashToggle(e){r(1,C._OLSKCollectionStashItems=C._OLSKCollectionStashItems.includes(e)?C._OLSKCollectionStashItems.filter(function(t){return t!==e}):C._OLSKCollectionStashItems.concat(e),C),d&&d(C._OLSKCollectionStashItems.slice())}}),D=function(e){if(C._OLSKCollectionDebugReassign(e),!s)return;const t=JSON.stringify(h.map(u));t!==K._ValueOrder&&(r(6,K._ValueOrder=t,K),r(6,K._ValueItemsChunked=s(h),K),r(6,K._ValueItemsChunks=function(e){return l?e.sort(l):e}(Object.keys(K._ValueItemsChunked)),K))},K={_ValueOrder:"",InterfaceWindowDidKeydown(e){if(!p)return;if(g)return;if(!h.length)return;const t={ArrowUp:()=>((S||h[0]!==m)&&K.ControlArrowIncrement(-1),e.preventDefault()),ArrowDown:()=>((S||h.slice(-1).pop()!==m)&&K.ControlArrowIncrement(1),e.preventDefault())};t[e.code]&&t[e.code]()},ControlArrowIncrement(e){p(h[tt.OLSKCollectionConstrainIndex(h,h.indexOf(m)+e)])}};return e.$$set=e=>{"OLSKCollectionItemAccessibilitySummaryFunction"in e&&r(2,i=e.OLSKCollectionItemAccessibilitySummaryFunction),"OLSKCollectionSortFunction"in e&&r(7,a=e.OLSKCollectionSortFunction),"OLSKCollectionChunkFunction"in e&&r(8,s=e.OLSKCollectionChunkFunction),"OLSKCollectionChunkKeySortFunction"in e&&r(9,l=e.OLSKCollectionChunkKeySortFunction),"_OLSKCollectionDispatchKey"in e&&r(10,u=e._OLSKCollectionDispatchKey),"OLSKCollectionDispatchClick"in e&&r(3,c=e.OLSKCollectionDispatchClick),"OLSKCollectionDispatchArrow"in e&&r(11,p=e.OLSKCollectionDispatchArrow),"OLSKCollectionDispatchStash"in e&&r(12,d=e.OLSKCollectionDispatchStash),"OLSKCollectionItems"in e&&r(0,h=e.OLSKCollectionItems),"OLSKCollectionItemsLocus"in e&&r(4,m=e.OLSKCollectionItemsLocus),"OLSKCollectionItemClass"in e&&r(5,f=e.OLSKCollectionItemClass),"OLSKCollectionEnableLooping"in e&&r(13,S=e.OLSKCollectionEnableLooping),"OLSKCollectionIgnoreKeyboard"in e&&r(14,g=e.OLSKCollectionIgnoreKeyboard),"$$scope"in e&&r(15,n=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&D(h)},[h,C,i,c,m,f,K,a,s,l,u,p,d,S,g,n,o,e=>C._OLSKCollectionStashEnabled?C._OLSKCollectionStashToggle(e):c(e)]}class It extends oe{constructor(e){super(),re(this,e,Et,Tt,s,{OLSKCollectionItemAccessibilitySummaryFunction:2,OLSKCollectionSortFunction:7,OLSKCollectionChunkFunction:8,OLSKCollectionChunkKeySortFunction:9,_OLSKCollectionDispatchKey:10,OLSKCollectionDispatchClick:3,OLSKCollectionDispatchArrow:11,OLSKCollectionDispatchStash:12,OLSKCollectionItems:0,OLSKCollectionItemsLocus:4,OLSKCollectionItemClass:5,OLSKCollectionEnableLooping:13,OLSKCollectionIgnoreKeyboard:14,modPublic:1})}get modPublic(){return this.$$.ctx[1]}}const kt=e=>({}),_t=e=>({}),xt=e=>({OLSKCollectionItem:268435456&e}),Rt=e=>({OLSKCollectionItem:e[28]}),Pt=e=>({}),At=e=>({}),Ft=e=>({}),Nt=e=>({}),Wt=e=>({}),Bt=e=>({});function Mt(e){let r,o,n,s,l;return{c(){r=K("input"),w(r,"class",o="OLSKNarrowFilterField "+e[15]+" OLSKDecorInput"),w(r,"placeholder",n=e[16]||ue("OLSKNarrowFilterFieldText")),r.autofocus=e[18]},m(t,o){g(t,r,o),V(r,e[0]),e[18]&&r.focus(),s||(l=[b(r,"input",e[25]),b(r,"input",function(){a(e[19].InterfaceFilterFieldDidInput)&&e[19].InterfaceFilterFieldDidInput.apply(this,arguments)})],s=!0)},p(t,i){e=t,32768&i&&o!==(o="OLSKNarrowFilterField "+e[15]+" OLSKDecorInput")&&w(r,"class",o),65536&i&&n!==(n=e[16]||ue("OLSKNarrowFilterFieldText"))&&w(r,"placeholder",n),262144&i&&(r.autofocus=e[18]),1&i&&r.value!==e[0]&&V(r,e[0])},i:t,o:t,d(e){e&&C(r),s=!1,i(l)}}}function jt(e){let t,r,o,n,i;return r=new et({props:{OLSKInputWrapperValue:e[17]?e[0]:"",OLSKInputWrapperDispatchClear:e[19].OLSKInputWrapperDispatchClear,$$slots:{default:[Zt]},$$scope:{ctx:e}}}),{c(){t=K("form"),Q(r.$$.fragment),w(t,"class","OLSKNarrowForm OLSKToolbarFlexible")},m(s,l){g(s,t,l),X(r,t,null),o=!0,n||(i=b(t,"submit",function(){a(e[19].InterfaceFormDidSubmit)&&e[19].InterfaceFormDidSubmit.apply(this,arguments)}),n=!0)},p(t,o){e=t;const n={};131073&o&&(n.OLSKInputWrapperValue=e[17]?e[0]:""),524288&o&&(n.OLSKInputWrapperDispatchClear=e[19].OLSKInputWrapperDispatchClear),135102465&o&&(n.$$scope={dirty:o,ctx:e}),r.$set(n)},i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(e){e&&C(t),ee(r),n=!1,i()}}}function Zt(e){let t,r,o,n,s;return{c(){t=K("input"),w(t,"class",r="OLSKNarrowFilterField "+e[15]+" OLSKDecorInput"),w(t,"placeholder",o=e[16]||ue("OLSKNarrowFilterFieldText")),t.autofocus=e[18]},m(r,o){g(r,t,o),V(t,e[0]),e[18]&&t.focus(),n||(s=[b(t,"input",e[24]),b(t,"input",function(){a(e[19].InterfaceFilterFieldDidInput)&&e[19].InterfaceFilterFieldDidInput.apply(this,arguments)})],n=!0)},p(n,i){e=n,32768&i&&r!==(r="OLSKNarrowFilterField "+e[15]+" OLSKDecorInput")&&w(t,"class",r),65536&i&&o!==(o=e[16]||ue("OLSKNarrowFilterFieldText"))&&w(t,"placeholder",o),262144&i&&(t.autofocus=e[18]),1&i&&t.value!==e[0]&&V(t,e[0])},d(e){e&&C(t),n=!1,i(s)}}}function Ut(e){let t;const r=e[23].OLSKCollectionItem,o=l(r,e,e[27],Rt);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||402653184&n)&&p(o,r,e,e[27],t?c(r,e[27],n,xt):d(e[27]),Rt)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function $t(e){let t,r,o=e[20].OLSKCollectionItem&&Ut(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKCollectionItem")},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,r){e[20].OLSKCollectionItem?o?(o.p(e,r),1048576&r&&J(o,1)):(o=Ut(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function Ht(e){let t;const r=e[23].OLSKCollectionEmpty,o=l(r,e,e[27],At);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||134217728&n)&&p(o,r,e,e[27],t?c(r,e[27],n,Pt):d(e[27]),At)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function Gt(e){let t,r,o=e[20].OLSKCollectionEmpty&&Ht(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKCollectionEmpty")},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,r){e[20].OLSKCollectionEmpty?o?(o.p(e,r),1048576&r&&J(o,1)):(o=Ht(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function zt(e){let t,r,o,n,i,a,s,u,h,m,f,D,L,y;const b=e[23].OLSKNarrowToolbarHead,v=l(b,e,e[27],Bt),V=[jt,Mt],T=[];function I(e,t){return e[17]?0:1}n=I(e),i=T[n]=V[n](e);const k=e[23].OLSKNarrowToolbarTail,_=l(k,e,e[27],Nt),x=e[23].default,R=l(x,e,e[27],null);let P={OLSKCollectionItems:e[7],OLSKCollectionItemsLocus:e[8],OLSKCollectionIgnoreKeyboard:!e[19].DataIsFocused(),OLSKCollectionItemClass:e[6],OLSKCollectionSortFunction:e[2],_OLSKCollectionDispatchKey:e[3],OLSKCollectionChunkFunction:e[4],OLSKCollectionChunkKeySortFunction:e[5],OLSKCollectionItemAccessibilitySummaryFunction:e[9],OLSKCollectionDispatchClick:e[10],OLSKCollectionDispatchArrow:e[11],OLSKCollectionDispatchStash:e[12],$$slots:{OLSKCollectionEmpty:[Gt,({OLSKCollectionItem:e})=>({28:e}),({OLSKCollectionItem:e})=>e?268435456:0],OLSKCollectionItem:[$t,({OLSKCollectionItem:e})=>({28:e}),({OLSKCollectionItem:e})=>e?268435456:0]},$$scope:{ctx:e}};m=new It({props:P}),e[26](m);const A=e[23].OLSKNarrowBodyTail,F=l(A,e,e[27],_t);return{c(){t=K("div"),r=K("header"),v&&v.c(),o=O(),i.c(),a=O(),_&&_.c(),s=O(),u=K("section"),R&&R.c(),h=O(),Q(m.$$.fragment),f=O(),F&&F.c(),w(r,"class","OLSKNarrowToolbar OLSKMobileViewHeader OLSKToolbar OLSKCommonEdgeBottom"),w(u,"class","OLSKNarrowBody"),w(t,"class",D="OLSKNarrow OLSKViewportMaster OLSKCommonEdgeRight "+e[14]),w(t,"aria-hidden",L=!!e[13]||null),E(t,"OLSKMobileViewInactive",e[13]),E(t,"OLSKNarrowFocused",e[19]._ValueFilterFieldFocused)},m(e,i){g(e,t,i),S(t,r),v&&v.m(r,null),S(r,o),T[n].m(r,null),S(r,a),_&&_.m(r,null),S(t,s),S(t,u),R&&R.m(u,null),S(u,h),X(m,u,null),S(u,f),F&&F.m(u,null),y=!0},p(e,[o]){v&&v.p&&(!y||134217728&o)&&p(v,b,e,e[27],y?c(b,e[27],o,Wt):d(e[27]),Bt);let s=n;n=I(e),n===s?T[n].p(e,o):(z(),Y(T[s],1,1,()=>{T[s]=null}),q(),i=T[n],i?i.p(e,o):(i=T[n]=V[n](e),i.c()),J(i,1),i.m(r,a)),_&&_.p&&(!y||134217728&o)&&p(_,k,e,e[27],y?c(k,e[27],o,Ft):d(e[27]),Nt),R&&R.p&&(!y||134217728&o)&&p(R,x,e,e[27],y?c(x,e[27],o,null):d(e[27]),null);const l={};128&o&&(l.OLSKCollectionItems=e[7]),256&o&&(l.OLSKCollectionItemsLocus=e[8]),524288&o&&(l.OLSKCollectionIgnoreKeyboard=!e[19].DataIsFocused()),64&o&&(l.OLSKCollectionItemClass=e[6]),4&o&&(l.OLSKCollectionSortFunction=e[2]),8&o&&(l._OLSKCollectionDispatchKey=e[3]),16&o&&(l.OLSKCollectionChunkFunction=e[4]),32&o&&(l.OLSKCollectionChunkKeySortFunction=e[5]),512&o&&(l.OLSKCollectionItemAccessibilitySummaryFunction=e[9]),1024&o&&(l.OLSKCollectionDispatchClick=e[10]),2048&o&&(l.OLSKCollectionDispatchArrow=e[11]),4096&o&&(l.OLSKCollectionDispatchStash=e[12]),403701760&o&&(l.$$scope={dirty:o,ctx:e}),m.$set(l),F&&F.p&&(!y||134217728&o)&&p(F,A,e,e[27],y?c(A,e[27],o,kt):d(e[27]),_t),(!y||16384&o&&D!==(D="OLSKNarrow OLSKViewportMaster OLSKCommonEdgeRight "+e[14]))&&w(t,"class",D),(!y||8192&o&&L!==(L=!!e[13]||null))&&w(t,"aria-hidden",L),(!y||24576&o)&&E(t,"OLSKMobileViewInactive",e[13]),(!y||540672&o)&&E(t,"OLSKNarrowFocused",e[19]._ValueFilterFieldFocused)},i(e){y||(J(v,e),J(i),J(_,e),J(R,e),J(m.$$.fragment,e),J(F,e),y=!0)},o(e){Y(v,e),Y(i),Y(_,e),Y(R,e),Y(m.$$.fragment,e),Y(F,e),y=!1},d(r){r&&C(t),v&&v.d(r),T[n].d(),_&&_.d(r),R&&R.d(r),e[26](null),ee(m),F&&F.d(r)}}}function qt(e,t,r){let{$$slots:o={},$$scope:n}=t;const i=m(o);let{OLSKCollectionSortFunction:a}=t,{_OLSKCollectionDispatchKey:s}=t,{OLSKCollectionChunkFunction:l=null}=t,{OLSKCollectionChunkKeySortFunction:u=null}=t,{OLSKCollectionItemClass:c=""}=t,{OLSKNarrowFilterText:p}=t,{OLSKCollectionItems:d}=t,{OLSKCollectionItemsLocus:h=null}=t,{OLSKCollectionItemAccessibilitySummaryFunction:f}=t,{OLSKCollectionDispatchClick:S}=t,{OLSKCollectionDispatchArrow:g}=t,{OLSKCollectionDispatchStash:C=null}=t,{OLSKNarrowDispatchFilter:D}=t,{OLSKNarrowDispatchSubmit:K=null}=t,{OLSKMobileViewInactive:L=!1}=t,{OLSKNarrowClass:O=""}=t,{OLSKNarrowFilterFieldClass:y=""}=t,{OLSKNarrowFilterFieldPlaceholderText:b=""}=t,{OLSKNarrowFilterFieldClearButton:w=!0}=t,{OLSKNarrowFilterFieldAutofocus:v=!1}=t;const V={},T={_ValueFilterFieldFocused:!1,DataIsFocused:()=>document.activeElement===document.querySelector(".OLSKNarrowFilterField"),DataIsMobile:()=>window.innerWidth<=760,InterfaceFilterFieldDidInput(e){D(this.value)},InterfaceFormDidSubmit(e){e.preventDefault(),K&&K()},OLSKInputWrapperDispatchClear(){D("")},SetupEverything(){T.SetupFilterFieldEventListeners()},SetupFilterFieldEventListeners(){document.querySelector(".OLSKNarrowFilterField").addEventListener("focus",function(){r(19,T._ValueFilterFieldFocused=!0,T)}),document.querySelector(".OLSKNarrowFilterField").addEventListener("blur",function(){r(19,T._ValueFilterFieldFocused=!1,T)})},LifecycleComponentDidMount(){T.SetupEverything()},LifecycleComponentDidUpdate(){if(xe())return;if(T.DataIsMobile())return;const e=document.querySelector(".OLSKCollectionItemLocus");e&&e.scrollIntoView({block:"nearest",inline:"nearest"})}};return x(T.LifecycleComponentDidMount),R(T.LifecycleComponentDidUpdate),e.$$set=e=>{"OLSKCollectionSortFunction"in e&&r(2,a=e.OLSKCollectionSortFunction),"_OLSKCollectionDispatchKey"in e&&r(3,s=e._OLSKCollectionDispatchKey),"OLSKCollectionChunkFunction"in e&&r(4,l=e.OLSKCollectionChunkFunction),"OLSKCollectionChunkKeySortFunction"in e&&r(5,u=e.OLSKCollectionChunkKeySortFunction),"OLSKCollectionItemClass"in e&&r(6,c=e.OLSKCollectionItemClass),"OLSKNarrowFilterText"in e&&r(0,p=e.OLSKNarrowFilterText),"OLSKCollectionItems"in e&&r(7,d=e.OLSKCollectionItems),"OLSKCollectionItemsLocus"in e&&r(8,h=e.OLSKCollectionItemsLocus),"OLSKCollectionItemAccessibilitySummaryFunction"in e&&r(9,f=e.OLSKCollectionItemAccessibilitySummaryFunction),"OLSKCollectionDispatchClick"in e&&r(10,S=e.OLSKCollectionDispatchClick),"OLSKCollectionDispatchArrow"in e&&r(11,g=e.OLSKCollectionDispatchArrow),"OLSKCollectionDispatchStash"in e&&r(12,C=e.OLSKCollectionDispatchStash),"OLSKNarrowDispatchFilter"in e&&r(21,D=e.OLSKNarrowDispatchFilter),"OLSKNarrowDispatchSubmit"in e&&r(22,K=e.OLSKNarrowDispatchSubmit),"OLSKMobileViewInactive"in e&&r(13,L=e.OLSKMobileViewInactive),"OLSKNarrowClass"in e&&r(14,O=e.OLSKNarrowClass),"OLSKNarrowFilterFieldClass"in e&&r(15,y=e.OLSKNarrowFilterFieldClass),"OLSKNarrowFilterFieldPlaceholderText"in e&&r(16,b=e.OLSKNarrowFilterFieldPlaceholderText),"OLSKNarrowFilterFieldClearButton"in e&&r(17,w=e.OLSKNarrowFilterFieldClearButton),"OLSKNarrowFilterFieldAutofocus"in e&&r(18,v=e.OLSKNarrowFilterFieldAutofocus),"$$scope"in e&&r(27,n=e.$$scope)},[p,V,a,s,l,u,c,d,h,f,S,g,C,L,O,y,b,w,v,T,i,D,K,o,function(){p=this.value,r(0,p)},function(){p=this.value,r(0,p)},function(e){A[e?"unshift":"push"](()=>{V._OLSKCollection=e,r(1,V)})},n]}class Jt extends oe{constructor(e){super(),re(this,e,qt,zt,s,{OLSKCollectionSortFunction:2,_OLSKCollectionDispatchKey:3,OLSKCollectionChunkFunction:4,OLSKCollectionChunkKeySortFunction:5,OLSKCollectionItemClass:6,OLSKNarrowFilterText:0,OLSKCollectionItems:7,OLSKCollectionItemsLocus:8,OLSKCollectionItemAccessibilitySummaryFunction:9,OLSKCollectionDispatchClick:10,OLSKCollectionDispatchArrow:11,OLSKCollectionDispatchStash:12,OLSKNarrowDispatchFilter:21,OLSKNarrowDispatchSubmit:22,OLSKMobileViewInactive:13,OLSKNarrowClass:14,OLSKNarrowFilterFieldClass:15,OLSKNarrowFilterFieldPlaceholderText:16,OLSKNarrowFilterFieldClearButton:17,OLSKNarrowFilterFieldAutofocus:18,modPublic:1})}get modPublic(){return this.$$.ctx[1]}}function Yt(e){let r,o=(e[0]||ue("OLSKPlaceholderText"))+"";return{c(){r=K("div"),w(r,"class","OLSKPlaceholder OLSKDecorTextVisual svelte-1fqi4c")},m(e,t){g(e,r,t),r.innerHTML=o},p(e,[t]){1&t&&o!==(o=(e[0]||ue("OLSKPlaceholderText"))+"")&&(r.innerHTML=o)},i:t,o:t,d(e){e&&C(r)}}}function Qt(e,t,r){let{OLSKPlaceholderHTML:o=""}=t;return e.$$set=e=>{"OLSKPlaceholderHTML"in e&&r(0,o=e.OLSKPlaceholderHTML)},[o]}class Xt extends oe{constructor(e){super(),re(this,e,Qt,Yt,s,{OLSKPlaceholderHTML:0})}}const{window:er}=f,tr=e=>({OLSKCatalogItemSelected:1024&e}),rr=e=>({OLSKCatalogItemSelected:e[10]._ValueItemSelected}),or=e=>({}),nr=e=>({}),ir=e=>({}),ar=e=>({}),sr=e=>({OLSKCollectionItem:1073741824&e}),lr=e=>({OLSKCollectionItem:e[30]}),ur=e=>({}),cr=e=>({});function pr(e){let t;const r=e[26].default,o=l(r,e,e[29],null);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||536870912&n)&&p(o,r,e,e[29],t?c(r,e[29],n,null):d(e[29]),null)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function dr(e){let t;const r=e[26].OLSKNarrowToolbarHead,o=l(r,e,e[29],nr);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||536870912&n)&&p(o,r,e,e[29],t?c(r,e[29],n,or):d(e[29]),nr)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function hr(e){let t,r,o=e[11].OLSKNarrowToolbarHead&&dr(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKNarrowToolbarHead")},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,r){e[11].OLSKNarrowToolbarHead?o?(o.p(e,r),2048&r&&J(o,1)):(o=dr(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function mr(e){let t;const r=e[26].OLSKNarrowToolbarTail,o=l(r,e,e[29],ar);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||536870912&n)&&p(o,r,e,e[29],t?c(r,e[29],n,ir):d(e[29]),ar)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function fr(e){let r,o,n,i;return{c(){r=K("div"),o=K("button"),o.textContent="OK",w(o,"class","OLSKCatalogStashDoneButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-14fqf3h"),w(r,"class","OLSKToolbarElementGroup")},m(t,s){g(t,r,s),S(r,o),n||(i=b(o,"click",function(){a(e[10].InterfaceStashDoneButtonDidClick)&&e[10].InterfaceStashDoneButtonDidClick.apply(this,arguments)}),n=!0)},p(t,r){e=t},i:t,o:t,d(e){e&&C(r),n=!1,i()}}}function Sr(e){let t,r,o,n;const i=[fr,mr],a=[];function s(e,t){return e[10]._ValueStashEnabled?0:e[11].OLSKNarrowToolbarTail?1:-1}return~(r=s(e))&&(o=a[r]=i[r](e)),{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKNarrowToolbarTail")},m(e,o){g(e,t,o),~r&&a[r].m(t,null),n=!0},p(e,n){let l=r;r=s(e),r===l?~r&&a[r].p(e,n):(o&&(z(),Y(a[l],1,1,()=>{a[l]=null}),q()),~r?(o=a[r],o?o.p(e,n):(o=a[r]=i[r](e),o.c()),J(o,1),o.m(t,null)):o=null)},i(e){n||(J(o),n=!0)},o(e){Y(o),n=!1},d(e){e&&C(t),~r&&a[r].d()}}}function gr(e){let t;const r=e[26].OLSKCollectionItem,o=l(r,e,e[29],lr);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||1610612736&n)&&p(o,r,e,e[29],t?c(r,e[29],n,sr):d(e[29]),lr)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function Cr(e){let t,r,o=e[11].OLSKCollectionItem&&gr(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKCollectionItem")},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,r){e[11].OLSKCollectionItem?o?(o.p(e,r),2048&r&&J(o,1)):(o=gr(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function Dr(e){let r,o,n;return o=new Xt({props:{OLSKPlaceholderHTML:ue("OLSKCatalogMasterPlaceholderText")}}),{c(){r=K("div"),Q(o.$$.fragment),w(r,"slot","OLSKCollectionEmpty")},m(e,t){g(e,r,t),X(o,r,null),n=!0},p:t,i(e){n||(J(o.$$.fragment,e),n=!0)},o(e){Y(o.$$.fragment,e),n=!1},d(e){e&&C(r),ee(o)}}}function Kr(e){let t;const r=e[26].OLSKNarrowBodyTail,o=l(r,e,e[29],cr);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||536870912&n)&&p(o,r,e,e[29],t?c(r,e[29],n,ur):d(e[29]),cr)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function Lr(e){let t,r,o=e[11].OLSKNarrowBodyTail&&Kr(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKNarrowBodyTail")},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,r){e[11].OLSKNarrowBodyTail?o?(o.p(e,r),2048&r&&J(o,1)):(o=Kr(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function Or(e){let t,r;return t=new Xt({props:{OLSKPlaceholderHTML:e[10]._ValueStashEnabled?Le(ue("OLSKCatalogStashPlaceholderTextFormat"),e[10]._ValueStashCount):""}}),{c(){Q(t.$$.fragment)},m(e,o){X(t,e,o),r=!0},p(e,r){const o={};1024&r&&(o.OLSKPlaceholderHTML=e[10]._ValueStashEnabled?Le(ue("OLSKCatalogStashPlaceholderTextFormat"),e[10]._ValueStashCount):""),t.$set(o)},i(e){r||(J(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){ee(t,e)}}}function yr(e){let t,r,o=e[11].OLSKCatalogDetailContent&&br(e);return{c(){o&&o.c(),t=y()},m(e,n){o&&o.m(e,n),g(e,t,n),r=!0},p(e,r){e[11].OLSKCatalogDetailContent?o?(o.p(e,r),2048&r&&J(o,1)):(o=br(e),o.c(),J(o,1),o.m(t.parentNode,t)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){o&&o.d(e),e&&C(t)}}}function br(e){let r,o,n,i,s,u;const h=e[26].OLSKCatalogDetailContent,m=l(h,e,e[29],rr);return{c(){r=K("div"),n=O(),m&&m.c(),T(r,"display","none")},m(l,c){var p;g(l,r,c),e[28](r),g(l,n,c),m&&m.m(l,c),i=!0,s||(p=o=e[10].LifecycleDetailDidCreate(r),u=p&&a(p.destroy)?p.destroy:t,s=!0)},p(e,t){m&&m.p&&(!i||536871936&t)&&p(m,h,e,e[29],i?c(h,e[29],t,tr):d(e[29]),rr)},i(e){i||(J(m,e),i=!0)},o(e){Y(m,e),i=!1},d(t){t&&C(r),e[28](null),t&&C(n),m&&m.d(t),s=!1,u()}}}function wr(e){let t,r,o,n,i,s,l,u,c,p={OLSKCollectionSortFunction:e[4],_OLSKCollectionDispatchKey:e[5],OLSKCollectionChunkFunction:e[6],OLSKCollectionChunkKeySortFunction:e[7],OLSKCollectionItemClass:e[2],OLSKCollectionItems:e[10]._ValueItemsVisible,OLSKCollectionItemsLocus:e[10]._ValueItemSelected,OLSKNarrowFilterText:e[10]._ValueFilterText,OLSKNarrowFilterFieldPlaceholderText:e[3],OLSKCollectionDispatchClick:e[8],OLSKCollectionDispatchArrow:e[9],OLSKCollectionDispatchStash:e[10].OLSKCollectionDispatchStash,OLSKNarrowDispatchFilter:e[10].OLSKNarrowDispatchFilter,OLSKNarrowDispatchSubmit:e[10].OLSKNarrowDispatchSubmit,OLSKCollectionItemAccessibilitySummaryFunction:e[1],OLSKMobileViewInactive:e[10].OLSKMobileViewInactive,$$slots:{OLSKNarrowBodyTail:[Lr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0],OLSKCollectionEmpty:[Dr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0],OLSKCollectionItem:[Cr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0],OLSKNarrowToolbarTail:[Sr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0],OLSKNarrowToolbarHead:[hr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0],default:[pr,({OLSKCollectionItem:e})=>({30:e}),({OLSKCollectionItem:e})=>e?1073741824:0]},$$scope:{ctx:e}};r=new Jt({props:p}),e[27](r);let d=!e[10]._ValueItemSelected&&Or(e),h=e[10]._ValueItemSelected&&yr(e);return{c(){t=K("div"),Q(r.$$.fragment),o=O(),n=K("div"),d&&d.c(),i=O(),h&&h.c(),w(n,"class","OLSKCatalogDetail OLSKViewportDetail svelte-14fqf3h"),w(n,"aria-hidden",s=!e[10].OLSKMobileViewInactive||null),E(n,"OLSKMobileViewInactive",!e[10].OLSKMobileViewInactive),w(t,"class","OLSKCatalog svelte-14fqf3h")},m(s,p){g(s,t,p),X(r,t,null),S(t,o),S(t,n),d&&d.m(n,null),S(n,i),h&&h.m(n,null),l=!0,u||(c=b(er,"keydown",function(){a(e[10].InterfaceWindowDidKeydown)&&e[10].InterfaceWindowDidKeydown.apply(this,arguments)}),u=!0)},p(t,[o]){e=t;const a={};16&o&&(a.OLSKCollectionSortFunction=e[4]),32&o&&(a._OLSKCollectionDispatchKey=e[5]),64&o&&(a.OLSKCollectionChunkFunction=e[6]),128&o&&(a.OLSKCollectionChunkKeySortFunction=e[7]),4&o&&(a.OLSKCollectionItemClass=e[2]),1024&o&&(a.OLSKCollectionItems=e[10]._ValueItemsVisible),1024&o&&(a.OLSKCollectionItemsLocus=e[10]._ValueItemSelected),1024&o&&(a.OLSKNarrowFilterText=e[10]._ValueFilterText),8&o&&(a.OLSKNarrowFilterFieldPlaceholderText=e[3]),256&o&&(a.OLSKCollectionDispatchClick=e[8]),512&o&&(a.OLSKCollectionDispatchArrow=e[9]),1024&o&&(a.OLSKCollectionDispatchStash=e[10].OLSKCollectionDispatchStash),1024&o&&(a.OLSKNarrowDispatchFilter=e[10].OLSKNarrowDispatchFilter),1024&o&&(a.OLSKNarrowDispatchSubmit=e[10].OLSKNarrowDispatchSubmit),2&o&&(a.OLSKCollectionItemAccessibilitySummaryFunction=e[1]),1024&o&&(a.OLSKMobileViewInactive=e[10].OLSKMobileViewInactive),1610615808&o&&(a.$$scope={dirty:o,ctx:e}),r.$set(a),e[10]._ValueItemSelected?d&&(z(),Y(d,1,1,()=>{d=null}),q()):d?(d.p(e,o),1024&o&&J(d,1)):(d=Or(e),d.c(),J(d,1),d.m(n,i)),e[10]._ValueItemSelected?h?(h.p(e,o),1024&o&&J(h,1)):(h=yr(e),h.c(),J(h,1),h.m(n,null)):h&&(z(),Y(h,1,1,()=>{h=null}),q()),(!l||1024&o&&s!==(s=!e[10].OLSKMobileViewInactive||null))&&w(n,"aria-hidden",s),(!l||1024&o)&&E(n,"OLSKMobileViewInactive",!e[10].OLSKMobileViewInactive)},i(e){l||(J(r.$$.fragment,e),J(d),J(h),l=!0)},o(e){Y(r.$$.fragment,e),Y(d),Y(h),l=!1},d(o){o&&C(t),e[27](null),ee(r),d&&d.d(),h&&h.d(),u=!1,c()}}}function vr(e,t,r){let{$$slots:o={},$$scope:n}=t;const i=m(o);let{OLSKCollectionItemAccessibilitySummaryFunction:a}=t,{OLSKCollectionItemClass:s=""}=t,{OLSKNarrowFilterFieldPlaceholderText:l=""}=t,{_OLSKCatalogArchiveField:u=null}=t,{OLSKCatalogSortFunction:c}=t,{OLSKCatalogIsMatch:p}=t,{OLSKCatalogExactSortFunction:d=null}=t,{_OLSKCatalogDispatchKey:h}=t,{OLSKCollectionChunkFunction:f=null}=t,{OLSKCollectionChunkKeySortFunction:S=null}=t,{OLSKCollectionDispatchClick:g}=t,{OLSKCollectionDispatchArrow:C}=t,{OLSKCollectionDispatchStash:D=null}=t,{OLSKCatalogDispatchDetailActivate:K=null}=t,{OLSKCatalogDispatchMasterShouldActivate:L=null}=t,{OLSKCatalogDispatchArchivedHide:O=null}=t,{OLSKCatalogDispatchArchivedShow:y=null}=t,{OLSKCatalogDispatchFilterSubmit:b=null}=t,{OLSKCatalogDispatchQuantity:w=null}=t,{OLSKCatalogDispatchEscapeOnEmpty:v=null}=t,{OLSKCatalogDispatchStash:V=null}=t,{OLSKCatalogItems:T=[]}=t,{OLSKCatalogDisableEscape:E=!1}=t;const I={OLSKCatalogDisableEscape:E,_OLSKCatalogDataItemsAll:()=>k._ValueItemsAll.slice(),OLSKCatalogDataItemSelected:()=>k._ValueItemSelected,_OLSKCatalogDataFilterText:()=>k._ValueFilterText,DataIsMobile:()=>window.innerWidth<=760,OLSKCatalogInsert:e=>(k.ValueItemsAll([e].concat(k._ValueItemsAll),!k._ValueItemSelected),w&&w(k._ValueItemsAll.length),e[u]&&O(),e),_OLSKCatalogInsertAndSort:e=>(I.OLSKCatalogInsert(e),k.ValueItemsAll([].concat(k._ValueItemsAll),!0),e),OLSKCatalogSelect:e=>r(10,k._ValueItemSelected=e,k),OLSKCatalogUpdate:e=>(r(10,k._ValueItemsAll=k._ValueItemsAll.map(function(t){return h(t)===h(e)?e:t}),k),r(10,k._ValueItemsVisible=k._ValueItemsVisible.map(function(t){return h(t)===h(e)?e:t}),k),k._ValueItemSelected||k.ValueItemsAll(k._ValueItemsAll),e),OLSKCatalogRemove(e){k.ValueItemsAll(k._ValueItemsAll.filter(function(t){return h(t)!==h(e)}),!k._ValueItemSelected),w&&w(k._ValueItemsAll.length),k._ValueItemSelected&&h(e)===h(k._ValueItemSelected)&&(I.OLSKCatalogSelect(null),I.OLSKCatalogFocusMaster(),k.ControlFocusMaster())},OLSKCatalogActivateDetail(){if(!k.DataIsMobile())return k._OLSKCatalogDetail?K&&K():void r(10,k._ValueShouldActivate=!0,k)},OLSKCatalogFilterWithNoThrottle(e){k.ControlFilterWithNoThrottle(r(10,k._ValueFilterText=e,k))},OLSKCatalogRevealArchive(){r(10,k._ValueArchiveIsVisible=!0,k),k.ValueItemsVisible(k._ValueItemsAll),y()},OLSKCatalogFocusDetail(){r(10,k.OLSKMobileViewInactive=!0,k)},OLSKCatalogFocusMaster(){if(r(10,k.OLSKMobileViewInactive=!1,k),!k.DataIsMobile())return;const e=document.querySelector(".OLSKCollectionItemLocus");e&&setTimeout(function(){e.scrollIntoView({block:"center",inline:"center"})})},OLSKCatalogStashEnabled(e){if(void 0===e)return k._ValueStashEnabled;const t=k._ValueItemSelected;if(!I._OLSKNarrow.modPublic._OLSKCollection.modPublic.OLSKCollectionStashEnabled(r(10,k._ValueStashEnabled=e,k))||!t)return r(10,k._ValueStashCount=0,k);r(10,k._ValueItemSelected=null,k),I._OLSKNarrow.modPublic._OLSKCollection.modPublic._OLSKCollectionStashToggle(t)}},k={OLSKMobileViewInactive:!1,_ValueItemsAll:[],ValueItemsAll(e,t=!0){k.ValueArchiveCount(e),k.ValueItemsVisible(r(10,k._ValueItemsAll=t?e.sort(c):e,k),t)},_ValueArchiveCount:0,_ValueArchiveIsVisible:!1,ValueArchiveCount(e){u&&r(10,k._ValueArchiveCount=e.filter(function(e){return e[u]}).length,k)},_ValueItemsVisible:[],ValueItemsVisible(e,t=!0){const o=e.filter(function(e){return!(!k._ValueArchiveIsVisible&&u&&e[u])&&(!k._ValueFilterText||p(e,k._ValueFilterText))});r(10,k._ValueItemsVisible=t?o.sort(c):o,k)},_ValueItemSelected:null,ValueItemSelected(e){r(10,k._ValueItemSelected=e,k),e||r(10,k.OLSKMobileViewInactive=!1,k)},_ValueFilterText:"",_ValueStashEnabled:!1,DataIsMobile:()=>window.innerWidth<=760,InterfaceStashDoneButtonDidClick(){V&&V(I._OLSKNarrow.modPublic._OLSKCollection.modPublic._OLSKCollectionStashItems),I.OLSKCatalogStashEnabled(!1)},InterfaceWindowDidKeydown(e){if(document.querySelector(".LCHLauncher"))return;const t={Escape(){I.OLSKCatalogDisableEscape||(k._ValueFilterText||k._ValueItemSelected||v&&v(),k.ControlDeselect())},Tab:()=>document.activeElement===document.querySelector(".OLSKNarrowFilterField")&&k._ValueItemSelected?e.preventDefault(K&&K()):e.shiftKey&&document.activeElement!==document.querySelector(".OLSKNarrowFilterField")&&L&&L()?e.preventDefault(k.ControlFocusMaster()):void 0};t[e.key]&&t[e.key]()},ControlSelect(e){if(k.ValueItemSelected(e),!e)return!k.DataIsMobile()&&k.ControlFocusMaster()},ControlFilterWithThrottle(e){r(10,k._ValueFilterText=e,k),pe.OLSKThrottleMappedTimeout(k,"_ValueFilterThrottle",{OLSKThrottleDuration:200,OLSKThrottleCallback:()=>k.ControlFilterWithNoThrottle(k._ValueFilterText)}),xe()&&pe.OLSKThrottleSkip(k._ValueFilterThrottle)},ControlFilterWithNoThrottle:e=>(k._ValueArchiveCount&&(r(10,k._ValueArchiveIsVisible=!!e,k)?y():O()),k.ValueItemsVisible(k._ValueItemsAll),e&&k._ValueItemsVisible.length?void(d&&k.ValueItemSelected(k._ValueItemsVisible.slice().sort(function(t,r){return d(e,t,r)}).shift())):k.ControlSelect(null)),ControlFocusMaster(){r(10,k.OLSKMobileViewInactive=!1,k),k.DataIsMobile()||document.querySelector(".OLSKNarrowFilterField").focus()},ControlFocusDetail(){r(10,k.OLSKMobileViewInactive=!0,k),setTimeout(k.ControlFocusDetail)},ControlDeselect(){k.ValueArchiveCount(k._ValueItemsAll),k._ValueItemsAll.sort(c),k.ControlFilterWithNoThrottle(r(10,k._ValueFilterText="",k)),void 0===xe||xe()||document.querySelector(".OLSKNarrowBody").scrollTo(0,0)},OLSKNarrowDispatchFilter(e){k.ControlFilterWithThrottle(e)},OLSKNarrowDispatchSubmit(){k._ValueFilterText&&b&&b(k._ValueFilterText)},OLSKCollectionDispatchStash(e){r(10,k._ValueStashCount=e.length,k),D&&D(e)},SetupEverything(){k.SetupFocus(),k.SetupItems()},SetupFocus(){setTimeout(k.ControlFocusMaster)},SetupItems(){k.ValueItemsAll(T),k._ValueArchiveCount&&O()},LifecycleModuleWillMount(){k.SetupEverything()},LifecycleDetailDidCreate(){k._ValueShouldActivate&&(delete k._ValueShouldActivate,K&&K())}};return x(k.LifecycleModuleWillMount),e.$$set=e=>{"OLSKCollectionItemAccessibilitySummaryFunction"in e&&r(1,a=e.OLSKCollectionItemAccessibilitySummaryFunction),"OLSKCollectionItemClass"in e&&r(2,s=e.OLSKCollectionItemClass),"OLSKNarrowFilterFieldPlaceholderText"in e&&r(3,l=e.OLSKNarrowFilterFieldPlaceholderText),"_OLSKCatalogArchiveField"in e&&r(12,u=e._OLSKCatalogArchiveField),"OLSKCatalogSortFunction"in e&&r(4,c=e.OLSKCatalogSortFunction),"OLSKCatalogIsMatch"in e&&r(13,p=e.OLSKCatalogIsMatch),"OLSKCatalogExactSortFunction"in e&&r(14,d=e.OLSKCatalogExactSortFunction),"_OLSKCatalogDispatchKey"in e&&r(5,h=e._OLSKCatalogDispatchKey),"OLSKCollectionChunkFunction"in e&&r(6,f=e.OLSKCollectionChunkFunction),"OLSKCollectionChunkKeySortFunction"in e&&r(7,S=e.OLSKCollectionChunkKeySortFunction),"OLSKCollectionDispatchClick"in e&&r(8,g=e.OLSKCollectionDispatchClick),"OLSKCollectionDispatchArrow"in e&&r(9,C=e.OLSKCollectionDispatchArrow),"OLSKCollectionDispatchStash"in e&&r(15,D=e.OLSKCollectionDispatchStash),"OLSKCatalogDispatchDetailActivate"in e&&r(16,K=e.OLSKCatalogDispatchDetailActivate),"OLSKCatalogDispatchMasterShouldActivate"in e&&r(17,L=e.OLSKCatalogDispatchMasterShouldActivate),"OLSKCatalogDispatchArchivedHide"in e&&r(18,O=e.OLSKCatalogDispatchArchivedHide),"OLSKCatalogDispatchArchivedShow"in e&&r(19,y=e.OLSKCatalogDispatchArchivedShow),"OLSKCatalogDispatchFilterSubmit"in e&&r(20,b=e.OLSKCatalogDispatchFilterSubmit),"OLSKCatalogDispatchQuantity"in e&&r(21,w=e.OLSKCatalogDispatchQuantity),"OLSKCatalogDispatchEscapeOnEmpty"in e&&r(22,v=e.OLSKCatalogDispatchEscapeOnEmpty),"OLSKCatalogDispatchStash"in e&&r(23,V=e.OLSKCatalogDispatchStash),"OLSKCatalogItems"in e&&r(24,T=e.OLSKCatalogItems),"OLSKCatalogDisableEscape"in e&&r(25,E=e.OLSKCatalogDisableEscape),"$$scope"in e&&r(29,n=e.$$scope)},[I,a,s,l,c,h,f,S,g,C,k,i,u,p,d,D,K,L,O,y,b,w,v,V,T,E,o,function(e){A[e?"unshift":"push"](()=>{I._OLSKNarrow=e,r(0,I)})},function(e){A[e?"unshift":"push"](()=>{k._OLSKCatalogDetail=e,r(10,k)})},n]}class Vr extends oe{constructor(e){super(),re(this,e,vr,wr,s,{OLSKCollectionItemAccessibilitySummaryFunction:1,OLSKCollectionItemClass:2,OLSKNarrowFilterFieldPlaceholderText:3,_OLSKCatalogArchiveField:12,OLSKCatalogSortFunction:4,OLSKCatalogIsMatch:13,OLSKCatalogExactSortFunction:14,_OLSKCatalogDispatchKey:5,OLSKCollectionChunkFunction:6,OLSKCollectionChunkKeySortFunction:7,OLSKCollectionDispatchClick:8,OLSKCollectionDispatchArrow:9,OLSKCollectionDispatchStash:15,OLSKCatalogDispatchDetailActivate:16,OLSKCatalogDispatchMasterShouldActivate:17,OLSKCatalogDispatchArchivedHide:18,OLSKCatalogDispatchArchivedShow:19,OLSKCatalogDispatchFilterSubmit:20,OLSKCatalogDispatchQuantity:21,OLSKCatalogDispatchEscapeOnEmpty:22,OLSKCatalogDispatchStash:23,OLSKCatalogItems:24,OLSKCatalogDisableEscape:25,modPublic:0})}get modPublic(){return this.$$.ctx[0]}}function Tr(e){let r;return{c(){r=K("span"),r.textContent=`${Ne.KVCWritePublicSymbol()}`,w(r,"class","KVCWriteListItemIsPublic")},m(e,t){g(e,r,t)},p:t,d(e){e&&C(r)}}}function Er(e){let r,o,n,i,a,s,l,u=we.KVCTemplateTruncated(we.KVCTemplatePlaintextTitle(e[0].KVCNoteBody))+"",c=Ke.OLSKStringSnippet(we.KVCTemplatePlaintextBody(e[0].KVCNoteBody))+"",p=e[0].KVCNoteIsPublic&&Tr();return{c(){r=K("div"),p&&p.c(),o=O(),n=K("strong"),i=L(u),a=O(),s=K("span"),l=L(c),w(n,"class","KVCWriteListItemTitle svelte-1c53kho"),w(s,"class","KVCWriteListItemSnippet svelte-1c53kho"),w(r,"class","KVCWriteListItem svelte-1c53kho"),E(r,"KVCWriteListItemArchived",e[0].KVCNoteIsArchived)},m(e,t){g(e,r,t),p&&p.m(r,null),S(r,o),S(r,n),S(n,i),S(r,a),S(r,s),S(s,l)},p(e,[t]){e[0].KVCNoteIsPublic?p?p.p(e,t):(p=Tr(),p.c(),p.m(r,o)):p&&(p.d(1),p=null),1&t&&u!==(u=we.KVCTemplateTruncated(we.KVCTemplatePlaintextTitle(e[0].KVCNoteBody))+"")&&v(i,u),1&t&&c!==(c=Ke.OLSKStringSnippet(we.KVCTemplatePlaintextBody(e[0].KVCNoteBody))+"")&&v(l,c),1&t&&E(r,"KVCWriteListItemArchived",e[0].KVCNoteIsArchived)},i:t,o:t,d(e){e&&C(r),p&&p.d()}}}function Ir(e,t,r){let{KVCWriteListItemObject:o}=t;return e.$$set=e=>{"KVCWriteListItemObject"in e&&r(0,o=e.KVCWriteListItemObject)},[o]}class kr extends oe{constructor(e){super(),re(this,e,Ir,Er,s,{KVCWriteListItemObject:0})}}var _r='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_KVCWritePublish">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_KVCWritePublish-group2">\n        <path id="_KVCWritePublish-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,10.33 C 1,10.33 3.1,10.57 4.27,11.73 5.43,12.9 5.67,15 5.67,15" />\n        <path id="_KVCWritePublish-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,5.67 C 1,5.67 5.2,6.13 7.53,8.47 9.87,10.8 10.33,15 10.33,15" />\n        <path id="_KVCWritePublish-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,1 C 1,1 7.3,1.7 10.8,5.2 14.3,8.7 15,15 15,15" />\n    </g>\n</svg>\n',xr=se(function(e,t){const r={uStubLineTokensFor(e){let t="#"===e.trim()[0]?"header header-1":"variable-2";return e.split(" ").map(function(e,r){return e.split("").map(function(r,o){return{string:r,type:e.match(/(http|\[\[)/)?`${t} link`:t}})}).reduce(function(e,r){return e.concat(e.length?[{string:" ",type:t}]:[]).concat(r)},[]).map(function(e,t){return Object.assign(e,{start:t,end:t+1})})},KVCWriteInputLineObjectsFor(e){if(!Array.isArray(e))throw new Error("KVCErrorInputNotValid");return Object.values(e.reduce(function(e,t){let r=Object.keys(e).pop()||-1;return e[r]&&e[r].type===t.type||(r+=1,e[r]={start:t.start,type:t.type}),e[r].end=t.end,e[r].string=(e[r].string||"").concat(t.string),e},{}))},KVCWriteInputHeaderTokensFrom(e){if(!Array.isArray(e))throw new Error("KVCErrorInputNotValid");return[].concat.apply([],e.map(function(e,t){let r=e.filter(function(e){return e.type&&e.type.match("header")&&e.string.match(/\w/)});return r.length?r.reduce(function(e,t){return void 0===e.start&&(e.start=t.start),void 0===e.type&&(e.type=t.type),e.string=(e.string||"").concat(t.string),e.end=t.end,e},{line:t}):[]}))}};Object.assign(t,r)});function Rr(e){let r,o,n=xe(),s=!xe(),l=n&&function(e){let t,r,o;return{c(){t=K("textarea"),w(t,"class","KVCWriteInputFieldDebug")},m(n,i){g(n,t,i),V(t,e[0][e[1]]),r||(o=[b(t,"input",e[8]),b(t,"input",function(){a(e[2].InterfaceEditorFieldDebugDidInput)&&e[2].InterfaceEditorFieldDebugDidInput.apply(this,arguments)})],r=!0)},p(r,o){e=r,3&o&&V(t,e[0][e[1]])},d(e){e&&C(t),r=!1,i(o)}}}(e),u=s&&function(e){let r;return{c(){r=K("textarea")},m(t,o){g(t,r,o),e[9](r)},p:t,d(t){t&&C(r),e[9](null)}}}(e);return{c(){r=K("div"),l&&l.c(),o=O(),u&&u.c(),w(r,"class","KVCWriteInput")},m(e,t){g(e,r,t),l&&l.m(r,null),S(r,o),u&&u.m(r,null)},p(e,[t]){n&&l.p(e,t),s&&u.p(e,t)},i:t,o:t,d(e){e&&C(r),l&&l.d(),u&&u.d()}}}function Pr(e,t,r){let{KVCWriteInputItem:o}=t,{KVCWriteInputKey:n}=t,{KVCWriteInputDispatchHeaderTokens:i}=t,{KVCWriteInputDispatchUpdate:a}=t,{KVCWriteInputDispatchOpen:s}=t,{KVCWriteInputDispatchReady:l}=t;const u={_KVCWriteInputTriggerUpdate(){c.ControlConfigureEditor(function(e){e.setValue(o[n])})},KVCWriteInputFocus(){c.ControlConfigureEditor(function(e){e.focus()})},KVCWriteInputSetCursor(e,t){c.ControlConfigureEditor(function(r){r.setCursor(CodeMirror.Pos(e,t))})},KVCWriteInputScrollIntoView(e,t){c.ControlConfigureEditor(function(r){r.scrollIntoView(CodeMirror.Pos(e,t),300)})},KVCWriteInputSetSelection(e,t,r,o){c.ControlConfigureEditor(function(n){n.setSelection(CodeMirror.Pos(e,t),CodeMirror.Pos(r,o))})}},c={_ValueEditorElement:void 0,_ValueEditorInstance:void 0,_ValueEditorPostInitializeQueue:[],InterfaceWindowDidKeydown(e){"Escape"===e.key&&(window.Launchlet.LCHSingletonExists()||c._ValueEditorInstance&&(c._ValueEditorInstance.getDoc().listSelections().length<=1||(c._ValueEditorInstance.setSelections(c._ValueEditorInstance.getDoc().listSelections().slice(0,1)),e.stopPropagation())))},InterfaceEditorDidTouchDown(e,t){t.target.className.match("cm-link")&&(t.preventDefault(),c._ValueEditorInstance.setCursor(CodeMirror.posFromMouse(c._ValueEditorInstance,t)))},InterfaceEditorDidTouchUp(e){e.target.className.match("cm-link")&&c.ControlOpenCursorObject()},InterfaceEditorFieldDebugDidInput(){c.ReactValueInput(this.value)},ControlConfigureEditor(e){if(!xe())return c._ValueEditorInstance?e(c._ValueEditorInstance):void c._ValueEditorPostInitializeQueue.push(e)},ControlOpenCursorObject(){const e=c._ValueEditorInstance.getCursor(),t=xr.KVCWriteInputLineObjectsFor(c._ValueEditorInstance.getLineTokens(e.line)).filter(function(t){return Math.max(t.start,Math.min(t.end,e.ch))>=e.ch}),r=t.shift();r&&r.type&&r.type.match("link")&&c.ControlOpenTextObject(r.string,(t.shift()||{}).string)},ControlOpenTextObject(e,t=""){const r=[e,t.slice(1,-1)].filter(function(e){try{return new URL("",e).hostname}catch(t){return!!e&&!e.match(/[\[\(]/)&&e.match(/^\w+:/)}}).shift();if(r)return window.open(r,"_blank");const o=[(t.match(/^\((.*)\)/)||[]).pop(),(e.match(/\[\[(.*)\]\]/)||[]).pop()].filter(function(e){return!!e}).shift();o&&s(o)},SetupEverything(){c.SetupEditor()},SetupEditor(){if(xe())return c.ReactValueSet(o[n]);r(2,c._ValueEditorInstance=CodeMirror.fromTextArea(c._ValueEditorElement,{mode:{name:"gfm",gitHubSpice:!1,emoji:!1},lineNumbers:!1,lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList","Cmd-Enter":c.ControlOpenCursorObject,"Ctrl-Enter":c.ControlOpenCursorObject,"Cmd-H":e=>e.preventDefault(),Tab:!1},theme:"wkc",keyMap:"sublime"}),c),window.OLSK_DEMO&&!window.OLSKDemoEditor&&(window.OLSKDemoEditor=c._ValueEditorInstance),c._ValueEditorInstance.on("change",function(e,t){if("setValue"===t.origin&&!window.OLSK_DEMO)return c.ReactValueSet(e.getValue());c.ReactValueInput(r(0,o[n]=e.getValue(),o))}),c._ValueEditorPostInitializeQueue.splice(0,c._ValueEditorPostInitializeQueue.length).forEach(function(e){return e(c._ValueEditorInstance)}),c._ValueEditorInstance.setValue(o[n]),c._ValueEditorInstance.on("keydown",function(e,t){if(c.InterfaceWindowDidKeydown(t),!navigator.platform.match(/mac/i))return;if(!navigator.userAgent.match(/^((?!chrome|android).)*safari/i))return;if(!t.altKey||!t.ctrlKey)return;let r=document.querySelectorAll("[accesskey]");if(!r.length)return;let o=[].slice.call(r).filter(function(e){return e.getAttribute("accesskey")===t.key}).shift();o&&(t.preventDefault(),setTimeout(function(){o.focus()}))}),c._ValueEditorInstance.on("mousedown",c.InterfaceEditorDidTouchDown),c._ValueEditorInstance.on("touchstart",c.InterfaceEditorDidTouchDown),document.querySelector(".CodeMirror").addEventListener("mouseup",c.InterfaceEditorDidTouchUp),document.querySelector(".CodeMirror").addEventListener("touchend",c.InterfaceEditorDidTouchUp),l()},ReactValueSet(e){c._ReactValueHeaderTokens(e)},ReactValueInput(e){a(),c._ReactValueHeaderTokens(e)},_ReactValueHeaderTokens(e){i(xr.KVCWriteInputHeaderTokensFrom(e.split("\n").map(function(e,t){return xr.KVCWriteInputLineObjectsFor(xe()?xr.uStubLineTokensFor(e):c._ValueEditorInstance.getLineTokens(t))})))},LifecycleComponentDidMount(){c.SetupEverything()}};let p;return x(c.LifecycleComponentDidMount),e.$$set=e=>{"KVCWriteInputItem"in e&&r(0,o=e.KVCWriteInputItem),"KVCWriteInputKey"in e&&r(1,n=e.KVCWriteInputKey),"KVCWriteInputDispatchHeaderTokens"in e&&r(3,i=e.KVCWriteInputDispatchHeaderTokens),"KVCWriteInputDispatchUpdate"in e&&r(4,a=e.KVCWriteInputDispatchUpdate),"KVCWriteInputDispatchOpen"in e&&r(5,s=e.KVCWriteInputDispatchOpen),"KVCWriteInputDispatchReady"in e&&r(6,l=e.KVCWriteInputDispatchReady)},e.$$.update=()=>{var t;1&e.$$.dirty&&(t=o,c._ValueEditorInstance?p!==t&&(p=t,c._ValueEditorInstance.setValue(o[n]),c._ValueEditorInstance.getDoc().clearHistory()):p=t)},[o,n,c,i,a,s,l,u,function(){o[n]=this.value,r(0,o)},function(e){A[e?"unshift":"push"](()=>{c._ValueEditorElement=e,r(2,c)})}]}class Ar extends oe{constructor(e){super(),re(this,e,Pr,Rr,s,{KVCWriteInputItem:0,KVCWriteInputKey:1,KVCWriteInputDispatchHeaderTokens:3,KVCWriteInputDispatchUpdate:4,KVCWriteInputDispatchOpen:5,KVCWriteInputDispatchReady:6,modPublic:7})}get KVCWriteInputItem(){return this.$$.ctx[0]}set KVCWriteInputItem(e){this.$$set({KVCWriteInputItem:e}),U()}get KVCWriteInputKey(){return this.$$.ctx[1]}set KVCWriteInputKey(e){this.$$set({KVCWriteInputKey:e}),U()}get KVCWriteInputDispatchHeaderTokens(){return this.$$.ctx[3]}set KVCWriteInputDispatchHeaderTokens(e){this.$$set({KVCWriteInputDispatchHeaderTokens:e}),U()}get KVCWriteInputDispatchUpdate(){return this.$$.ctx[4]}set KVCWriteInputDispatchUpdate(e){this.$$set({KVCWriteInputDispatchUpdate:e}),U()}get KVCWriteInputDispatchOpen(){return this.$$.ctx[5]}set KVCWriteInputDispatchOpen(e){this.$$set({KVCWriteInputDispatchOpen:e}),U()}get KVCWriteInputDispatchReady(){return this.$$.ctx[6]}set KVCWriteInputDispatchReady(e){this.$$set({KVCWriteInputDispatchReady:e}),U()}get modPublic(){return this.$$.ctx[7]}}const{window:Fr}=f;function Nr(e){let r,o,n,i,a;return{c(){r=K("button"),o=K("div"),w(o,"class","KVCWriteDetailToolbarConnectButtonImage"),w(r,"class","KVCWriteDetailToolbarConnectButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(r,"title",n=ue("KVCWriteDetailToolbarPublishButtonText"))},m(t,n){g(t,r,n),S(r,o),o.innerHTML=_r,i||(a=b(r,"click",e[22]),i=!0)},p:t,d(e){e&&C(r),i=!1,a()}}}function Wr(e){let r;return{c(){r=K("span"),r.textContent=`${ue("KVCWriteDetailToolbarIsRootPageText")}`,w(r,"class","KVCWriteDetailToolbarIsRootPage")},m(e,t){g(e,r,t)},p:t,d(e){e&&C(r)}}}function Br(e){let t,r,o=!Te.KVCNoteIsMarkedPublic(e[0]),n=Te.KVCNoteIsMarkedPublic(e[0]),i=o&&Mr(e),a=n&&jr(e);return{c(){i&&i.c(),t=O(),a&&a.c(),r=y()},m(e,o){i&&i.m(e,o),g(e,t,o),a&&a.m(e,o),g(e,r,o)},p(e,s){1&s&&(o=!Te.KVCNoteIsMarkedPublic(e[0])),o?i?i.p(e,s):(i=Mr(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),1&s&&(n=Te.KVCNoteIsMarkedPublic(e[0])),n?a?a.p(e,s):(a=jr(e),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){i&&i.d(e),e&&C(t),a&&a.d(e),e&&C(r)}}}function Mr(e){let t,r,o,n,i;return{c(){t=K("button"),r=K("div"),w(r,"class","KVCWriteDetailToolbarPublishButtonImage"),w(t,"class","KVCWriteDetailToolbarPublishButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(t,"title",o=ue("KVCWriteDetailToolbarPublishButtonText"))},m(o,s){g(o,t,s),S(t,r),r.innerHTML=_r,n||(i=b(t,"click",function(){a(e[8])&&e[8].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function jr(e){let t,r,o,n,i,s,l,u,c,p=ue("KVCWriteDetailToolbarPublicLinkText")+"";return{c(){t=K("a"),r=L(p),n=O(),i=K("button"),s=K("div"),w(t,"class","KVCWriteDetailToolbarPublicLink svelte-1089qtq"),w(t,"href",o=e[3](e[0])),w(t,"target","_blank"),w(s,"class","KVCWriteDetailToolbarRetractButtonImage"),w(i,"class","KVCWriteDetailToolbarRetractButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(i,"title",l=ue("KVCWriteDetailToolbarRetractButtonText"))},m(o,l){g(o,t,l),S(t,r),g(o,n,l),g(o,i,l),S(i,s),s.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_KVCWriteRetract">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <g id="_KVCWriteRetract-group2">\n        <path id="_KVCWriteRetract-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,10.33 C 1,10.33 3.1,10.57 4.27,11.73 5.43,12.9 5.67,15 5.67,15" />\n        <path id="_KVCWriteRetract-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,5.67 C 1,5.67 5.2,6.13 7.53,8.47 9.87,10.8 10.33,15 10.33,15" />\n        <path id="_KVCWriteRetract-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,1 C 1,1 7.3,1.7 10.8,5.2 14.3,8.7 15,15 15,15" />\n    </g>\n    <path id="_KVCWriteRetract-bezier4" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,15 L 15,1" />\n</svg>\n',u||(c=b(i,"click",function(){a(e[9])&&e[9].apply(this,arguments)}),u=!0)},p(r,n){e=r,9&n&&o!==(o=e[3](e[0]))&&w(t,"href",o)},d(e){e&&C(t),e&&C(n),e&&C(i),u=!1,c()}}}function Zr(e){let t,r,o,n,i;return{c(){t=K("button"),r=K("div"),w(r,"class","KVCWriteDetailToolbarJumpButtonImage"),w(t,"class","KVCWriteDetailToolbarJumpButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1089qtq"),w(t,"title",o=ue("KVCWriteDetailToolbarJumpButtonText")),w(t,"accesskey","j"),w(t,"tabindex","-1")},m(o,s){g(o,t,s),S(t,r),r.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_KVCWriteJump">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_KVCWriteJump-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 11,1 L 11,15" />\n    <path id="_KVCWriteJump-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,5 L 15,5" />\n    <path id="_KVCWriteJump-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 5,1 L 5,15" />\n    <path id="_KVCWriteJump-bezier4" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,11 L 15,11" />\n</svg>\n',n||(i=b(t,"click",function(){a(e[12].InterfaceJumpButtonDidClick)&&e[12].InterfaceJumpButtonDidClick.apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function Ur(e){let t,r,o,n,i;return{c(){t=K("button"),r=K("div"),w(r,"class","KVCWriteDetailToolbarArchiveButtonImage"),w(t,"class","KVCWriteDetailToolbarArchiveButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1089qtq"),w(t,"title",o=ue("KVCWriteDetailToolbarArchiveButtonText"))},m(o,s){g(o,t,s),S(t,r),r.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_KVCWriteArchive">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_KVCWriteArchive-rectangle" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 2,14 L 14,14 14,5 2,5 2,14 Z M 2,14" />\n    <path id="_KVCWriteArchive-rectangle2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 1,5 L 15,5 15,2 1,2 1,5 Z M 1,5" />\n    <path id="_KVCWriteArchive-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="rgb(255, 255, 255)" d="M 5.38,8.95 L 10.62,8.95" />\n</svg>\n',n||(i=b(t,"click",function(){a(e[5])&&e[5].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function $r(e){let t,r,o,n,i;return{c(){t=K("button"),r=K("div"),w(r,"class","KVCWriteDetailToolbarUnarchiveButtonImage"),w(t,"class","KVCWriteDetailToolbarUnarchiveButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1089qtq"),w(t,"title",o=ue("KVCWriteDetailToolbarUnarchiveButtonText"))},m(o,s){g(o,t,s),S(t,r),r.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_KVCWriteUnarchive">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_KVCWriteUnarchive-rectangle" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 2,14 L 14,14 14,5 2,5 2,14 Z M 2,14" />\n    <path id="_KVCWriteUnarchive-rectangle2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 1,5 L 15,5 15,2 1,2 1,5 Z M 1,5" />\n    <path id="_KVCWriteUnarchive-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="rgb(255, 255, 255)" d="M 5.38,8.95 L 10.62,8.95" />\n    <path id="_KVCWriteUnarchive-bezier4" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,15 L 15,1" />\n</svg>\n',n||(i=b(t,"click",function(){a(e[6])&&e[6].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function Hr(e){let r,o,n;return{c(){r=K("button"),w(r,"class","OLSKAppToolbarLauncherButton")},m(t,i){g(t,r,i),o||(n=b(r,"click",e[25]),o=!0)},p:t,d(e){e&&C(r),o=!1,n()}}}function Gr(e){let t,r,o,n,s,l,u,c,p,d,h,m,f,D,L,v,V,T,E,I,k,_,x,R,P,A,F=e[11]&&xe(),N=!e[2]&&Nr(e),W=e[1]&&Wr(),B=e[2]&&Br(e),M=e[12]._ValueHeaderTokens.length&&Zr(e),j=!e[0].KVCNoteIsArchived&&Ur(e),Z=e[0].KVCNoteIsArchived&&$r(e),U={KVCWriteInputItem:e[0],KVCWriteInputKey:"KVCNoteBody",KVCWriteInputDispatchHeaderTokens:e[12].KVCWriteInputDispatchHeaderTokens,KVCWriteInputDispatchUpdate:e[12].KVCWriteInputDispatchUpdate,KVCWriteInputDispatchOpen:e[12].KVCWriteInputDispatchOpen,KVCWriteInputDispatchReady:e[12].KVCWriteInputDispatchReady};k=new Ar({props:U}),e[24](k);let $=F&&Hr(e);return{c(){t=K("div"),r=K("header"),o=K("div"),n=K("div"),s=K("button"),l=K("div"),c=O(),p=K("div"),N&&N.c(),d=O(),W&&W.c(),h=O(),B&&B.c(),m=O(),f=K("div"),M&&M.c(),D=O(),j&&j.c(),L=O(),Z&&Z.c(),v=O(),V=K("button"),T=K("div"),I=O(),Q(k.$$.fragment),_=O(),$&&$.c(),x=y(),w(l,"class","KVCWriteDetailToolbarBackButtonImage"),w(s,"class","KVCWriteDetailToolbarBackButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton OLSKVisibilityMobile"),w(s,"title",u=ue("KVCWriteDetailToolbarBackButtonText")),w(n,"class","OLSKToolbarElementGroup"),w(p,"class","OLSKToolbarElementGroup"),w(T,"class","KVCWriteDetailToolbarDiscardButtonImage"),w(V,"class","KVCWriteDetailToolbarDiscardButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(V,"title",E=ue("KVCWriteDetailToolbarDiscardButtonText")),w(f,"class","OLSKToolbarElementGroup"),w(o,"class","KVCWriteDetailToolbar OLSKToolbar OLSKToolbarJustify OLSKCommonEdgeBottom svelte-1089qtq"),w(r,"class","KVCWriteDetailHeader OLSKMobileViewHeader svelte-1089qtq"),w(t,"class","KVCWriteDetail svelte-1089qtq")},m(i,u){g(i,t,u),S(t,r),S(r,o),S(o,n),S(n,s),S(s,l),l.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedBack">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedBack-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" fill="none" d="M 11,1 L 4,8 11,15" />\n</svg>\n',S(o,c),S(o,p),N&&N.m(p,null),S(p,d),W&&W.m(p,null),S(p,h),B&&B.m(p,null),S(o,m),S(o,f),M&&M.m(f,null),S(f,D),j&&j.m(f,null),S(f,L),Z&&Z.m(f,null),S(f,v),S(f,V),S(V,T),T.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"  xml:space="preserve" id="_OLSKSharedDiscard">\n    \x3c!-- Generated by PaintCode (www.paintcodeapp.com) --\x3e\n    <path id="_OLSKSharedDiscard-rectangle" stroke="rgb(0, 0, 0)" stroke-width="1.3" fill="none" d="M 4.53,6 L 13,6 13,13.47 C 13,13.91 13,14.13 12.93,14.33 L 12.93,14.37 C 12.83,14.63 12.63,14.83 12.37,14.93 12.13,15 11.91,15 11.47,15 L 4.53,15 C 4.09,15 3.87,15 3.67,14.93 L 3.63,14.93 C 3.37,14.83 3.17,14.63 3.07,14.37 3,14.13 3,13.91 3,13.47 L 3,6 Z M 4.53,6" />\n    <path id="_OLSKSharedDiscard-bezier" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-linecap="round" stroke-miterlimit="10" fill="none" d="M 1,3.5 L 15,3.5" />\n    <path id="_OLSKSharedDiscard-rectangle2" stroke="rgb(0, 0, 0)" stroke-width="1.3" fill="none" d="M 8,1 L 8,1 C 9.75,1 9.75,1 9.75,1 L 9.75,1 C 10.44,1 11,1.56 11,2.25 11,2.25 11,2.25 11,2.25 11,2.25 11,2.25 11,2.25 L 11,2.25 C 11,2.25 11,2.25 11,2.25 L 11,3.5 5,3.5 5,2.25 C 5,1.56 5.56,1 6.25,1 6.25,1 6.25,1 6.25,1 L 8,1 Z M 8,1" />\n    <path id="_OLSKSharedDiscard-bezier2" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-miterlimit="10" fill="none" d="M 5.5,5.5 L 5.5,15" />\n    <path id="_OLSKSharedDiscard-bezier3" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-miterlimit="10" fill="none" d="M 8,6 L 8,15" />\n    <path id="_OLSKSharedDiscard-bezier4" stroke="rgb(0, 0, 0)" stroke-width="1.3" stroke-miterlimit="10" fill="none" d="M 10.5,5.5 L 10.5,15" />\n</svg>\n',S(t,I),X(k,t,null),g(i,_,u),$&&$.m(i,u),g(i,x,u),R=!0,P||(A=[b(Fr,"keydown",function(){a(e[12].InterfaceWindowDidKeydown)&&e[12].InterfaceWindowDidKeydown.apply(this,arguments)}),b(s,"click",function(){a(e[4])&&e[4].apply(this,arguments)}),b(V,"click",e[23])],P=!0)},p(t,[r]){(e=t)[2]?N&&(N.d(1),N=null):N?N.p(e,r):(N=Nr(e),N.c(),N.m(p,d)),e[1]?W?W.p(e,r):(W=Wr(),W.c(),W.m(p,h)):W&&(W.d(1),W=null),e[2]?B?B.p(e,r):(B=Br(e),B.c(),B.m(p,null)):B&&(B.d(1),B=null),e[12]._ValueHeaderTokens.length?M?M.p(e,r):(M=Zr(e),M.c(),M.m(f,D)):M&&(M.d(1),M=null),e[0].KVCNoteIsArchived?j&&(j.d(1),j=null):j?j.p(e,r):(j=Ur(e),j.c(),j.m(f,L)),e[0].KVCNoteIsArchived?Z?Z.p(e,r):(Z=$r(e),Z.c(),Z.m(f,v)):Z&&(Z.d(1),Z=null);const o={};1&r&&(o.KVCWriteInputItem=e[0]),4096&r&&(o.KVCWriteInputDispatchHeaderTokens=e[12].KVCWriteInputDispatchHeaderTokens),4096&r&&(o.KVCWriteInputDispatchUpdate=e[12].KVCWriteInputDispatchUpdate),4096&r&&(o.KVCWriteInputDispatchOpen=e[12].KVCWriteInputDispatchOpen),4096&r&&(o.KVCWriteInputDispatchReady=e[12].KVCWriteInputDispatchReady),k.$set(o),2048&r&&(F=e[11]&&xe()),F?$?$.p(e,r):($=Hr(e),$.c(),$.m(x.parentNode,x)):$&&($.d(1),$=null)},i(e){R||(J(k.$$.fragment,e),R=!0)},o(e){Y(k.$$.fragment,e),R=!1},d(r){r&&C(t),N&&N.d(),W&&W.d(),B&&B.d(),M&&M.d(),j&&j.d(),Z&&Z.d(),e[24](null),ee(k),r&&C(_),$&&$.d(r),r&&C(x),P=!1,i(A)}}}function zr(e,t,r){let{KVCWriteDetailItem:o}=t,{KVCWriteDetailItemIsRootPage:n=!1}=t,{KVCWriteDetailConnected:i=!1}=t,{KVCWriteDetailPublicURLFor:a}=t,{KVCWriteDetailDispatchBack:s}=t,{KVCWriteDetailDispatchJump:l}=t,{KVCWriteDetailDispatchArchive:u}=t,{KVCWriteDetailDispatchUnarchive:c}=t,{KVCWriteDetailDispatchConnect:p}=t,{KVCWriteDetailDispatchPublish:d}=t,{KVCWriteDetailDispatchRetract:h}=t,{KVCWriteDetailDispatchVersions:m}=t,{KVCWriteDetailDispatchClone:f}=t,{KVCWriteDetailDispatchExport:S}=t,{KVCWriteDetailDispatchDebug:g}=t,{KVCWriteDetailDispatchDiscard:C}=t,{KVCWriteDetailDispatchUpdate:D}=t,{KVCWriteDetailDispatchSetAsRootPage:K}=t,{KVCWriteDetailDispatchOpen:L}=t,{_DebugLauncher:O=!1}=t;const y={KVCWriteDetailSetItem(e){e&&b.ControlConfigureEditor(function(e){xe()||document.body.scrollIntoView(!0)})},_KVCWriteDetailTriggerUpdate(){b.ControlConfigureEditor(function(e){e.modPublic._KVCWriteInputTriggerUpdate()})},KVCWriteDetailEditorFocus(){b.ControlConfigureEditor(function(e){e.modPublic.KVCWriteInputFocus()})},KVCWriteDetailSetCursor(e,t){b.ControlConfigureEditor(function(r){r.modPublic.KVCWriteInputSetCursor(e,t)})},KVCWriteDetailRecipes:()=>b.DataWriteDetailRecipes()},b={_ValueHeaderTokens:[],_ValueEditorPostInitializeQueue:[],KVCWriteInputInstance:void 0,DataWriteDetailRecipes(){const e=[{LCHRecipeSignature:"KVCWriteDetailLauncherItemShowLocalVersions",LCHRecipeName:ue("KVCWriteDetailLauncherItemShowLocalVersionsText"),LCHRecipeCallback:function(){m()}},{LCHRecipeSignature:"KVCWriteDetailLauncherItemClone",LCHRecipeName:ue("KVCWriteDetailLauncherItemCloneText"),LCHRecipeCallback:function(){f()}},{LCHRecipeSignature:"KVCWriteDetailLauncherItemExport",LCHRecipeName:ue("KVCWriteDetailLauncherItemExportText"),LCHRecipeCallback:function(){S()}}];return o.KVCNoteIsArchived||e.push({LCHRecipeSignature:"KVCWriteDetailLauncherItemArchive",LCHRecipeName:ue("KVCWriteDetailToolbarArchiveButtonText"),LCHRecipeCallback:function(){u()}}),o.KVCNoteIsArchived&&e.push({LCHRecipeSignature:"KVCWriteDetailLauncherItemUnarchive",LCHRecipeName:ue("KVCWriteDetailToolbarUnarchiveButtonText"),LCHRecipeCallback:function(){c()}}),i&&e.push({LCHRecipeSignature:"KVCWriteDetailLauncherItemPublish",LCHRecipeName:ue("KVCWriteDetailToolbarPublishButtonText"),LCHRecipeCallback:function(){d()},LCHRecipeIsExcluded:()=>Te.KVCNoteIsMarkedPublic(o)},{LCHRecipeSignature:"KVCWriteDetailLauncherItemOpenPublicLink",LCHRecipeName:ue("KVCWriteDetailLauncherItemOpenPublicLinkText"),LCHRecipeCallback:function(){window.open(a(o))},LCHRecipeIsExcluded:()=>!Te.KVCNoteIsMarkedPublic(o)},{LCHRecipeSignature:"KVCWriteDetailLauncherItemSetAsRootPage",LCHRecipeName:ue("KVCWriteDetailLauncherItemSetAsRootPageText"),LCHRecipeCallback:function(){K(o.KVCNoteID)},LCHRecipeIsExcluded:()=>!Te.KVCNoteIsMarkedPublic(o)||n},{LCHRecipeSignature:"KVCWriteDetailLauncherItemRetract",LCHRecipeName:ue("KVCWriteDetailToolbarRetractButtonText"),LCHRecipeCallback:function(){h()},LCHRecipeIsExcluded:()=>!Te.KVCNoteIsMarkedPublic(o)},{LCHRecipeSignature:"KVCWriteDetailLauncherItemDebug",LCHRecipeName:ue("KVCWriteDetailLauncherItemDebugText"),LCHRecipeCallback:function(){g()}}),xe()&&e.push({LCHRecipeName:"KVCWriteDetailLauncherFakeItemProxy",LCHRecipeCallback:function(){}}),e},InterfaceJumpButtonDidClick(){b.ControlJump()},InterfaceWindowDidKeydown(e){if(b._ValueHeaderTokens.length)return e.ctrlKey&&"j"===e.key?b.ControlJump():void 0},ControlConfigureEditor(e){if(b.KVCWriteInputInstance)return e(b.KVCWriteInputInstance);b._ValueEditorPostInitializeQueue.push(e)},ControlJump(){l(b._ValueHeaderTokens.map(function(e){return{LCHRecipeName:e.string,LCHRecipeCallback(){b.KVCWriteInputInstance.modPublic.KVCWriteInputScrollIntoView(e.line,e.start),b.KVCWriteInputInstance.modPublic.KVCWriteInputSetSelection(e.line,e.start,e.line,e.end)}}}))},KVCWriteInputDispatchHeaderTokens(e){r(12,b._ValueHeaderTokens=e,b)},KVCWriteInputDispatchUpdate(){D()},KVCWriteInputDispatchOpen(e){L(e)},KVCWriteInputDispatchReady(){b._ValueEditorPostInitializeQueue.splice(0,b._ValueEditorPostInitializeQueue.length).forEach(function(e){return e(b.KVCWriteInputInstance)})}};return e.$$set=e=>{"KVCWriteDetailItem"in e&&r(0,o=e.KVCWriteDetailItem),"KVCWriteDetailItemIsRootPage"in e&&r(1,n=e.KVCWriteDetailItemIsRootPage),"KVCWriteDetailConnected"in e&&r(2,i=e.KVCWriteDetailConnected),"KVCWriteDetailPublicURLFor"in e&&r(3,a=e.KVCWriteDetailPublicURLFor),"KVCWriteDetailDispatchBack"in e&&r(4,s=e.KVCWriteDetailDispatchBack),"KVCWriteDetailDispatchJump"in e&&r(13,l=e.KVCWriteDetailDispatchJump),"KVCWriteDetailDispatchArchive"in e&&r(5,u=e.KVCWriteDetailDispatchArchive),"KVCWriteDetailDispatchUnarchive"in e&&r(6,c=e.KVCWriteDetailDispatchUnarchive),"KVCWriteDetailDispatchConnect"in e&&r(7,p=e.KVCWriteDetailDispatchConnect),"KVCWriteDetailDispatchPublish"in e&&r(8,d=e.KVCWriteDetailDispatchPublish),"KVCWriteDetailDispatchRetract"in e&&r(9,h=e.KVCWriteDetailDispatchRetract),"KVCWriteDetailDispatchVersions"in e&&r(14,m=e.KVCWriteDetailDispatchVersions),"KVCWriteDetailDispatchClone"in e&&r(15,f=e.KVCWriteDetailDispatchClone),"KVCWriteDetailDispatchExport"in e&&r(16,S=e.KVCWriteDetailDispatchExport),"KVCWriteDetailDispatchDebug"in e&&r(17,g=e.KVCWriteDetailDispatchDebug),"KVCWriteDetailDispatchDiscard"in e&&r(10,C=e.KVCWriteDetailDispatchDiscard),"KVCWriteDetailDispatchUpdate"in e&&r(18,D=e.KVCWriteDetailDispatchUpdate),"KVCWriteDetailDispatchSetAsRootPage"in e&&r(19,K=e.KVCWriteDetailDispatchSetAsRootPage),"KVCWriteDetailDispatchOpen"in e&&r(20,L=e.KVCWriteDetailDispatchOpen),"_DebugLauncher"in e&&r(11,O=e._DebugLauncher)},[o,n,i,a,s,u,c,p,d,h,C,O,b,l,m,f,S,g,D,K,L,y,()=>window.confirm(ue("OLSKRemoteStorageConnectConfirmText"))&&p(),()=>window.confirm(ue("OLSKWordingConfirmText"))&&C(),function(e){A[e?"unshift":"push"](()=>{b.KVCWriteInputInstance=e,r(12,b)})},()=>window.Launchlet.LCHSingletonCreate({LCHOptionRecipes:b.DataWriteDetailRecipes()})]}class qr extends oe{constructor(e){super(),re(this,e,zr,Gr,s,{KVCWriteDetailItem:0,KVCWriteDetailItemIsRootPage:1,KVCWriteDetailConnected:2,KVCWriteDetailPublicURLFor:3,KVCWriteDetailDispatchBack:4,KVCWriteDetailDispatchJump:13,KVCWriteDetailDispatchArchive:5,KVCWriteDetailDispatchUnarchive:6,KVCWriteDetailDispatchConnect:7,KVCWriteDetailDispatchPublish:8,KVCWriteDetailDispatchRetract:9,KVCWriteDetailDispatchVersions:14,KVCWriteDetailDispatchClone:15,KVCWriteDetailDispatchExport:16,KVCWriteDetailDispatchDebug:17,KVCWriteDetailDispatchDiscard:10,KVCWriteDetailDispatchUpdate:18,KVCWriteDetailDispatchSetAsRootPage:19,KVCWriteDetailDispatchOpen:20,_DebugLauncher:11,modPublic:21})}get modPublic(){return this.$$.ctx[21]}}function Jr(e){let r,o,n,a,s,l,u,c,p;return{c(){r=K("div"),o=K("p"),n=K("textarea"),s=O(),l=K("p"),u=K("button"),u.textContent=`${ue("KVCWriteTemplateUpdateButtonText")}`,w(n,"class","KVCWriteTemplateDataField"),w(n,"placeholder",a=ue("KVCWriteTemplateDataFieldText")),w(u,"class","KVCWriteTemplateUpdateButton"),w(r,"class","KVCWriteTemplate OLSKDecor OLSKDecorBigForm")},m(t,i){g(t,r,i),S(r,o),S(o,n),V(n,e[0]),S(r,s),S(r,l),S(l,u),c||(p=[b(n,"input",e[3]),b(u,"click",e[1].InterfaceUpdateButtonDidClick)],c=!0)},p(e,[t]){1&t&&V(n,e[0])},i:t,o:t,d(e){e&&C(r),c=!1,i(p)}}}function Yr(e,t,r){let{KVCWriteTemplateData:o}=t,{KVCWriteTemplateDispatchUpdate:n}=t;const i={InterfaceUpdateButtonDidClick(){n(o)}};return e.$$set=e=>{"KVCWriteTemplateData"in e&&r(0,o=e.KVCWriteTemplateData),"KVCWriteTemplateDispatchUpdate"in e&&r(2,n=e.KVCWriteTemplateDispatchUpdate)},[o,i,n,function(){o=this.value,r(0,o)}]}class Qr extends oe{constructor(e){super(),re(this,e,Yr,Jr,s,{KVCWriteTemplateData:0,KVCWriteTemplateDispatchUpdate:2})}}function Xr(e){let r,o,n,i,a;return{c(){r=K("button"),o=K("div"),w(o,"class","OLSKReloadButtonImage"),w(r,"class","OLSKReloadButton OLSKToolbarButton OLSKDecorTappable OLSKDecorButtonNoStyle"),w(r,"title",n=ue("OLSKReloadButtonText"))},m(t,n){g(t,r,n),S(r,o),o.innerHTML=rt,i||(a=b(r,"click",e[0]),i=!0)},p:t,i:t,o:t,d(e){e&&C(r),i=!1,a()}}}function eo(e){return[()=>window.location.reload()]}class to extends oe{constructor(e){super(),re(this,e,eo,Xr,s,{})}}function ro(e){let r,o;return r=new to({}),{c(){Q(r.$$.fragment)},m(e,t){X(r,e,t),o=!0},p:t,i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(e){ee(r,e)}}}function oo(e){let r,o,n,i,s,l=ot+"";return{c(){r=K("button"),o=K("div"),w(o,"class","OLSKAppToolbarAproposButtonImage svelte-1i8pgw"),w(r,"class","OLSKAppToolbarAproposButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1i8pgw"),w(r,"title",n=ue("OLSKAppToolbarAproposButtonText"))},m(t,n){g(t,r,n),S(r,o),o.innerHTML=l,i||(s=b(r,"click",function(){a(e[8])&&e[8].apply(this,arguments)}),i=!0)},p(t,r){e=t},i:t,o:t,d(e){e&&C(r),i=!1,s()}}}function no(e){let t,r,o,n,i,s=pt+"";return{c(){t=K("button"),r=K("div"),w(r,"class","OLSKAppToolbarLanguageButtonImage svelte-1i8pgw"),w(t,"class","OLSKAppToolbarLanguageButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1i8pgw"),w(t,"title",o=ue("OLSKAppToolbarLanguageButtonText"))},m(o,l){g(o,t,l),S(t,r),r.innerHTML=s,n||(i=b(t,"click",function(){a(e[9])&&e[9].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function io(e){let t,r,o=ue("OLSKAppToolbarGuideLinkText")+"";return{c(){t=K("a"),r=L(o),w(t,"class","OLSKAppToolbarGuideLink svelte-1i8pgw"),w(t,"href",e[0]),w(t,"target","_blank"),w(t,"rel","noreferrer")},m(e,o){g(e,t,o),S(t,r)},p(e,r){1&r&&w(t,"href",e[0])},d(e){e&&C(t)}}}function ao(e){let t,r,o,n,i,s=""!==e[2]&&so(e);return{c(){t=K("button"),t.textContent=`${ue("OLSKAppToolbarFundButtonText")}`,r=O(),s&&s.c(),o=y(),w(t,"class","OLSKAppToolbarFundButton OLSKDecorPress svelte-1i8pgw")},m(l,u){g(l,t,u),g(l,r,u),s&&s.m(l,u),g(l,o,u),n||(i=b(t,"click",function(){a(e[10])&&e[10].apply(this,arguments)}),n=!0)},p(t,r){""!==(e=t)[2]?s?s.p(e,r):(s=so(e),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&C(t),e&&C(r),s&&s.d(e),e&&C(o),n=!1,i()}}}function so(e){let t,r,o=e[2].toString()+"";return{c(){t=K("button"),r=L(o),w(t,"class","OLSKAppToolbarFundLimit OLSKDecorButtonNoStyle svelte-1i8pgw"),t.disabled=!0},m(e,o){g(e,t,o),S(t,r)},p(e,t){4&t&&o!==(o=e[2].toString()+"")&&v(r,o)},d(e){e&&C(t)}}}function lo(e){let t;return{c(){t=K("div"),t.textContent="…",w(t,"class","OLSKAppToolbarFundProgress svelte-1i8pgw")},m(e,r){g(e,t,r)},d(e){e&&C(t)}}}function uo(e){let t,r,o,n,i,s=""!==e[3]&&co(e);return{c(){t=K("button"),t.textContent=`${ue("OLSKAppToolbarClubButtonText")}`,r=O(),s&&s.c(),o=y(),w(t,"class","OLSKAppToolbarClubButton OLSKDecorPress svelte-1i8pgw")},m(l,u){g(l,t,u),g(l,r,u),s&&s.m(l,u),g(l,o,u),n||(i=b(t,"click",function(){a(e[11])&&e[11].apply(this,arguments)}),n=!0)},p(t,r){""!==(e=t)[3]?s?s.p(e,r):(s=co(e),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&C(t),e&&C(r),s&&s.d(e),e&&C(o),n=!1,i()}}}function co(e){let t,r,o=e[3].toString()+"";return{c(){t=K("button"),r=L(o),w(t,"class","OLSKAppToolbarClubLimit OLSKDecorButtonNoStyle svelte-1i8pgw"),t.disabled=!0},m(e,o){g(e,t,o),S(t,r)},p(e,t){8&t&&o!==(o=e[3].toString()+"")&&v(r,o)},d(e){e&&C(t)}}}function po(e){let t,r;return{c(){t=K("div"),r=L(e[4]),w(t,"class","OLSKAppToolbarError OLSKDecorBlink svelte-1i8pgw")},m(e,o){g(e,t,o),S(t,r)},p(e,t){16&t&&v(r,e[4])},d(e){e&&C(t)}}}function ho(e){let t,r,o,n,i,s,l,u,c=(e[5]?e[7]?ue("OLSKAppToolbarCloudStatusError"):e[6]?ue("OLSKAppToolbarCloudStatusOffline"):ue("OLSKAppToolbarCloudStatusOnline"):"")+"",p=(e[7]?it:e[6]?at:nt)+"";return{c(){t=K("div"),r=L(c),o=O(),n=K("button"),i=K("div"),w(t,"class","OLSKAppToolbarCloudStatus svelte-1i8pgw"),w(i,"class","OLSKAppToolbarCloudButtonImage svelte-1i8pgw"),w(n,"class","OLSKAppToolbarCloudButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1i8pgw"),w(n,"title",s=ue("OLSKAppToolbarCloudButtonText"))},m(s,c){g(s,t,c),S(t,r),g(s,o,c),g(s,n,c),S(n,i),i.innerHTML=p,l||(u=b(n,"click",function(){a(e[12])&&e[12].apply(this,arguments)}),l=!0)},p(t,o){e=t,224&o&&c!==(c=(e[5]?e[7]?ue("OLSKAppToolbarCloudStatusError"):e[6]?ue("OLSKAppToolbarCloudStatusOffline"):ue("OLSKAppToolbarCloudStatusOnline"):"")+"")&&v(r,c),192&o&&p!==(p=(e[7]?it:e[6]?at:nt)+"")&&(i.innerHTML=p)},d(e){e&&C(t),e&&C(o),e&&C(n),l=!1,u()}}}function mo(e){let t,r,o,n,i,s=dt+"";return{c(){t=K("button"),r=K("div"),w(r,"class","OLSKAppToolbarLauncherButtonImage svelte-1i8pgw"),w(t,"class","OLSKAppToolbarLauncherButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton svelte-1i8pgw"),w(t,"title",o=ue("OLSKAppToolbarLauncherButtonText"))},m(o,l){g(o,t,l),S(t,r),r.innerHTML=s,n||(i=b(t,"click",function(){a(e[13])&&e[13].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function fo(e){let t,r,o,n,i,a,s,u,h,m,f,D,L,y,v,V,T,E,I;const k=[oo,ro],_=[];function x(e,t){return e[8]?0:1}o=x(e),n=_[o]=k[o](e);let R=e[9]&&no(e),P=e[0]&&io(e),A=e[10]&&!e[1]&&ao(e),F=e[1]&&lo(),N=e[11]&&uo(e);const W=e[16].default,B=l(W,e,e[15],null);let M=e[4]&&po(e),j=e[12]&&ho(e),Z=e[13]&&mo(e);return{c(){t=K("div"),r=K("div"),n.c(),i=O(),R&&R.c(),a=O(),P&&P.c(),s=O(),u=K("div"),h=K("div"),A&&A.c(),m=O(),F&&F.c(),f=O(),N&&N.c(),D=O(),B&&B.c(),L=O(),y=K("div"),M&&M.c(),v=O(),j&&j.c(),V=O(),Z&&Z.c(),w(r,"class","OLSKToolbarElementGroup svelte-1i8pgw"),w(h,"class","OLSKAppToolbarFund svelte-1i8pgw"),w(u,"class","OLSKToolbarElementGroup svelte-1i8pgw"),w(y,"class","OLSKToolbarElementGroup svelte-1i8pgw"),w(t,"class","OLSKAppToolbar OLSKToolbar OLSKToolbarJustify OLSKCommonEdgeTop svelte-1i8pgw")},m(n,l){g(n,t,l),S(t,r),_[o].m(r,null),S(r,i),R&&R.m(r,null),S(r,a),P&&P.m(r,null),S(t,s),S(t,u),S(u,h),A&&A.m(h,null),S(h,m),F&&F.m(h,null),S(u,f),N&&N.m(u,null),S(u,D),B&&B.m(u,null),S(t,L),S(t,y),M&&M.m(y,null),S(y,v),j&&j.m(y,null),S(y,V),Z&&Z.m(y,null),T=!0,E||(I=b(window,"keydown",e[14].InterfaceWindowDidKeydown),E=!0)},p(e,[t]){let s=o;o=x(e),o===s?_[o].p(e,t):(z(),Y(_[s],1,1,()=>{_[s]=null}),q(),n=_[o],n?n.p(e,t):(n=_[o]=k[o](e),n.c()),J(n,1),n.m(r,i)),e[9]?R?R.p(e,t):(R=no(e),R.c(),R.m(r,a)):R&&(R.d(1),R=null),e[0]?P?P.p(e,t):(P=io(e),P.c(),P.m(r,null)):P&&(P.d(1),P=null),e[10]&&!e[1]?A?A.p(e,t):(A=ao(e),A.c(),A.m(h,m)):A&&(A.d(1),A=null),e[1]?F||(F=lo(),F.c(),F.m(h,null)):F&&(F.d(1),F=null),e[11]?N?N.p(e,t):(N=uo(e),N.c(),N.m(u,D)):N&&(N.d(1),N=null),B&&B.p&&(!T||32768&t)&&p(B,W,e,e[15],T?c(W,e[15],t,null):d(e[15]),null),e[4]?M?M.p(e,t):(M=po(e),M.c(),M.m(y,v)):M&&(M.d(1),M=null),e[12]?j?j.p(e,t):(j=ho(e),j.c(),j.m(y,V)):j&&(j.d(1),j=null),e[13]?Z?Z.p(e,t):(Z=mo(e),Z.c(),Z.m(y,null)):Z&&(Z.d(1),Z=null)},i(e){T||(J(n),J(B,e),T=!0)},o(e){Y(n),Y(B,e),T=!1},d(e){e&&C(t),_[o].d(),R&&R.d(),P&&P.d(),A&&A.d(),F&&F.d(),N&&N.d(),B&&B.d(e),M&&M.d(),j&&j.d(),Z&&Z.d(),E=!1,I()}}}function So(e,t,r){let{$$slots:o={},$$scope:n}=t,{OLSKAppToolbarGuideURL:i=""}=t,{OLSKAppToolbarFundShowProgress:a=!1}=t,{OLSKAppToolbarFundLimitText:s=""}=t,{OLSKAppToolbarClubLimitText:l=""}=t,{OLSKAppToolbarErrorText:u=""}=t,{OLSKAppToolbarCloudConnected:c=!1}=t,{OLSKAppToolbarCloudOffline:p=!1}=t,{OLSKAppToolbarCloudError:d=!1}=t,{OLSKAppToolbarDispatchApropos:h=null}=t,{OLSKAppToolbarDispatchTongue:m=null}=t,{OLSKAppToolbarDispatchFund:f=null}=t,{OLSKAppToolbarDispatchClub:S=null}=t,{OLSKAppToolbarDispatchCloud:g=null}=t,{OLSKAppToolbarDispatchLauncher:C=null}=t;const D={InterfaceWindowDidKeydown(e){const t={Space(){if(e.altKey)return C(),e.preventDefault()}};t[e.code]&&t[e.code]()}};return e.$$set=e=>{"OLSKAppToolbarGuideURL"in e&&r(0,i=e.OLSKAppToolbarGuideURL),"OLSKAppToolbarFundShowProgress"in e&&r(1,a=e.OLSKAppToolbarFundShowProgress),"OLSKAppToolbarFundLimitText"in e&&r(2,s=e.OLSKAppToolbarFundLimitText),"OLSKAppToolbarClubLimitText"in e&&r(3,l=e.OLSKAppToolbarClubLimitText),"OLSKAppToolbarErrorText"in e&&r(4,u=e.OLSKAppToolbarErrorText),"OLSKAppToolbarCloudConnected"in e&&r(5,c=e.OLSKAppToolbarCloudConnected),"OLSKAppToolbarCloudOffline"in e&&r(6,p=e.OLSKAppToolbarCloudOffline),"OLSKAppToolbarCloudError"in e&&r(7,d=e.OLSKAppToolbarCloudError),"OLSKAppToolbarDispatchApropos"in e&&r(8,h=e.OLSKAppToolbarDispatchApropos),"OLSKAppToolbarDispatchTongue"in e&&r(9,m=e.OLSKAppToolbarDispatchTongue),"OLSKAppToolbarDispatchFund"in e&&r(10,f=e.OLSKAppToolbarDispatchFund),"OLSKAppToolbarDispatchClub"in e&&r(11,S=e.OLSKAppToolbarDispatchClub),"OLSKAppToolbarDispatchCloud"in e&&r(12,g=e.OLSKAppToolbarDispatchCloud),"OLSKAppToolbarDispatchLauncher"in e&&r(13,C=e.OLSKAppToolbarDispatchLauncher),"$$scope"in e&&r(15,n=e.$$scope)},[i,a,s,l,u,c,p,d,h,m,f,S,g,C,D,n,o]}class go extends oe{constructor(e){super(),re(this,e,So,fo,s,{OLSKAppToolbarGuideURL:0,OLSKAppToolbarFundShowProgress:1,OLSKAppToolbarFundLimitText:2,OLSKAppToolbarClubLimitText:3,OLSKAppToolbarErrorText:4,OLSKAppToolbarCloudConnected:5,OLSKAppToolbarCloudOffline:6,OLSKAppToolbarCloudError:7,OLSKAppToolbarDispatchApropos:8,OLSKAppToolbarDispatchTongue:9,OLSKAppToolbarDispatchFund:10,OLSKAppToolbarDispatchClub:11,OLSKAppToolbarDispatchCloud:12,OLSKAppToolbarDispatchLauncher:13})}}function Co(e){let t,r,o,n,s,l;return{c(){t=K("div"),r=K("span"),r.textContent=`${ue("OLSKServiceWorkerUpdateAlertLabelText")}`,o=O(),n=K("button"),n.textContent=`${ue("OLSKServiceWorkerUpdateAlertReloadButtonText")}`,w(r,"class","OLSKServiceWorkerUpdateAlertLabel svelte-o3rgu5"),w(n,"class","OLSKServiceWorkerUpdateAlertReloadButton OLSKDecorPress OLSKDecorPressCall svelte-o3rgu5"),w(t,"class","OLSKServiceWorkerUpdateAlert svelte-o3rgu5")},m(i,u){g(i,t,u),S(t,r),S(t,o),S(t,n),s||(l=[b(n,"click",function(){a(e[0].InterfaceReloadButtonDidClick)&&e[0].InterfaceReloadButtonDidClick.apply(this,arguments)}),b(t,"click",e[5])],s=!0)},p(t,r){e=t},d(e){e&&C(t),s=!1,i(l)}}}function Do(e){let r,o=e[0]._ValueUpdateAlertIsVisible&&Co(e);return{c(){o&&o.c(),r=y()},m(e,t){o&&o.m(e,t),g(e,r,t)},p(e,[t]){e[0]._ValueUpdateAlertIsVisible?o?o.p(e,t):(o=Co(e),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:t,o:t,d(e){o&&o.d(e),e&&C(r)}}}function Ko(e,t,r){let{OLSKServiceWorkerRegistrationRoute:o}=t,{DebugFakeUpdateAlertVisible:n=!1}=t,{DebugEnableLogging:i=!0}=t,{DebugAllowLocalhost:a=!1}=t;const s={_ValueRegistration:void 0,_ValueNextWorker:void 0,_ValueUpdateAlertIsVisible:n,InterfaceReloadButtonDidClick(){s.ControlSkipWaiting()},ControlSkipWaiting(){s._ValueNextWorker.postMessage("OLSKServiceWorker_SkipWaiting")},MessageUpdateFound(e){i&&console.log("updatefound",e),r(0,s._ValueNextWorker=s._ValueRegistration.installing,s),s._ValueNextWorker.addEventListener("statechange",s.MessageNextWorkerStateChange)},MessageNextWorkerStateChange(e){i&&console.log("statechange",s._ValueNextWorker.state,e,navigator.serviceWorker.controller),"installed"===s._ValueNextWorker.state&&navigator.serviceWorker.controller&&r(0,s._ValueUpdateAlertIsVisible=!0,s)},MessageControllerChange(e){i&&console.log("controllerchange",e),window.location.reload()},SetupEverything:async()=>navigator.serviceWorker?o?"localhost"!==document.location.hostname||a?(await s.SetupRegistration(),void s.SetupControllerChange()):i&&console.info("OLSKServiceWorker: Skipping on localhost"):i&&console.info("Missing registration route"):i&&console.info("Service worker not available"),async SetupRegistration(){r(0,s._ValueRegistration=await navigator.serviceWorker.register(o),s),i&&console.info("Service Worker Registered"),s._ValueRegistration.addEventListener("updatefound",s.MessageUpdateFound)},SetupControllerChange(){navigator.serviceWorker.addEventListener("controllerchange",s.MessageControllerChange)},LifecycleModuleDidMount(){s.SetupEverything()}};s.LifecycleModuleDidMount();return e.$$set=e=>{"OLSKServiceWorkerRegistrationRoute"in e&&r(1,o=e.OLSKServiceWorkerRegistrationRoute),"DebugFakeUpdateAlertVisible"in e&&r(2,n=e.DebugFakeUpdateAlertVisible),"DebugEnableLogging"in e&&r(3,i=e.DebugEnableLogging),"DebugAllowLocalhost"in e&&r(4,a=e.DebugAllowLocalhost)},[s,o,n,i,a,()=>r(0,s._ValueUpdateAlertIsVisible=!1,s)]}class Lo extends oe{constructor(e){super(),re(this,e,Ko,Do,s,{OLSKServiceWorkerRegistrationRoute:1,DebugFakeUpdateAlertVisible:2,DebugEnableLogging:3,DebugAllowLocalhost:4})}}var Oo=se(function(e,t){const r={OLSKInstallDismissPreferenceKey:()=>"OLSK_INSTALL_DID_DISMISS",OLSKInstallSetup(e){if("object"!=typeof e||null===e)throw new Error("OLSKErrorInputNotValid");if("object"!=typeof e.ParamMod||null===e.ParamMod)throw new Error("OLSKErrorInputNotValid");(e.window||window).innerWidth>760||(e.window||window).navigator&&((e.window||window).navigator.standalone||(e.window||window).localStorage.getItem(r.OLSKInstallDismissPreferenceKey())||(e.ParamMod._ValueOLSKInstallAlertVisible=!0))}};Object.assign(t,r)});function yo(e){let t,r,o,n,i,s,l,u,c,p,d,h,m=lt+"",f=Le(ue("OLSKInstallAlertBlurbHTMLFormat"),ct,ut)+"";return{c(){t=K("div"),r=K("div"),o=K("button"),n=K("div"),s=O(),l=K("div"),u=K("strong"),u.textContent=`${ue("OLSKInstallAlertHeadingText")}`,c=O(),p=K("span"),w(n,"class","OLSKInstallAlertDismissButtonImage svelte-1fnd8qa"),w(o,"class","OLSKInstallAlertDismissButton OLSKDecorButtonNoStyle OLSKDecorTappable svelte-1fnd8qa"),w(o,"title",i=ue("OLSKInstallAlertDismissButtonText")),w(r,"class","OLSKInstallAlertDismiss svelte-1fnd8qa"),w(u,"class","OLSKInstallAlertHeading"),w(p,"class","OLSKInstallAlertBlurb svelte-1fnd8qa"),w(l,"class","OLSKInstallAlertMain"),w(t,"class","OLSKInstallAlert svelte-1fnd8qa")},m(i,C){g(i,t,C),S(t,r),S(r,o),S(o,n),n.innerHTML=m,S(t,s),S(t,l),S(l,u),S(l,c),S(l,p),p.innerHTML=f,d||(h=b(o,"click",function(){a(e[0].InterfaceDismissButtonDidClick)&&e[0].InterfaceDismissButtonDidClick.apply(this,arguments)}),d=!0)},p(t,r){e=t},d(e){e&&C(t),d=!1,h()}}}function bo(e){let r,o=e[0]._ValueOLSKInstallAlertVisible&&yo(e);return{c(){r=K("div"),o&&o.c(),w(r,"class","OLSKInstall")},m(e,t){g(e,r,t),o&&o.m(r,null)},p(e,[t]){e[0]._ValueOLSKInstallAlertVisible?o?o.p(e,t):(o=yo(e),o.c(),o.m(r,null)):o&&(o.d(1),o=null)},i:t,o:t,d(e){e&&C(r),o&&o.d()}}}function wo(e,t,r){let{DebugFakeAlertVisible:o=!1}=t;const n={_ValueOLSKInstallAlertVisible:o,InterfaceDismissButtonDidClick(){n.ControlDismiss()},ControlDismiss(){window.localStorage.setItem(Oo.OLSKInstallDismissPreferenceKey(),!0),r(0,n._ValueOLSKInstallAlertVisible=!1,n)},LifecycleModuleDidLoad(){Oo.OLSKInstallSetup({ParamMod:n})}};return n.LifecycleModuleDidLoad(),e.$$set=e=>{"DebugFakeAlertVisible"in e&&r(1,o=e.DebugFakeAlertVisible)},[n,o]}class vo extends oe{constructor(e){super(),re(this,e,wo,bo,s,{DebugFakeAlertVisible:1})}}function Vo(e){let r,o,n,s,l,u,c,p,d,h,m=ue("OLSKCloudFormConnectButtonText")+"";return{c(){r=K("form"),o=K("input"),n=O(),s=K("button"),l=L(m),c=O(),p=K("a"),p.textContent=`${ue("OLSKCloudFormRegisterLinkText")}`,w(o,"class","OLSKCloudFormAddressField OLSKDecorInput svelte-1907px6"),w(o,"type","email"),o.autofocus=!0,o.required=!0,w(o,"placeholder","example@5apps.com"),w(s,"class","OLSKCloudFormConnectButton svelte-1907px6"),s.disabled=u=!e[0]._ValueAddress.length||null,w(p,"class","OLSKCloudFormRegisterLink svelte-1907px6"),w(p,"href","https://5apps.com/users/sign_up?site=storage"),w(p,"target","_blank"),w(r,"class","OLSKCloudForm OLSKDecor svelte-1907px6")},m(t,i){g(t,r,i),S(r,o),V(o,e[0]._ValueAddress),S(r,n),S(r,s),S(s,l),S(r,c),S(r,p),o.focus(),d||(h=[b(o,"input",e[2]),b(s,"click",function(){a(e[0].InterfaceFormDidSubmit)&&e[0].InterfaceFormDidSubmit.apply(this,arguments)}),b(r,"submit",function(){a(e[0].InterfaceFormDidSubmit)&&e[0].InterfaceFormDidSubmit.apply(this,arguments)})],d=!0)},p(t,[r]){e=t,1&r&&o.value!==e[0]._ValueAddress&&V(o,e[0]._ValueAddress),1&r&&u!==(u=!e[0]._ValueAddress.length||null)&&(s.disabled=u)},i:t,o:t,d(e){e&&C(r),d=!1,i(h)}}}function To(e,t,r){let{OLSKCloudFormDispatchSubmit:o}=t;const n={_ValueAddress:"",InterfaceFormDidSubmit(e){e.preventDefault(),o(n._ValueAddress)}};return e.$$set=e=>{"OLSKCloudFormDispatchSubmit"in e&&r(1,o=e.OLSKCloudFormDispatchSubmit)},[n,o,function(){n._ValueAddress=this.value,r(0,n)}]}class Eo extends oe{constructor(e){super(),re(this,e,To,Vo,s,{OLSKCloudFormDispatchSubmit:1})}}function Io(e){let t,r,o,n,i,s=ft+"";return{c(){t=K("button"),r=K("div"),w(r,"class","OLSKCloudStatusSyncStartButtonImage"),w(t,"class","OLSKCloudStatusSyncStartButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(t,"title",o=ue("OLSKCloudStatusSyncStartButtonText"))},m(o,l){g(o,t,l),S(t,r),r.innerHTML=s,n||(i=b(t,"click",function(){a(e[2])&&e[2].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function ko(e){let t,r,o,n,i,s=St+"";return{c(){t=K("button"),r=K("div"),w(r,"class","OLSKCloudStatusSyncStopButtonImage"),w(t,"class","OLSKCloudStatusSyncStopButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(t,"title",o=ue("OLSKCloudStatusSyncStopButtonText"))},m(o,l){g(o,t,l),S(t,r),r.innerHTML=s,n||(i=b(t,"click",function(){a(e[3])&&e[3].apply(this,arguments)}),n=!0)},p(t,r){e=t},d(e){e&&C(t),n=!1,i()}}}function _o(e){let r,o,n,i,a,s,l,u,c,p,d,h=mt+"",m=!e[1]&&Io(e),f=e[1]&&ko(e);return{c(){r=K("div"),o=K("strong"),n=L(e[0]),i=O(),m&&m.c(),a=O(),f&&f.c(),s=O(),l=K("button"),u=K("div"),w(o,"class","OLSKCloudStatusIdentity"),w(u,"class","OLSKCloudStatusDisconnectButtonImage"),w(l,"class","OLSKCloudStatusDisconnectButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(l,"title",c=ue("OLSKCloudStatusDisconnectButtonText")),w(r,"class","OLSKCloudStatus svelte-10ewvcb")},m(t,c){g(t,r,c),S(r,o),S(o,n),S(r,i),m&&m.m(r,null),S(r,a),f&&f.m(r,null),S(r,s),S(r,l),S(l,u),u.innerHTML=h,p||(d=b(l,"click",e[5]),p=!0)},p(e,[t]){1&t&&v(n,e[0]),e[1]?m&&(m.d(1),m=null):m?m.p(e,t):(m=Io(e),m.c(),m.m(r,a)),e[1]?f?f.p(e,t):(f=ko(e),f.c(),f.m(r,s)):f&&(f.d(1),f=null)},i:t,o:t,d(e){e&&C(r),m&&m.d(),f&&f.d(),p=!1,d()}}}function xo(e,t,r){let{OLSKCloudStatusIdentityText:o}=t,{OLSKCloudStatusIsSyncing:n}=t,{OLSKCloudStatusDispatchSyncStart:i}=t,{OLSKCloudStatusDispatchSyncStop:a}=t,{OLSKCloudStatusDispatchDisconnect:s}=t;return e.$$set=e=>{"OLSKCloudStatusIdentityText"in e&&r(0,o=e.OLSKCloudStatusIdentityText),"OLSKCloudStatusIsSyncing"in e&&r(1,n=e.OLSKCloudStatusIsSyncing),"OLSKCloudStatusDispatchSyncStart"in e&&r(2,i=e.OLSKCloudStatusDispatchSyncStart),"OLSKCloudStatusDispatchSyncStop"in e&&r(3,a=e.OLSKCloudStatusDispatchSyncStop),"OLSKCloudStatusDispatchDisconnect"in e&&r(4,s=e.OLSKCloudStatusDispatchDisconnect)},[o,n,i,a,s,()=>window.confirm(ue("OLSKCloudStatusDisconnectConfirmText"))&&s()]}class Ro extends oe{constructor(e){super(),re(this,e,xo,_o,s,{OLSKCloudStatusIdentityText:0,OLSKCloudStatusIsSyncing:1,OLSKCloudStatusDispatchSyncStart:2,OLSKCloudStatusDispatchSyncStop:3,OLSKCloudStatusDispatchDisconnect:4})}}function Po(e){let t,r,o,n,i=e[0].match("Unauthorized"),a=i&&Ao(e);return{c(){t=K("p"),r=L(e[0]),o=O(),a&&a.c(),n=y(),w(t,"class","OLSKCloudError svelte-kyilmw")},m(e,i){g(e,t,i),S(t,r),g(e,o,i),a&&a.m(e,i),g(e,n,i)},p(e,t){1&t&&v(r,e[0]),1&t&&(i=e[0].match("Unauthorized")),i?a?a.p(e,t):(a=Ao(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){e&&C(t),e&&C(o),a&&a.d(e),e&&C(n)}}}function Ao(e){let t,r,o;return{c(){t=K("button"),t.textContent=`${ue("OLSKCloudRenewButtonText")}`,w(t,"class","OLSKCloudRenewButton")},m(n,i){g(n,t,i),r||(o=b(t,"click",function(){a(e[1])&&e[1].apply(this,arguments)}),r=!0)},p(t,r){e=t},d(e){e&&C(t),r=!1,o()}}}function Fo(e){let t,r;return t=new Eo({props:{OLSKCloudFormDispatchSubmit:e[2].OLSKCloudFormDispatchSubmit}}),{c(){Q(t.$$.fragment)},m(e,o){X(t,e,o),r=!0},p(e,r){const o={};4&r&&(o.OLSKCloudFormDispatchSubmit=e[2].OLSKCloudFormDispatchSubmit),t.$set(o)},i(e){r||(J(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){ee(t,e)}}}function No(e){let t,r;return t=new Ro({props:{OLSKCloudStatusIdentityText:e[2].OLSKCloudStatusIdentityText,OLSKCloudStatusIsSyncing:e[2].OLSKCloudStatusIsSyncing,OLSKCloudStatusDispatchSyncStart:e[2].OLSKCloudStatusDispatchSyncStart,OLSKCloudStatusDispatchSyncStop:e[2].OLSKCloudStatusDispatchSyncStop,OLSKCloudStatusDispatchDisconnect:e[2].OLSKCloudStatusDispatchDisconnect}}),{c(){Q(t.$$.fragment)},m(e,o){X(t,e,o),r=!0},p(e,r){const o={};4&r&&(o.OLSKCloudStatusIdentityText=e[2].OLSKCloudStatusIdentityText),4&r&&(o.OLSKCloudStatusIsSyncing=e[2].OLSKCloudStatusIsSyncing),4&r&&(o.OLSKCloudStatusDispatchSyncStart=e[2].OLSKCloudStatusDispatchSyncStart),4&r&&(o.OLSKCloudStatusDispatchSyncStop=e[2].OLSKCloudStatusDispatchSyncStop),4&r&&(o.OLSKCloudStatusDispatchDisconnect=e[2].OLSKCloudStatusDispatchDisconnect),t.$set(o)},i(e){r||(J(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){ee(t,e)}}}function Wo(e){let t,r,o,n,i=e[2].OLSKCloudErrorText&&Po(e),a=!e[2].OLSKCloudStatusIdentityText&&Fo(e),s=e[2].OLSKCloudStatusIdentityText&&No(e);return{c(){t=K("div"),i&&i.c(),r=O(),a&&a.c(),o=O(),s&&s.c(),w(t,"class","OLSKCloud svelte-kyilmw")},m(e,l){g(e,t,l),i&&i.m(t,null),S(t,r),a&&a.m(t,null),S(t,o),s&&s.m(t,null),n=!0},p(e,[n]){e[2].OLSKCloudErrorText?i?i.p(e,n):(i=Po(e),i.c(),i.m(t,r)):i&&(i.d(1),i=null),e[2].OLSKCloudStatusIdentityText?a&&(z(),Y(a,1,1,()=>{a=null}),q()):a?(a.p(e,n),4&n&&J(a,1)):(a=Fo(e),a.c(),J(a,1),a.m(t,o)),e[2].OLSKCloudStatusIdentityText?s?(s.p(e,n),4&n&&J(s,1)):(s=No(e),s.c(),J(s,1),s.m(t,null)):s&&(z(),Y(s,1,1,()=>{s=null}),q())},i(e){n||(J(a),J(s),n=!0)},o(e){Y(a),Y(s),n=!1},d(e){e&&C(t),i&&i.d(),a&&a.d(),s&&s.d()}}}function Bo(e,t,o){let{OLSKCloudErrorText:n=null}=t,{OLSKCloudDispatchRenew:i}=t;return e.$$set=e=>{o(2,t=r(r({},t),h(e))),"OLSKCloudErrorText"in e&&o(0,n=e.OLSKCloudErrorText),"OLSKCloudDispatchRenew"in e&&o(1,i=e.OLSKCloudDispatchRenew)},t=h(t),[n,i,t]}class Mo extends oe{constructor(e){super(),re(this,e,Bo,Wo,s,{OLSKCloudErrorText:0,OLSKCloudDispatchRenew:1})}}function jo(e){return function(e){if(Array.isArray(e))return Zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var Uo,$o,Ho,Go,zo,qo=(Uo=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],$o=function(){function e(t){var r=t.targetModal,o=t.triggers,n=void 0===o?[]:o,i=t.onShow,a=void 0===i?function(){}:i,s=t.onClose,l=void 0===s?function(){}:s,u=t.openTrigger,c=void 0===u?"data-micromodal-trigger":u,p=t.closeTrigger,d=void 0===p?"data-micromodal-close":p,h=t.openClass,m=void 0===h?"is-open":h,f=t.disableScroll,S=void 0!==f&&f,g=t.disableFocus,C=void 0!==g&&g,D=t.awaitCloseAnimation,K=void 0!==D&&D,L=t.awaitOpenAnimation,O=void 0!==L&&L,y=t.debugMode,b=void 0!==y&&y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal="string"==typeof r?document.getElementById(r):r,this.config={debugMode:b,disableScroll:S,openTrigger:c,closeTrigger:d,openClass:m,onShow:a,onClose:l,awaitCloseAnimation:K,awaitOpenAnimation:O,disableFocus:C},n.length>0&&this.registerTriggers.apply(this,jo(n)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t;return(t=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];r.filter(Boolean).forEach(function(t){t.addEventListener("click",function(t){return e.showModal(t)})})}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){this.modal.addEventListener("animationend",function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()},!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var r=this.config.openClass;this.modal.addEventListener("animationend",function e(){t.classList.remove(r),t.removeEventListener("animationend",e,!1)},!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalByIdOrElement",value:function(e){this.modal="string"==typeof e?document.getElementById(e):e,this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(Uo);return Array.apply(void 0,jo(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var r=t.filter(function(t){return!t.hasAttribute(e.config.closeTrigger)});r.length>0&&r[0].focus(),0===r.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter(function(e){return null!==e.offsetParent}),this.modal.contains(document.activeElement)){var r=t.indexOf(document.activeElement);e.shiftKey&&0===r&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&r===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}(),Ho=null,Go=function(e){if("string"==typeof id?!document.getElementById(e):!e)return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},zo=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var r in t)Go(r);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),r=jo(document.querySelectorAll("[".concat(t.openTrigger,"]"))),o=function(e,t){var r=[];return e.forEach(function(e){var o=e.attributes[t].value;void 0===r[o]&&(r[o]=[]),r[o].push(e)}),r}(r,t.openTrigger);if(!0!==t.debugMode||!1!==zo(r,o))for(var n in o){var i=o[n];t.targetModal=n,t.triggers=jo(i),Ho=new $o(t)}},show:function(e,t){var r=t||{};r.targetModal=e,!0===r.debugMode&&!1===Go(e)||(Ho&&Ho.removeEventListeners(),(Ho=new $o(r)).showModal())},close:function(e){e?Ho.closeModalByIdOrElement(e):Ho.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=qo);const Jo=e=>({}),Yo=e=>({}),Qo=e=>({}),Xo=e=>({});function en(e){let t,r;const o=e[2].OLSKStandardViewHead,n=l(o,e,e[1],Xo);return{c(){t=K("div"),n&&n.c(),w(t,"class","OLSKStandardViewHead OLSKDecorFixedHeader svelte-hvaqwn")},m(e,o){g(e,t,o),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||2&t)&&p(n,o,e,e[1],r?c(o,e[1],t,Qo):d(e[1]),Xo)},i(e){r||(J(n,e),r=!0)},o(e){Y(n,e),r=!1},d(e){e&&C(t),n&&n.d(e)}}}function tn(e){let t,r;const o=e[2].default,n=l(o,e,e[1],null);return{c(){t=K("div"),n&&n.c(),w(t,"class","OLSKStandardViewBody OLSKDecorFixedSecondary svelte-hvaqwn")},m(e,o){g(e,t,o),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||2&t)&&p(n,o,e,e[1],r?c(o,e[1],t,null):d(e[1]),null)},i(e){r||(J(n,e),r=!0)},o(e){Y(n,e),r=!1},d(e){e&&C(t),n&&n.d(e)}}}function rn(e){let t,r;const o=e[2].OLSKStandardViewTail,n=l(o,e,e[1],Yo);return{c(){t=K("div"),n&&n.c(),w(t,"class","OLSKStandardViewTail")},m(e,o){g(e,t,o),n&&n.m(t,null),r=!0},p(e,t){n&&n.p&&(!r||2&t)&&p(n,o,e,e[1],r?c(o,e[1],t,Jo):d(e[1]),Yo)},i(e){r||(J(n,e),r=!0)},o(e){Y(n,e),r=!1},d(e){e&&C(t),n&&n.d(e)}}}function on(e){let t,r,o,n,i=e[0].OLSKStandardViewHead&&en(e),a=e[0].default&&tn(e),s=e[0].OLSKStandardViewTail&&rn(e);return{c(){t=K("div"),i&&i.c(),r=O(),a&&a.c(),o=O(),s&&s.c(),w(t,"class","OLSKStandardView OLSKDecorFixed svelte-hvaqwn")},m(e,l){g(e,t,l),i&&i.m(t,null),S(t,r),a&&a.m(t,null),S(t,o),s&&s.m(t,null),n=!0},p(e,[n]){e[0].OLSKStandardViewHead?i?(i.p(e,n),1&n&&J(i,1)):(i=en(e),i.c(),J(i,1),i.m(t,r)):i&&(z(),Y(i,1,1,()=>{i=null}),q()),e[0].default?a?(a.p(e,n),1&n&&J(a,1)):(a=tn(e),a.c(),J(a,1),a.m(t,o)):a&&(z(),Y(a,1,1,()=>{a=null}),q()),e[0].OLSKStandardViewTail?s?(s.p(e,n),1&n&&J(s,1)):(s=rn(e),s.c(),J(s,1),s.m(t,null)):s&&(z(),Y(s,1,1,()=>{s=null}),q())},i(e){n||(J(i),J(a),J(s),n=!0)},o(e){Y(i),Y(a),Y(s),n=!1},d(e){e&&C(t),i&&i.d(),a&&a.d(),s&&s.d()}}}function nn(e,t,r){let{$$slots:o={},$$scope:n}=t;const i=m(o);return e.$$set=e=>{"$$scope"in e&&r(1,n=e.$$scope)},[i,n,o]}class an extends oe{constructor(e){super(),re(this,e,nn,on,s,{})}}const sn=e=>({}),ln=e=>({});function un(e){let t,r,o,n,i,a,s;return n=new an({props:{$$slots:{OLSKStandardViewTail:[hn],OLSKStandardViewHead:[pn],default:[cn]},$$scope:{ctx:e}}}),{c(){t=K("div"),r=K("div"),o=K("div"),Q(n.$$.fragment),w(o,"class","OLSKModalViewContainer svelte-16rd7qp"),w(o,"role","dialog"),w(o,"aria-modal","true"),w(o,"aria-labelledby",i=e[3]._DataRandomTitleID),w(r,"class","OLSKModalViewOverlay svelte-16rd7qp"),w(r,"tabindex","-1"),w(r,"data-micromodal-close",""),w(t,"class","OLSKModalView svelte-16rd7qp"),w(t,"id",a=e[3]._DataRandomID),w(t,"aria-hidden","true"),E(t,"OLSKModalViewCapped",e[2])},m(e,i){g(e,t,i),S(t,r),S(r,o),X(n,o,null),s=!0},p(e,r){const l={};283&r&&(l.$$scope={dirty:r,ctx:e}),n.$set(l),(!s||8&r&&i!==(i=e[3]._DataRandomTitleID))&&w(o,"aria-labelledby",i),(!s||8&r&&a!==(a=e[3]._DataRandomID))&&w(t,"id",a),(!s||4&r)&&E(t,"OLSKModalViewCapped",e[2])},i(e){s||(J(n.$$.fragment,e),s=!0)},o(e){Y(n.$$.fragment,e),s=!1},d(e){e&&C(t),ee(n)}}}function cn(e){let t;const r=e[7].default,o=l(r,e,e[8],null);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||256&n)&&p(o,r,e,e[8],t?c(r,e[8],n,null):d(e[8]),null)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function pn(e){let t,r,o,n,i,s,l,u,c,p,d,h,m,f=(e[1]||ue("OLSKModalViewCloseButtonText"))+"";return{c(){t=K("div"),r=K("div"),r.textContent=" ",o=O(),n=K("div"),i=K("span"),s=L(e[0]),u=O(),c=K("div"),p=K("button"),d=L(f),w(r,"class","OLSKToolbarElementGroup"),w(i,"class","OLSKModalViewTitle svelte-16rd7qp"),w(i,"id",l=e[3]._DataRandomTitleID),w(n,"class","OLSKToolbarElementGroup"),w(p,"class","OLSKModalViewCloseButton OLSKDecorButtonNoStyle OLSKDecorTappable"),w(c,"class","OLSKToolbarElementGroup"),w(t,"class","OLSKModalViewHead OLSKToolbar OLSKCommonEdgeBottom OLSKToolbarJustify svelte-16rd7qp"),w(t,"slot","OLSKStandardViewHead")},m(l,f){g(l,t,f),S(t,r),S(t,o),S(t,n),S(n,i),S(i,s),S(t,u),S(t,c),S(c,p),S(p,d),h||(m=b(p,"click",function(){a(e[3].ControlClose)&&e[3].ControlClose.apply(this,arguments)}),h=!0)},p(t,r){e=t,1&r&&v(s,e[0]),8&r&&l!==(l=e[3]._DataRandomTitleID)&&w(i,"id",l),2&r&&f!==(f=(e[1]||ue("OLSKModalViewCloseButtonText"))+"")&&v(d,f)},d(e){e&&C(t),h=!1,m()}}}function dn(e){let t;const r=e[7].OLSKStandardViewTail,o=l(r,e,e[8],ln);return{c(){o&&o.c()},m(e,r){o&&o.m(e,r),t=!0},p(e,n){o&&o.p&&(!t||256&n)&&p(o,r,e,e[8],t?c(r,e[8],n,sn):d(e[8]),ln)},i(e){t||(J(o,e),t=!0)},o(e){Y(o,e),t=!1},d(e){o&&o.d(e)}}}function hn(e){let t,r,o=e[4].OLSKStandardViewTail&&dn(e);return{c(){t=K("div"),o&&o.c(),w(t,"slot","OLSKStandardViewTail"),E(t,"OLSKStandardViewTailHotfixHidden",!e[4].OLSKStandardViewTail)},m(e,n){g(e,t,n),o&&o.m(t,null),r=!0},p(e,n){e[4].OLSKStandardViewTail?o?(o.p(e,n),16&n&&J(o,1)):(o=dn(e),o.c(),J(o,1),o.m(t,null)):o&&(z(),Y(o,1,1,()=>{o=null}),q()),(!r||16&n)&&E(t,"OLSKStandardViewTailHotfixHidden",!e[4].OLSKStandardViewTail)},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){e&&C(t),o&&o.d()}}}function mn(e){let t,r,o=e[3]._ValueIsVisible&&un(e);return{c(){o&&o.c(),t=y()},m(e,n){o&&o.m(e,n),g(e,t,n),r=!0},p(e,[r]){e[3]._ValueIsVisible?o?(o.p(e,r),8&r&&J(o,1)):(o=un(e),o.c(),J(o,1),o.m(t.parentNode,t)):o&&(z(),Y(o,1,1,()=>{o=null}),q())},i(e){r||(J(o),r=!0)},o(e){Y(o),r=!1},d(e){o&&o.d(e),e&&C(t)}}}function fn(e,t,r){let{$$slots:o={},$$scope:n}=t;const i=m(o);let{OLSKModalViewTitleText:a}=t,{OLSKModalViewCloseText:s=""}=t,{OLSKModalViewIsCapped:l=!1}=t,{OLSKModalViewDidClose:u=null}=t;const c={_OLSKModalViewIsVisible:()=>p._ValueIsVisible,OLSKModalViewShow(){p.ControlShow()},OLSKModalViewClose(){p.ControlClose()}},p={_ValueIsVisible:!1,_ValueUpdateCallback:null,_DataRandomID:"OLSKModalView_"+Math.random().toString().slice(2),_DataRandomTitleID:"OLSKModalViewTitle_"+Math.random().toString().slice(2),ControlShow(){r(3,p._ValueUpdateCallback=function(){qo.show(p._DataRandomID,{openClass:"OLSKModalViewOpen",awaitOpenAnimation:!0,awaitCloseAnimation:!0,onClose(){setTimeout(function(){r(3,p._ValueIsVisible=!1,p)},600),u&&u()}})},p),r(3,p._ValueIsVisible=!0,p)},ControlClose(){qo.close(p._DataRandomID)},LifecycleModuleDidUpdate(){p._ValueUpdateCallback&&(p._ValueUpdateCallback(),delete p._ValueUpdateCallback)}};return R(p.LifecycleModuleDidUpdate),e.$$set=e=>{"OLSKModalViewTitleText"in e&&r(0,a=e.OLSKModalViewTitleText),"OLSKModalViewCloseText"in e&&r(1,s=e.OLSKModalViewCloseText),"OLSKModalViewIsCapped"in e&&r(2,l=e.OLSKModalViewIsCapped),"OLSKModalViewDidClose"in e&&r(5,u=e.OLSKModalViewDidClose),"$$scope"in e&&r(8,n=e.$$scope)},[a,s,l,p,i,u,c,o,n]}class Sn extends oe{constructor(e){super(),re(this,e,fn,mn,s,{OLSKModalViewTitleText:0,OLSKModalViewCloseText:1,OLSKModalViewIsCapped:2,OLSKModalViewDidClose:5,modPublic:6})}get modPublic(){return this.$$.ctx[6]}}function gn(e){let t,r,o=ue("OLSKAproposFeedbackButtonText")+"";return{c(){t=K("a"),r=L(o),w(t,"class","OLSKAproposFeedbackButton svelte-1koztnt"),w(t,"href",e[0])},m(e,o){g(e,t,o),S(t,r)},p(e,r){1&r&&w(t,"href",e[0])},d(e){e&&C(t)}}}function Cn(e){let r,o,n;return{c(){r=K("button"),r.textContent=`${ue("OLSKAproposShareButtonText")}`,w(r,"class","OLSKAproposShareButton OLSKDecorButtonNoStyle OLSKDecorTappable svelte-1koztnt")},m(t,i){g(t,r,i),o||(n=b(r,"click",e[2].InterfaceShareButtonDidClick),o=!0)},p:t,d(e){e&&C(r),o=!1,n()}}}function Dn(e){let r,o,n=e[0]&&gn(e),i=e[1]&&Cn(e);return{c(){r=K("div"),n&&n.c(),o=O(),i&&i.c(),w(r,"class","OLSKApropos svelte-1koztnt")},m(e,t){g(e,r,t),n&&n.m(r,null),S(r,o),i&&i.m(r,null)},p(e,[t]){e[0]?n?n.p(e,t):(n=gn(e),n.c(),n.m(r,o)):n&&(n.d(1),n=null),e[1]?i?i.p(e,t):(i=Cn(e),i.c(),i.m(r,null)):i&&(i.d(1),i=null)},i:t,o:t,d(e){e&&C(r),n&&n.d(),i&&i.d()}}}function Kn(e,t,r){let{OLSKAproposFeedbackValue:o=null}=t,{OLSKAproposShareData:n=null}=t;const i={InterfaceShareButtonDidClick(){if(xe())return window.alert(JSON.stringify(n));navigator.share(n)}};return e.$$set=e=>{"OLSKAproposFeedbackValue"in e&&r(0,o=e.OLSKAproposFeedbackValue),"OLSKAproposShareData"in e&&r(1,n=e.OLSKAproposShareData)},[o,n,i]}class Ln extends oe{constructor(e){super(),re(this,e,Kn,Dn,s,{OLSKAproposFeedbackValue:0,OLSKAproposShareData:1})}}function On(e){let r;return{c(){r=K("div"),w(r,"class","OLSKPointer svelte-1lkaohs"),T(r,"--OLSKPointerSize",e[0]+"px"),T(r,"--OLSKPointerStroke",e[1]+"px")},m(e,t){g(e,r,t)},p(e,[t]){1&t&&T(r,"--OLSKPointerSize",e[0]+"px"),2&t&&T(r,"--OLSKPointerStroke",e[1]+"px")},i:t,o:t,d(e){e&&C(r)}}}function yn(e,t,r){let{OLSKPointerSize:o=20}=t,{OLSKPointerStroke:n=2}=t;return e.$$set=e=>{"OLSKPointerSize"in e&&r(0,o=e.OLSKPointerSize),"OLSKPointerStroke"in e&&r(1,n=e.OLSKPointerStroke)},[o,n]}class bn extends oe{constructor(e){super(),re(this,e,yn,On,s,{OLSKPointerSize:0,OLSKPointerStroke:1})}}const{window:wn}=f;function vn(e){let t,r,o,n,i,s,l=st+"";return{c(){t=K("div"),r=K("button"),o=K("div"),w(o,"class","KVCWriteCreateButtonImage"),w(r,"class","KVCWriteCreateButton OLSKDecorButtonNoStyle OLSKDecorTappable OLSKToolbarButton"),w(r,"title",n=ue("KVCWriteCreateButtonText")),w(r,"accesskey","n"),w(t,"class","OLSKToolbarElementGroup"),w(t,"slot","OLSKNarrowToolbarTail")},m(n,u){g(n,t,u),S(t,r),S(r,o),o.innerHTML=l,i||(s=b(r,"click",function(){a(e[0].InterfaceCreateButtonDidClick)&&e[0].InterfaceCreateButtonDidClick.apply(this,arguments)}),i=!0)},p(t,r){e=t},d(e){e&&C(t),i=!1,s()}}}function Vn(e){let t,r,o;return{c(){t=K("button"),t.textContent=`${ue("KVCWriteRevealArchiveButtonText")}`,w(t,"class","KVCWriteRevealArchiveButton OLSKDecorPress")},m(n,i){g(n,t,i),r||(o=b(t,"click",function(){a(e[0]._OLSKCatalog.modPublic.OLSKCatalogRevealArchive)&&e[0]._OLSKCatalog.modPublic.OLSKCatalogRevealArchive.apply(this,arguments)}),r=!0)},p(t,r){e=t},d(e){e&&C(t),r=!1,o()}}}function Tn(e){let t,r=e[0]._ValueRevealArchiveIsVisible&&Vn(e);return{c(){t=K("div"),r&&r.c(),w(t,"class","OLSKNarrowBodyTail svelte-32jd7r"),w(t,"slot","OLSKNarrowBodyTail")},m(e,o){g(e,t,o),r&&r.m(t,null)},p(e,o){e[0]._ValueRevealArchiveIsVisible?r?r.p(e,o):(r=Vn(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&C(t),r&&r.d()}}}function En(e){let t,r,o;return r=new kr({props:{KVCWriteListItemObject:e[6]}}),{c(){t=K("div"),Q(r.$$.fragment),w(t,"slot","OLSKCollectionItem")},m(e,n){g(e,t,n),X(r,t,null),o=!0},p(e,t){const o={};64&t&&(o.KVCWriteListItemObject=e[6]),r.$set(o)},i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(e){e&&C(t),ee(r)}}}function In(e){let t,r,o,n={KVCWriteDetailItem:e[7],KVCWriteDetailItemIsRootPage:!(!e[7]||!e[0].DataSetting("KVCSettingPublicRootPageID"))&&e[7].KVCNoteID===e[0].DataSetting("KVCSettingPublicRootPageID"),KVCWriteDetailConnected:e[0]._ValueCloudIdentity,KVCWriteDetailPublicURLFor:e[0].KVCWriteDetailPublicURLFor,KVCWriteDetailDispatchBack:e[0].KVCWriteDetailDispatchBack,KVCWriteDetailDispatchJump:e[0].KVCWriteDetailDispatchJump,KVCWriteDetailDispatchArchive:e[0].KVCWriteDetailDispatchArchive,KVCWriteDetailDispatchUnarchive:e[0].KVCWriteDetailDispatchUnarchive,KVCWriteDetailDispatchConnect:e[0].KVCWriteDetailDispatchConnect,KVCWriteDetailDispatchPublish:e[0].KVCWriteDetailDispatchPublish,KVCWriteDetailDispatchRetract:e[0].KVCWriteDetailDispatchRetract,KVCWriteDetailDispatchVersions:e[0].KVCWriteDetailDispatchVersions,KVCWriteDetailDispatchClone:e[0].KVCWriteDetailDispatchClone,KVCWriteDetailDispatchExport:e[0].KVCWriteDetailDispatchExport,KVCWriteDetailDispatchDebug:e[0].KVCWriteDetailDispatchDebug,KVCWriteDetailDispatchDiscard:e[0].KVCWriteDetailDispatchDiscard,KVCWriteDetailDispatchUpdate:e[0].KVCWriteDetailDispatchUpdate,KVCWriteDetailDispatchSetAsRootPage:e[0].KVCWriteDetailDispatchSetAsRootPage,KVCWriteDetailDispatchOpen:e[0].KVCWriteDetailDispatchOpen};return r=new qr({props:n}),e[1](r),{c(){t=K("div"),Q(r.$$.fragment),w(t,"class","KVCWriteDetailContainer svelte-32jd7r"),w(t,"slot","OLSKCatalogDetailContent")},m(e,n){g(e,t,n),X(r,t,null),o=!0},p(e,t){const o={};128&t&&(o.KVCWriteDetailItem=e[7]),129&t&&(o.KVCWriteDetailItemIsRootPage=!(!e[7]||!e[0].DataSetting("KVCSettingPublicRootPageID"))&&e[7].KVCNoteID===e[0].DataSetting("KVCSettingPublicRootPageID")),1&t&&(o.KVCWriteDetailConnected=e[0]._ValueCloudIdentity),1&t&&(o.KVCWriteDetailPublicURLFor=e[0].KVCWriteDetailPublicURLFor),1&t&&(o.KVCWriteDetailDispatchBack=e[0].KVCWriteDetailDispatchBack),1&t&&(o.KVCWriteDetailDispatchJump=e[0].KVCWriteDetailDispatchJump),1&t&&(o.KVCWriteDetailDispatchArchive=e[0].KVCWriteDetailDispatchArchive),1&t&&(o.KVCWriteDetailDispatchUnarchive=e[0].KVCWriteDetailDispatchUnarchive),1&t&&(o.KVCWriteDetailDispatchConnect=e[0].KVCWriteDetailDispatchConnect),1&t&&(o.KVCWriteDetailDispatchPublish=e[0].KVCWriteDetailDispatchPublish),1&t&&(o.KVCWriteDetailDispatchRetract=e[0].KVCWriteDetailDispatchRetract),1&t&&(o.KVCWriteDetailDispatchVersions=e[0].KVCWriteDetailDispatchVersions),1&t&&(o.KVCWriteDetailDispatchClone=e[0].KVCWriteDetailDispatchClone),1&t&&(o.KVCWriteDetailDispatchExport=e[0].KVCWriteDetailDispatchExport),1&t&&(o.KVCWriteDetailDispatchDebug=e[0].KVCWriteDetailDispatchDebug),1&t&&(o.KVCWriteDetailDispatchDiscard=e[0].KVCWriteDetailDispatchDiscard),1&t&&(o.KVCWriteDetailDispatchUpdate=e[0].KVCWriteDetailDispatchUpdate),1&t&&(o.KVCWriteDetailDispatchSetAsRootPage=e[0].KVCWriteDetailDispatchSetAsRootPage),1&t&&(o.KVCWriteDetailDispatchOpen=e[0].KVCWriteDetailDispatchOpen),r.$set(o)},i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(o){o&&C(t),e[1](null),ee(r)}}}function kn(e){let t,r,o,n,i,a;return i=new Mo({props:{OLSKCloudErrorText:e[0]._ValueCloudErrorText,OLSKCloudDispatchRenew:e[0].OLSKCloudDispatchRenew,OLSKCloudFormDispatchSubmit:e[0].OLSKCloudFormDispatchSubmit,OLSKCloudStatusIdentityText:e[0]._ValueCloudIdentity,OLSKCloudStatusIsSyncing:e[0]._ValueIsSyncing,OLSKCloudStatusDispatchSyncStart:e[0].OLSKCloudStatusDispatchSyncStart,OLSKCloudStatusDispatchSyncStop:e[0].OLSKCloudStatusDispatchSyncStop,OLSKCloudStatusDispatchDisconnect:e[0].OLSKCloudStatusDispatchDisconnect}}),{c(){t=K("div"),r=K("div"),o=O(),n=K("div"),Q(i.$$.fragment),w(r,"class","OLSKToolbarElementGroup"),w(n,"class","OLSKToolbarElementGroup"),w(t,"class","KVCWriteCloudToolbar OLSKToolbar OLSKToolbarJustify OLSKCommonEdgeTop svelte-32jd7r")},m(e,s){g(e,t,s),S(t,r),S(t,o),S(t,n),X(i,n,null),a=!0},p(e,t){const r={};1&t&&(r.OLSKCloudErrorText=e[0]._ValueCloudErrorText),1&t&&(r.OLSKCloudDispatchRenew=e[0].OLSKCloudDispatchRenew),1&t&&(r.OLSKCloudFormDispatchSubmit=e[0].OLSKCloudFormDispatchSubmit),1&t&&(r.OLSKCloudStatusIdentityText=e[0]._ValueCloudIdentity),1&t&&(r.OLSKCloudStatusIsSyncing=e[0]._ValueIsSyncing),1&t&&(r.OLSKCloudStatusDispatchSyncStart=e[0].OLSKCloudStatusDispatchSyncStart),1&t&&(r.OLSKCloudStatusDispatchSyncStop=e[0].OLSKCloudStatusDispatchSyncStop),1&t&&(r.OLSKCloudStatusDispatchDisconnect=e[0].OLSKCloudStatusDispatchDisconnect),i.$set(r)},i(e){a||(J(i.$$.fragment,e),a=!0)},o(e){Y(i.$$.fragment,e),a=!1},d(e){e&&C(t),ee(i)}}}function _n(e){let r,o;return r=new Ln({props:{OLSKAproposFeedbackValue:`javascript:window.location.href = window.atob('${window.btoa(Ke.OLSKStringFormatted(window.atob("bWFpbHRvOmErJUBAcmNyZWF0aXYuY29t"),"RP_003"))}')`}}),{c(){Q(r.$$.fragment)},m(e,t){X(r,e,t),o=!0},p:t,i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(e){ee(r,e)}}}function xn(e){let t,r,o;return r=new Qr({props:{KVCWriteTemplateData:e[0].DataSetting("KVCSettingCustomTemplate")||"",KVCWriteTemplateDispatchUpdate:e[0].KVCWriteTemplateDispatchUpdate}}),{c(){t=K("div"),Q(r.$$.fragment)},m(e,n){g(e,t,n),X(r,t,null),o=!0},p(e,t){const o={};1&t&&(o.KVCWriteTemplateData=e[0].DataSetting("KVCSettingCustomTemplate")||""),1&t&&(o.KVCWriteTemplateDispatchUpdate=e[0].KVCWriteTemplateDispatchUpdate),r.$set(o)},i(e){o||(J(r.$$.fragment,e),o=!0)},o(e){Y(r.$$.fragment,e),o=!1},d(e){e&&C(t),ee(r)}}}function Rn(e){let t,r;return t=new bn({}),{c(){Q(t.$$.fragment)},m(e,o){X(t,e,o),r=!0},i(e){r||(J(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){ee(t,e)}}}function Pn(e){let r,o,n,i,s,l,u,c,p,d,h,m,f,D,L,v,V,T,I,k,_=xe(),x=!xe(),R={OLSKCollectionItemAccessibilitySummaryFunction:e[2],OLSKCollectionItemClass:"OLSKCommonEdgeBottom",OLSKNarrowFilterFieldPlaceholderText:ue("KVCWriteFilterFieldText"),_OLSKCatalogArchiveField:"KVCNoteIsArchived",OLSKCatalogSortFunction:Ne.KVCWriteSortFunction,OLSKCatalogIsMatch:Ne.KVCWriteIsMatch,OLSKCatalogExactSortFunction:Ne.KVCWriteExactSortFunction,_OLSKCatalogDispatchKey:e[0]._OLSKCatalogDispatchKey,OLSKCollectionDispatchClick:e[0].OLSKCollectionDispatchClick,OLSKCollectionDispatchArrow:e[0].OLSKCollectionDispatchArrow,OLSKCatalogDispatchArchivedHide:e[0].OLSKCatalogDispatchArchivedHide,OLSKCatalogDispatchArchivedShow:e[0].OLSKCatalogDispatchArchivedShow,OLSKCatalogDispatchFilterSubmit:e[0].OLSKCatalogDispatchFilterSubmit,$$slots:{OLSKCatalogDetailContent:[In,({OLSKCatalogItemSelected:e,OLSKCollectionItem:t})=>({7:e,6:t}),({OLSKCatalogItemSelected:e,OLSKCollectionItem:t})=>(e?128:0)|(t?64:0)],OLSKCollectionItem:[En,({OLSKCollectionItem:e})=>({6:e}),({OLSKCollectionItem:e})=>e?64:0],OLSKNarrowBodyTail:[Tn,({OLSKCollectionItem:e})=>({6:e}),({OLSKCollectionItem:e})=>e?64:0],OLSKNarrowToolbarTail:[vn,({OLSKCollectionItem:e})=>({6:e}),({OLSKCollectionItem:e})=>e?64:0]},$$scope:{ctx:e}};n=new Vr({props:R}),e[3](n);let P=_&&function(e){let t,r,o,n,i,a,s,l,u=e[0].TestPublishContent+"";return{c(){t=K("p"),t.innerHTML='<strong>ControlNotePublishCount</strong> \n\t\t<span id="TestControlNotePublishCount">0</span>',r=O(),o=K("p"),o.innerHTML='<strong>ControlNoteRetractCount</strong> \n\t\t<span id="TestControlNoteRetractCount">0</span>',n=O(),i=K("div"),a=K("strong"),a.textContent="PublishContent",s=O(),l=K("div"),w(l,"id","TestPublishContent")},m(e,c){g(e,t,c),g(e,r,c),g(e,o,c),g(e,n,c),g(e,i,c),S(i,a),S(i,s),S(i,l),l.innerHTML=u},p(e,t){1&t&&u!==(u=e[0].TestPublishContent+"")&&(l.innerHTML=u)},d(e){e&&C(t),e&&C(r),e&&C(o),e&&C(n),e&&C(i)}}}(e),A=!e[0]._ValueCloudToolbarHidden&&kn(e);c=new go({props:{OLSKAppToolbarDispatchApropos:e[0].OLSKAppToolbarDispatchApropos,OLSKAppToolbarDispatchTongue:e[0].OLSKAppToolbarDispatchTongue,OLSKAppToolbarGuideURL:window.OLSKCanonical("KVCGuideRoute"),OLSKAppToolbarErrorText:e[0]._OLSKAppToolbarErrorText,OLSKAppToolbarCloudConnected:!!e[0]._ValueCloudIdentity,OLSKAppToolbarCloudOffline:e[0]._ValueCloudIsOffline,OLSKAppToolbarCloudError:!!e[0]._ValueCloudErrorText,OLSKAppToolbarDispatchCloud:e[0].OLSKAppToolbarDispatchCloud,OLSKAppToolbarDispatchLauncher:e[0].OLSKAppToolbarDispatchLauncher}}),d=new vo({});let F=x&&function(){let e,r;return e=new Lo({props:{OLSKServiceWorkerRegistrationRoute:window.OLSKCanonical("WKCServiceWorkerRoute")}}),{c(){Q(e.$$.fragment)},m(t,o){X(e,t,o),r=!0},p:t,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){Y(e.$$.fragment,t),r=!1},d(t){ee(e,t)}}}(),N={OLSKModalViewTitleText:ue("OLSKAproposHeadingText"),OLSKModalViewIsCapped:!0,$$slots:{default:[_n]},$$scope:{ctx:e}};f=new Sn({props:N}),e[4](f);let W={OLSKModalViewTitleText:ue("KVCWriteTemplateModalTitleText"),$$slots:{default:[xn]},$$scope:{ctx:e}};L=new Sn({props:W}),e[5](L);let B=e[0]._IsRunningDemo&&Rn();return{c(){r=K("div"),o=K("div"),Q(n.$$.fragment),i=O(),P&&P.c(),s=O(),l=K("footer"),A&&A.c(),u=O(),Q(c.$$.fragment),p=O(),Q(d.$$.fragment),h=O(),F&&F.c(),m=O(),Q(f.$$.fragment),D=O(),Q(L.$$.fragment),v=O(),B&&B.c(),V=y(),w(o,"class","OLSKViewportContent"),w(l,"class","KVCWriteViewportFooter OLSKMobileViewFooter svelte-32jd7r"),w(r,"class","KVCWrite OLSKViewport"),E(r,"OLSKIsLoading",e[0]._ValueIsLoading),E(r,"OLSKIsDemoing",e[0]._IsRunningDemo)},m(t,C){g(t,r,C),S(r,o),X(n,o,null),S(r,i),P&&P.m(r,null),S(r,s),S(r,l),A&&A.m(l,null),S(l,u),X(c,l,null),S(l,p),X(d,l,null),S(l,h),F&&F.m(l,null),g(t,m,C),X(f,t,C),g(t,D,C),X(L,t,C),g(t,v,C),B&&B.m(t,C),g(t,V,C),T=!0,I||(k=b(wn,"keydown",function(){a(e[0].InterfaceWindowDidKeydown)&&e[0].InterfaceWindowDidKeydown.apply(this,arguments)}),I=!0)},p(t,[o]){e=t;const i={};1&o&&(i._OLSKCatalogDispatchKey=e[0]._OLSKCatalogDispatchKey),1&o&&(i.OLSKCollectionDispatchClick=e[0].OLSKCollectionDispatchClick),1&o&&(i.OLSKCollectionDispatchArrow=e[0].OLSKCollectionDispatchArrow),1&o&&(i.OLSKCatalogDispatchArchivedHide=e[0].OLSKCatalogDispatchArchivedHide),1&o&&(i.OLSKCatalogDispatchArchivedShow=e[0].OLSKCatalogDispatchArchivedShow),1&o&&(i.OLSKCatalogDispatchFilterSubmit=e[0].OLSKCatalogDispatchFilterSubmit),449&o&&(i.$$scope={dirty:o,ctx:e}),n.$set(i),_&&P.p(e,o),e[0]._ValueCloudToolbarHidden?A&&(z(),Y(A,1,1,()=>{A=null}),q()):A?(A.p(e,o),1&o&&J(A,1)):(A=kn(e),A.c(),J(A,1),A.m(l,u));const a={};1&o&&(a.OLSKAppToolbarDispatchApropos=e[0].OLSKAppToolbarDispatchApropos),1&o&&(a.OLSKAppToolbarDispatchTongue=e[0].OLSKAppToolbarDispatchTongue),1&o&&(a.OLSKAppToolbarErrorText=e[0]._OLSKAppToolbarErrorText),1&o&&(a.OLSKAppToolbarCloudConnected=!!e[0]._ValueCloudIdentity),1&o&&(a.OLSKAppToolbarCloudOffline=e[0]._ValueCloudIsOffline),1&o&&(a.OLSKAppToolbarCloudError=!!e[0]._ValueCloudErrorText),1&o&&(a.OLSKAppToolbarDispatchCloud=e[0].OLSKAppToolbarDispatchCloud),1&o&&(a.OLSKAppToolbarDispatchLauncher=e[0].OLSKAppToolbarDispatchLauncher),c.$set(a),x&&F.p(e,o),(!T||1&o)&&E(r,"OLSKIsLoading",e[0]._ValueIsLoading),(!T||1&o)&&E(r,"OLSKIsDemoing",e[0]._IsRunningDemo);const s={};256&o&&(s.$$scope={dirty:o,ctx:e}),f.$set(s);const p={};257&o&&(p.$$scope={dirty:o,ctx:e}),L.$set(p),e[0]._IsRunningDemo?B?1&o&&J(B,1):(B=Rn(),B.c(),J(B,1),B.m(V.parentNode,V)):B&&(z(),Y(B,1,1,()=>{B=null}),q())},i(e){T||(J(n.$$.fragment,e),J(A),J(c.$$.fragment,e),J(d.$$.fragment,e),J(F),J(f.$$.fragment,e),J(L.$$.fragment,e),J(B),T=!0)},o(e){Y(n.$$.fragment,e),Y(A),Y(c.$$.fragment,e),Y(d.$$.fragment,e),Y(F),Y(f.$$.fragment,e),Y(L.$$.fragment,e),Y(B),T=!1},d(t){t&&C(r),e[3](null),ee(n),P&&P.d(),A&&A.d(),ee(c),ee(d),F&&F.d(),t&&C(m),e[4](null),ee(f,t),t&&C(D),e[5](null),ee(L,t),t&&C(v),B&&B.d(t),t&&C(V),I=!1,k()}}}function An(e,t,r){const o={_ValueIsLoading:!0,_ValueRevealArchiveIsVisible:!1,async ValueSetting(e,t){await o._ValueZDRWrap.App.KVCSetting.ZDRModelWriteObject({KVCSettingKey:e,KVCSettingValue:t}),r(0,o._ValueSettingsAll[e]=t,o)},_ValueCloudToolbarHidden:!0,_ValueSaveNoteThrottleMap:{},_ValueSavePublishThrottleMap:{},_IsRunningDemo:!1,DataSetting:e=>o._ValueSettingsAll[e],DataNavigator:()=>navigator.serviceWorker?navigator:{serviceWorker:{}},DataWriteRecipes(){const e=[{LCHRecipeSignature:"KVCWriteLauncherItemJournal",LCHRecipeName:ue("KVCWriteLauncherItemJournalText"),LCHRecipeCallback:function(){o.ControlNoteCreate(Ne.KVCWriteLauncherItemJournalTemplate(this.api.LCHDateLocalOffsetSubtracted(new Date(xe()?"2001-02-03T04:05:06Z":Date.now())),ue))}},{LCHRecipeSignature:"KVCWriteLauncherItemBacklinks",LCHRecipeName:ue("KVCWriteLauncherItemBacklinksText"),LCHRecipeCallback:async function(){o.ControlNoteCreate(Ne.KVCWriteLauncherItemBacklinksTemplate(this.api.LCHDateLocalOffsetSubtracted(new Date(xe()?"2001-02-03T04:05:06Z":Date.now())),Ne.KVCWriteBacklinksMap(o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll()),ue))}},{LCHRecipeSignature:"KVCWriteLauncherItemShowPublicNotes",LCHRecipeName:ue("KVCWriteLauncherItemShowPublicNotesText"),LCHRecipeCallback:function(){o._OLSKCatalog.modPublic.OLSKCatalogFilterWithNoThrottle(Ne.KVCWritePublicSymbol()),document.querySelector(".OLSKNarrowFilterField").focus()}},{LCHRecipeSignature:"KVCWriteLauncherItemImportTXT",LCHRecipeName:ue("KVCWriteLauncherItemImportTXTText"),LCHRecipeCallback:async function(){return o.ControlNotesImportTXT(await this.api.LCHReadTextFileObjects({accept:".txt,.md",multiple:!0}))}},{LCHRecipeSignature:"KVCWriteLauncherItemImportNV",LCHRecipeName:ue("KVCWriteLauncherItemImportNVText"),LCHRecipeCallback:async function(){return o.ControlNotesImportTXT(await this.api.LCHReadTextFileObjects({accept:".txt,.md",multiple:!0}),!0)}},{LCHRecipeSignature:"KVCWriteLauncherItemExportZIP",LCHRecipeName:ue("KVCWriteLauncherItemExportZIPText"),LCHRecipeCallback:async function(){const e=new JSZip;return o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().forEach(function(t){e.file(`${t.KVCNoteID}.txt`,t.KVCNoteBody,{date:t.KVCNoteModificationDate})}),saveAs(await e.generateAsync({type:"blob"}),o.DataExportZIPFilename())}}].concat(Ne.KVCWriteRecipes({OLSKLocalized:ue,ParamConnected:!!o._ValueCloudIdentity,ParamWindow:window,ParamMod:o,ParamSpecUI:xe()}));if(o._ValueCloudIdentity){let t=0;e.push({LCHRecipeSignature:"KVCWriteLauncherItemConfigureCustomDomain",LCHRecipeName:ue("KVCWriteLauncherItemConfigureCustomDomainText"),LCHRecipeCallback:function(){const e=!xe()||xe()&&!t,r=!xe()||xe()&&t,n=!xe()||xe()&&2==t;if(!e||null!==window.prompt(ue("KVCWriteLauncherItemConfigureCustomDomainPrompt1QuestionText"),o._ValueZDRWrap.Public.ZDRStoragePermalink(Te.KVCNotePublicRootPagePath()))){if(r){const e=async function(){const t=xe()&&n?"":window.prompt(ue("KVCWriteLauncherItemConfigureCustomDomainPrompt2QuestionText"));if(null===t)return;if(!t&&window.confirm(ue("KVCWriteLauncherItemConfigureCustomDomainConfirmQuestionText"))&&e(),!t)return;const r=Ne.KVCWriteCustomDomainBaseURLData(t);return r?(await o.ValueSetting("KVCSettingCustomDomainBaseURL",r),void(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()&&await o._ControlHotfixUpdateInPlace(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()))):void 0};e()}xe()&&(t+=1)}}}),e.push({LCHRecipeSignature:"KVCWriteLauncherItemRemoveCustomDomain",LCHRecipeName:ue("KVCWriteLauncherItemRemoveCustomDomainText"),LCHRecipeCallback:async function(){await o._ValueZDRWrap.App.KVCSetting.ZDRModelDeleteObject({KVCSettingKey:"KVCSettingCustomDomainBaseURL"}),delete o._ValueSettingsAll.KVCSettingCustomDomainBaseURL,o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()&&o._ControlHotfixUpdateInPlace(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},LCHRecipeIsExcluded:()=>!o.DataSetting("KVCSettingCustomDomainBaseURL")},{LCHRecipeSignature:"KVCWriteLauncherItemConfigureCustomTemplate",LCHRecipeName:ue("KVCWriteLauncherItemConfigureCustomTemplateText"),LCHRecipeCallback:function(){o._KVCWriteTemplateModal.modPublic.OLSKModalViewShow()}},{LCHRecipeSignature:"KVCWriteLauncherItemRemoveCustomTemplate",LCHRecipeName:ue("KVCWriteLauncherItemRemoveCustomTemplateText"),LCHRecipeCallback:async function(){window.confirm(ue("OLSKWordingConfirmText"))&&(await o._ValueZDRWrap.App.KVCSetting.ZDRModelDeleteObject({KVCSettingKey:"KVCSettingCustomTemplate"}),delete o._ValueSettingsAll.KVCSettingCustomTemplate)},LCHRecipeIsExcluded:()=>!o.DataSetting("KVCSettingCustomTemplate")})}return xe()&&e.push({LCHRecipeName:"FakeZDRSchemaDispatchSyncCreateNote",LCHRecipeCallback:async function(){return o.ZDRSchemaDispatchSyncCreateNote(await o._ValueZDRWrap.App.KVCNote.KVCNoteCreate(o.FakeNoteObjectValid("FakeZDRSchemaDispatchSyncCreateNote")))}},{LCHRecipeName:"FakeZDRSchemaDispatchSyncUpdateNote",LCHRecipeCallback:async function(){return o.ZDRSchemaDispatchSyncUpdateNote(await o._ValueZDRWrap.App.KVCNote.KVCNoteUpdate(Object.assign(o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(function(e){return e.KVCNoteBody.match("FakeZDRSchemaDispatchSync")}).pop(),{KVCNoteBody:"FakeZDRSchemaDispatchSyncUpdateNote"})))}},{LCHRecipeName:"FakeZDRSchemaDispatchSyncDeleteNote",LCHRecipeCallback:async function(){return o.ZDRSchemaDispatchSyncDeleteNote(await o._ValueZDRWrap.App.KVCNote.KVCNoteDelete(o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(function(e){return e.KVCNoteBody.match("FakeZDRSchemaDispatchSync")}).pop()))}},{LCHRecipeName:"FakeZDRSchemaDispatchSyncConflictNote",LCHRecipeCallback:async function(){const e=o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(function(e){return e.KVCNoteBody.match("FakeZDRSchemaDispatchSyncConflictNote")}).pop();return o.ZDRSchemaDispatchSyncConflictNote({origin:"conflict",oldValue:JSON.parse(JSON.stringify(await o._ValueZDRWrap.App.KVCNote.KVCNoteUpdate(Object.assign({},e,{KVCNoteBody:e.KVCNoteBody+"-local"})))),newValue:JSON.parse(JSON.stringify(Object.assign({},e,{KVCNoteBody:e.KVCNoteBody+"-remote"})))})}},{LCHRecipeName:"FakeConfigureCustomDomain",LCHRecipeCallback:async function(){await o.ValueSetting("KVCSettingCustomDomainBaseURL",Ne.KVCWriteCustomDomainBaseURLData("FakeCustomDomainBaseURL")),o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()&&await o._ControlHotfixUpdateInPlace(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())}},{LCHRecipeName:"KVCWriteLauncherItemDebug_PromptFakeImportPlain",LCHRecipeCallback:function(){return o.ControlNotesImportTXT([Object.assign(new File([],Math.random().toString()),{lastModified:Date.now()},JSON.parse(window.prompt()))])}},{LCHRecipeName:"KVCWriteLauncherItemDebug_PromptFakeImportComplex",LCHRecipeCallback:function(){return o.ControlNotesImportTXT([Object.assign(new File([],Math.random().toString()),{lastModified:Date.now()},JSON.parse(window.prompt()))],!0)}},{LCHRecipeName:"KVCWriteLauncherItemDebug_AlertFakeExportCompressed",LCHRecipeCallback:function(){return window.alert(JSON.stringify({OLSKDownloadName:o.DataExportZIPFilename()}))}}),e.push(...ze.ZDRRecipes({ParamMod:o,ParamSpecUI:xe()})),e.push(...Ge.OLSKTransportRecipes({OLSKLocalized:ue,OLSKTransportDispatchImportJSON:o.OLSKTransportDispatchImportJSON,OLSKTransportDispatchExportInput:o.OLSKTransportDispatchExportInput,ParamSpecUI:xe()})),o._ValueZDRWrap.ZDRStorageProtocol===ze.ZDRProtocolRemoteStorage()&&e.push(...Ce.OLSKRemoteStorageRecipes({ParamStorage:o._ValueZDRWrap.ZDRStorageClient(),OLSKLocalized:ue,ParamMod:o,ParamSpecUI:xe()})),e.push(...Ae.OLSKServiceWorkerRecipes(window,o.DataNavigator(),ue,xe())),o._KVCWriteDetail&&e.push(...o._KVCWriteDetail.modPublic.KVCWriteDetailRecipes()),o._ValueRevealArchiveIsVisible&&e.push({LCHRecipeSignature:"KVCWriteLauncherItemRevealArchive",LCHRecipeName:ue("KVCWriteRevealArchiveButtonText"),LCHRecipeCallback:function(){o.ControlRevealArchive()}}),e},DataExportZIPFilename:()=>`${Ge.OLSKTransportExportBasename()}.zip`,DataIsMobile:()=>window.innerWidth<=760,FakeNoteObjectValid:e=>({KVCNoteBody:e||""}),InterfaceCreateButtonDidClick(){o.ControlNoteCreate()},InterfaceWindowDidKeydown(e){if(window.Launchlet.LCHSingletonExists())return;const t={Tab(){document.activeElement!==document.querySelector(".OLSKNarrowFilterField")?document.querySelector(".OLSKNarrowFilterField").focus():o._KVCWriteDetail&&o._KVCWriteDetail.modPublic.KVCWriteDetailEditorFocus(),e.preventDefault()}};t[e.key]&&t[e.key]()},ControlNoteSave(e){pe.OLSKThrottleMappedTimeout(o._ValueSaveNoteThrottleMap,e.KVCNoteID,{OLSKThrottleDuration:500,async OLSKThrottleCallback(){je.OLSKVersionAdd({ParamMap:o._ValueVersionMap,ParamKey:e.KVCNoteID,ParamData:await o._ValueZDRWrap.App.KVCNote.KVCNoteUpdate(e),ParamLimit:parseInt("50")}),o.ControlLocalVersion()}}),xe()&&pe.OLSKThrottleSkip(o._ValueSaveNoteThrottleMap[e.KVCNoteID]),Te.KVCNoteIsMarkedPublic(e)&&(pe.OLSKThrottleMappedTimeout(o._ValueSavePublishThrottleMap,e.KVCNoteID,{OLSKThrottleDuration:1500,OLSKThrottleCallback(){o.ControlNotePublish(e)}}),xe()&&pe.OLSKThrottleSkip(o._ValueSavePublishThrottleMap[e.KVCNoteID]))},ControlLocalVersion(){pe.OLSKThrottleMappedTimeout(o._ValueSaveNoteThrottleMap,"KVC_VERSION_MAP",{OLSKThrottleDuration:50,async OLSKThrottleCallback(){Ue.OLKSLocalStorageSet(window.localStorage,"KVC_VERSION_MAP",o._ValueVersionMap)}}),xe()&&pe.OLSKThrottleSkip(o._ValueSaveNoteThrottleMap.KVC_VERSION_MAP)},async ControlNoteCreate(e){o.ControlNoteActivate(o._OLSKCatalog.modPublic.OLSKCatalogInsert(await o._ValueZDRWrap.App.KVCNote.KVCNoteCreate("object"==typeof e?e:{KVCNoteBody:"string"==typeof e?e:""}))),o.DataIsMobile()&&o._KVCWriteDetail.modPublic.KVCWriteDetailEditorFocus(),"string"==typeof e&&e.match("\n")&&setTimeout(function(){o._KVCWriteDetail.modPublic.KVCWriteDetailSetCursor(e.split("\n").length-1,e.split("\n").pop().length)},100)},_ControlHotfixUpdateInPlace(e){o.ControlNoteActivate(e),o._KVCWriteDetail.modPublic._KVCWriteDetailTriggerUpdate()},ControlNoteActivate(e){o._OLSKCatalog.modPublic.OLSKCatalogSelect(e),e&&(o._OLSKCatalog.modPublic.OLSKCatalogFocusDetail(),o.DataIsMobile()||setTimeout(function(){o._KVCWriteDetail.modPublic.KVCWriteDetailSetItem(e),o._KVCWriteDetail.modPublic.KVCWriteDetailEditorFocus()},100))},ControlNoteJump(e){window.Launchlet.LCHSingletonCreate({LCHOptionRecipes:e,LCHOptionMode:window.Launchlet.LCHModePreview,LCHOptionCompletionHandler(){o.DataIsMobile()||o._KVCWriteDetail.modPublic.KVCWriteDetailEditorFocus()}})},ControlNoteArchive(e){e.KVCNoteIsArchived=!0,o.ControlNoteSave(e),o.ControlNoteActivate(e)},ControlNoteUnarchive(e){delete e.KVCNoteIsArchived,o.ControlNoteSave(e),o.ControlNoteActivate(e)},async ControlNotePublish(e){xe()&&(window.TestControlNotePublishCount.innerHTML=parseInt(window.TestControlNotePublishCount.innerHTML)+1);ue("KVCRootLinkText"),ue("KVCBacklinksHeadingText");const t={KVCOptionIsRoot:o.DataSetting("KVCSettingPublicRootPageID")===e.KVCNoteID,KVCOptionRootURL:o._ValueZDRWrap.Public.ZDRStoragePermalink("index.html"),KVCOptionBacklinks:Ne.KVCWriteBacklinksMap(o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll().filter(Te.KVCNoteIsMarkedPublic).concat(e))[we.KVCTemplatePlaintextTitle(e.KVCNoteBody)],_KVCOptionPublicBaseURL:o._ValueZDRWrap.Public.ZDRStoragePermalink("/"),_KVCOptionObject:e},n=Te.KVCNoteIsMarkedPublic(e),i=await o._ValueZDRWrap.App.KVCNote.KVCNotePublicFilesUpload(await o._ValueZDRWrap.App.KVCNote.KVCNoteMarkPublic(e),r(0,o.TestPublishContent=we.KVCView({KVCViewSource:e.KVCNoteBody,KVCViewPermalinkMap:o._ValueZDRWrap.App.KVCNote.KVCNotePermalinkMap(o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll(),o.DataSetting("KVCSettingPublicRootPageID")||""),KVCViewTemplate:o.DataSetting("KVCSettingCustomTemplate")||we.KVCTemplateViewDefault(ue),KVCViewTemplateOptions:t}),o),t.KVCOptionIsRoot);n!==Te.KVCNoteIsMarkedPublic(i)&&o._OLSKCatalog.modPublic.OLSKCatalogUpdate(i)},async ControlNoteRetract(e){xe()&&(window.TestControlNoteRetractCount.innerHTML=parseInt(window.TestControlNoteRetractCount.innerHTML)+1),o._OLSKCatalog.modPublic.OLSKCatalogUpdate(await o._ValueZDRWrap.App.KVCNote.KVCNotePublicFilesRetract(await o._ValueZDRWrap.App.KVCNote.KVCNoteMarkNotPublic(e),o.DataSetting("KVCSettingPublicRootPageID")===e.KVCNoteID))},async ControlNoteVersions(e){Launchlet.LCHTasksRun([{LCHRecipeCallback(){o.ControlNoteCreate(Ne.KVCWriteLauncherItemVersionsTemplate(this.api.LCHDateLocalOffsetSubtracted(new Date(xe()?"2001-02-03T04:05:06Z":Date.now())),ue,(o._ValueVersionMap[e.KVCNoteID]||[]).map(Ce.OLSKRemoteStoragePostJSONParse).reverse()))},LCHRecipeURLFilter:"*",LCHRecipeIsAutomatic:!0}])},ControlNoteClone(e){o.ControlNoteCreate(Ne.KVCWriteCloned(e))},async ControlNoteDiscard(e){o._OLSKCatalog.modPublic.OLSKCatalogRemove(e),je.OLSKVersionClear(o._ValueVersionMap,(await o._ValueZDRWrap.App.KVCNote.KVCNoteDelete(e)).KVCNoteID),o.ControlLocalVersion()},ControlRevealArchive(){r(0,o._ValueRevealArchiveIsVisible=!1,o)},async ControlNotesImportTXT(e,t){await o._ValueZDRWrap.App.KVCTransport.KVCTransportImport({KVCNote:Ce.OLSKRemoteStoragePostJSONParse(e.map(function(e){return Ne.KVCWriteFileNoteObject(e,t)}))}),await o.SetupCatalog()},ControlDemo:async()=>(r(0,o._IsRunningDemo=!0,o),window.OLSK_DEMO=!0,$e.OLSKChainGather(Object.assign({Wait:He.OLSKBeaconWait,Point:(e,t)=>He._OLSKBeaconAnimate(He.OLSKBeaconPointFunction(".OLSKPointer",e),t),Click:e=>He._OLSKBeaconAnimate(He.OLSKBeaconClickFunction(e,".OLSKPointer","OLSKPointerActive")),ClickLink:e=>He._OLSKBeaconAnimate(He.OLSKBeaconClickFunction(e,".OLSKPointer","OLSKPointerActive","mouseup")),Defer:e=>He.OLSKBeaconDeferFunction(e),Focus:e=>new Promise(function(t){t(document.querySelector(e).focus())}),Fill:(e,t,r)=>He._OLSKBeaconAnimate(He.OLSKBeaconFillFunction(e,t),r),Increment(e,t,r){const o=OLSKDemoEditor.getValue();return He._OLSKBeaconAnimate(function(e){window.OLSKDemoEditor.setValue(o+t.slice(0,t.length*e))},r)},Set:(e,t)=>He._OLSKBeaconAnimate(He.OLSKBeaconSetFunction(e,t)),Nudge(){return He._OLSKBeaconAnimate(He.OLSKBeaconNudgeFunction(".OLSKPointer",...arguments))}},o)).Point(".KVCWriteCreateButton").Nudge(0,50).Wait().Point(".KVCWriteCreateButton").Click(".KVCWriteCreateButton").Nudge(0,-200).Increment(".KVCWriteInput .CodeMirror","Hello").Wait().Increment(".KVCWriteInput .CodeMirror","\n\nLet's make some notes.",1e3).Wait(1500).Click(".KVCWriteCreateButton").Increment(".KVCWriteInput .CodeMirror","Apples").Wait().Click(".KVCWriteCreateButton").Increment(".KVCWriteInput .CodeMirror","Bananas").Wait().Click(".KVCWriteCreateButton").Increment(".KVCWriteInput .CodeMirror","Cookies").Wait().Click(".KVCWriteCreateButton").Wait(1e3).Increment(".KVCWriteInput .CodeMirror","Make links using brackets").Wait().Increment(".KVCWriteInput .CodeMirror","\n\n# For example").Wait().Increment(".KVCWriteInput .CodeMirror","\nAlex likes [[apples]].").Wait(1500).Increment(".KVCWriteInput .CodeMirror","\n\nClick to open the note.").Wait(1e3).Point(".cm-link",1500).Wait(1e3).ClickLink(".cm-link").Wait(1e3).Increment(".KVCWriteInput .CodeMirror","\n\nThey also like [[bananas]].").Wait().Point(".cm-link").ClickLink(".cm-link").Wait().Increment(".KVCWriteInput .CodeMirror","\n\nBut [[cookies]] are their favourite thing to eat.").Wait().Point(".cm-link").Wait().Increment(".KVCWriteInput .CodeMirror","\n\nNow you try!").OLSKChainExecute()),_OLSKCatalogDispatchKey:e=>e.KVCNoteID,OLSKCollectionDispatchClick(e){o.ControlNoteActivate(e)},OLSKCollectionDispatchArrow(e){o._OLSKCatalog.modPublic.OLSKCatalogSelect(e)},OLSKCatalogDispatchArchivedHide(){r(0,o._ValueRevealArchiveIsVisible=!0,o)},OLSKCatalogDispatchArchivedShow(){r(0,o._ValueRevealArchiveIsVisible=!1,o)},OLSKCatalogDispatchFilterSubmit(e){o._OLSKCatalog.modPublic.OLSKCatalogFilterWithNoThrottle(""),o.ControlNoteCreate(e+"\n\n")},OLSKAppToolbarDispatchApropos(){o._OLSKModalView.modPublic.OLSKModalViewShow()},OLSKAppToolbarDispatchTongue(){if(window.Launchlet.LCHSingletonExists())return window.Launchlet.LCHSingletonDestroy();let e;window.Launchlet.LCHSingletonCreate({LCHOptionRecipes:Me.OLSKLanguageSwitcherRecipes({ParamLanguageCodes:window.OLSKPublicConstants("OLSKSharedPageLanguagesAvailable"),ParamCurrentLanguage:window.OLSKPublicConstants("OLSKSharedPageCurrentLanguage"),ParamSpecUI:xe(),ParamRouteConstant:window.OLSKPublicConstants("OLSKSharedActiveRouteConstant"),OLSKCanonical:window.OLSKCanonical}).map(function(t){const r=t.LCHRecipeCallback;return Object.assign(t,{LCHRecipeCallback(){e=r}})}),LCHOptionCompletionHandler(){e&&e()},LCHOptionMode:Launchlet.LCHModePreview,LCHOptionLanguage:window.OLSKPublicConstants("OLSKSharedPageCurrentLanguage")})},OLSKAppToolbarDispatchCloud(){r(0,o._ValueCloudToolbarHidden=!o._ValueCloudToolbarHidden,o)},OLSKAppToolbarDispatchLauncher(){if(window.Launchlet.LCHSingletonExists())return window.Launchlet.LCHSingletonDestroy();window.Launchlet.LCHSingletonCreate({LCHOptionRecipes:o.DataWriteRecipes(),LCHOptionLanguage:window.OLSKPublicConstants("OLSKSharedPageCurrentLanguage")})},KVCWriteDetailPublicURLFor:e=>o.DataSetting("KVCSettingCustomDomainBaseURL")?Ne.KVCWriteCustomDomainBaseURLFunction(o._ValueZDRWrap.Public.ZDRStoragePermalink(Te.KVCNotePublicRootPagePath()),Te.KVCNotePublicRootPagePath())(o._ValueZDRWrap.Public.ZDRStoragePermalink(Te.KVCNotePublicPath(e,o.DataSetting("KVCSettingPublicRootPageID")===e.KVCNoteID)),o.DataSetting("KVCSettingCustomDomainBaseURL")):xe()&&o._ValueCloudIdentity?"/FakePublicPath":o._ValueZDRWrap.Public.ZDRStoragePermalink(Te.KVCNotePublicChildPagePath(e)),KVCWriteDetailDispatchBack(){o._OLSKCatalog.modPublic.OLSKCatalogFocusMaster()},KVCWriteDetailDispatchJump(e){o.ControlNoteJump(e)},KVCWriteDetailDispatchArchive(){o.ControlNoteArchive(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchUnarchive(){o.ControlNoteUnarchive(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchConnect(){r(0,o._ValueCloudToolbarHidden=!1,o)},KVCWriteDetailDispatchPublish(){o.ControlNotePublish(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchRetract(){o.ControlNoteRetract(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchVersions(){o.ControlNoteVersions(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchClone(){o.ControlNoteClone(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},async KVCWriteDetailDispatchExport(){const e=new JSZip;return[o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()].forEach(function(t){e.file(`${t.KVCNoteID}.txt`,t.KVCNoteBody,{date:t.KVCNoteCreationDate})}),saveAs(await e.generateAsync({type:"blob"}),o.DataExportZIPFilename())},KVCWriteDetailDispatchDebug(){const e=`https://inspektor.5apps.com/inspect?path=wikiavec%2F${encodeURIComponent(Te.KVCNoteObjectPath(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()))}`;xe()?window.FakeWindowOpen=e:window.open(e)},KVCWriteDetailDispatchDiscard(){o.ControlNoteDiscard(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchUpdate(){o.ControlNoteSave(o._OLSKCatalog.modPublic.OLSKCatalogUpdate(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()))},async KVCWriteDetailDispatchSetAsRootPage(e){await o.ValueSetting("KVCSettingPublicRootPageID",e),await o._ControlHotfixUpdateInPlace(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()),Te.KVCNoteIsMarkedPublic(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())&&o.ControlNotePublish(o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected())},KVCWriteDetailDispatchOpen(e){o._OLSKCatalog.modPublic.OLSKCatalogFilterWithNoThrottle(e)},async KVCWriteTemplateDispatchUpdate(e){await o.ValueSetting("KVCSettingCustomTemplate",e)},async OLSKTransportDispatchImportJSON(e){await o._ValueZDRWrap.App.KVCTransport.KVCTransportImport(Ce.OLSKRemoteStoragePostJSONParse(e)),await o.SetupCatalog()},OLSKTransportDispatchExportInput:async()=>o._ValueZDRWrap.App.KVCTransport.KVCTransportExport({KVCNote:o._OLSKCatalog.modPublic._OLSKCatalogDataItemsAll(),KVCSetting:await o._ValueZDRWrap.App.KVCSetting.KVCSettingList()}),ZDRSchemaDispatchSyncCreateNote(e){o._OLSKCatalog.modPublic.OLSKCatalogInsert(e)},ZDRSchemaDispatchSyncUpdateNote(e){o._OLSKCatalog.modPublic.OLSKCatalogUpdate(e),!xe()&&o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected()&&o._OLSKCatalog.modPublic.OLSKCatalogDataItemSelected().KVCNoteID===e.KVCNoteID&&o._ControlHotfixUpdateInPlace(e)},ZDRSchemaDispatchSyncDeleteNote(e){o._OLSKCatalog.modPublic.OLSKCatalogRemove(e),je.OLSKVersionClear(o._ValueVersionMap,e.KVCNoteID),o.ControlLocalVersion()},ZDRSchemaDispatchSyncConflictNote:e=>setTimeout(async function(){o._OLSKCatalog.modPublic.OLSKCatalogUpdate(await o._ValueZDRWrap.App.KVCNote.KVCNoteUpdate(Ce.OLSKRemoteStoragePostJSONParse(Ce.OLSKRemoteStorageChangeDelegateConflictSelectRecent(e))))},xe()?0:500),async OLSKCloudFormDispatchSubmit(e){const t=ze.ZDRPreferenceProtocolConnect(e);(ze.ZDRPreferenceProtocolMigrate()?await o.DataStorageClient(t):o._ValueZDRWrap).ZDRCloudConnect(e)},OLSKCloudDispatchRenew(){o._ValueZDRWrap.ZDRCloudReconnect(o._ValueCloudIdentity)},OLSKCloudStatusDispatchDisconnect(){o._ValueZDRWrap.ZDRCloudDisconnect(),r(0,o._ValueCloudIdentity=null,o),ze.ZDRPreferenceProtocolClear(),localStorage.clear()},ZDRParamDispatchError(e){r(0,o._ValueCloudErrorText=e.message,o)},ZDRParamDispatchWriteError(e){window.alert(r(0,o._OLSKAppToolbarErrorText=e.message,o))},_ZDRParamDispatchInitialisationError(){window.confirm("InitialisationError: Would you like to delete your data and start from scratch?")&&(r(0,o._ValueZDRWrap={ZDRCloudDisconnect(){}},o),o.OLSKCloudStatusDispatchDisconnect(),window.location.reload())},ZDRParamDispatchConnected(e,t){r(0,o._ValueCloudIdentity=e,o),r(0,o._ValueCloudToken=t,o)},ZDRParamDispatchOnline(){r(0,o._ValueCloudIsOffline=!1,o)},ZDRParamDispatchOffline(){r(0,o._ValueCloudIsOffline=!0,o)},ZDRParamDispatchSyncDidStart(){r(0,o._ValueIsSyncing=!0,o)},ZDRParamDispatchSyncDidStop(){r(0,o._ValueIsSyncing=!1,o)},OLSKCloudStatusDispatchSyncStart(){o._ValueZDRWrap.ZDRStorageProtocol===ze.ZDRProtocolRemoteStorage()&&(o._ValueZDRWrap.ZDRStorageClient().startSync(),o.ZDRParamDispatchSyncDidStart())},OLSKCloudStatusDispatchSyncStop(){o._ValueZDRWrap.ZDRStorageProtocol===ze.ZDRProtocolRemoteStorage()&&o._ValueZDRWrap.ZDRStorageClient().stopSync()},ReactIsLoading(e){e||o.DataIsMobile()||setTimeout(function(){document.querySelector(".OLSKNarrowFilterField").focus()})},async SetupEverything(){await o.SetupStorageClient(),await o.SetupCatalog(),await o.SetupValueSettingsAll(),o.SetupValueVersionsMap(),o.SetupCleanup(),o.ReactIsLoading(r(0,o._ValueIsLoading=!1,o))},DataStorageClient:e=>ze.ZDRWrap({ZDRParamLibrary:Be,ZDRParamScopes:[{ZDRScopeKey:"App",ZDRScopeDirectory:"wikiavec",ZDRScopeCreatorDirectory:"rCreativ",ZDRScopeSchemas:[Object.assign(Te,{ZDRSchemaDispatchSyncCreate:o.ZDRSchemaDispatchSyncCreateNote,ZDRSchemaDispatchSyncUpdate:o.ZDRSchemaDispatchSyncUpdateNote,ZDRSchemaDispatchSyncDelete:o.ZDRSchemaDispatchSyncDeleteNote,ZDRSchemaDispatchSyncConflict:o.ZDRSchemaDispatchSyncConflictNote}),Ie,ke]},{ZDRScopeKey:"Public",ZDRScopeDirectory:"wikiavec",ZDRScopeIsPublic:!0}],ZDRParamDispatchError:o.ZDRParamDispatchError,ZDRParamDispatchWriteError:o.ZDRParamDispatchWriteError,_ZDRParamDispatchInitialisationError:o._ZDRParamDispatchInitialisationError,ZDRParamDispatchConnected:o.ZDRParamDispatchConnected,ZDRParamDispatchOnline:o.ZDRParamDispatchOnline,ZDRParamDispatchOffline:o.ZDRParamDispatchOffline,_ZDRParamDispatchJSONPreStringify:Pe.OLSKObjectSafeCopy,_ZDRParamDispatchJSONPostParse:Ce.OLSKRemoteStoragePostJSONParse}),async SetupStorageClient(){r(0,o._ValueZDRWrap=await o.DataStorageClient(ze.ZDRPreferenceProtocol(ze.ZDRProtocolRemoteStorage())),o)},async SetupCatalog(){if(ze.ZDRPreferenceProtocolMigrate()){const e=await o.DataStorageClient(ze.ZDRPreferenceProtocolMigrate());await Promise.all((await e.App.ZDRStoragePathsRecursive("/")).map(async function(t){await o._ValueZDRWrap.App.ZDRStorageWriteObject(t,await e.App.ZDRStorageReadObject(t)),await e.App.ZDRStorageDeleteFile(t)})),ze.ZDRPreferenceProtocolMigrateClear(),e.ZDRCloudDisconnect()}(await o._ValueZDRWrap.App.KVCNote.KVCNoteList()).map(o._OLSKCatalog.modPublic.OLSKCatalogInsert).length},async SetupValueSettingsAll(){r(0,o._ValueSettingsAll=Object.fromEntries((await o._ValueZDRWrap.App.KVCSetting.KVCSettingList()).map(function(e){return[e.KVCSettingKey,e.KVCSettingValue]})),o)},SetupValueVersionsMap(){r(0,o._ValueVersionMap=Ue.OLKSLocalStorageGet(window.localStorage,"KVC_VERSION_MAP")||{},o)},SetupCleanup:()=>(window.localStorage.removeItem("OLSK_FUND_GRANT_DATA"),o._ValueSettingsAll.KVCSettingFundClue&&o._ValueZDRWrap.App.KVCSetting.ZDRModelDeleteObject({KVCSettingKey:"KVCSettingFundClue"})),LifecycleModuleWillMount(){o.SetupEverything()}};x(o.LifecycleModuleWillMount);return[o,function(e){A[e?"unshift":"push"](()=>{o._KVCWriteDetail=e,r(0,o)})},e=>Ne.KVCWriteAccessibilitySummary(e,ue),function(e){A[e?"unshift":"push"](()=>{o._OLSKCatalog=e,r(0,o)})},function(e){A[e?"unshift":"push"](()=>{o._OLSKModalView=e,r(0,o)})},function(e){A[e?"unshift":"push"](()=>{o._KVCWriteTemplateModal=e,r(0,o)})}]}return new class extends oe{constructor(e){super(),re(this,e,An,Pn,s,{})}}({target:document.body})}();
//# sourceMappingURL=ui-behaviour.js.map
